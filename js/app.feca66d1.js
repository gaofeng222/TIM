(function(){var e={6365:function(e,t){"use strict";const n=function(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,o=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),s=/(?:iPad|PlayBook)/.test(e)||o&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!s,i=!a&&!o&&!n;return{isTablet:s,isPhone:a,isAndroid:o,isPC:i,isH5:a||o||s}};t["Z"]=n},865:function(e,t,n){"use strict";n.d(t,{Z:function(){return L},T:function(){return V}});var o=n(7327),r=n(4831);const s=n(4398),a=n(5632),i=n(7348),l=n(1928),c=n(3601),u=n(7899),d=n(2723),p=n(8014),h=n(4819),m=n(8608),g=n(8206),f={en:{"取消":"Cancel","发送":"Send","系统通知":"System notification","关闭":"Close","确定":"Save",TUIChat:s,TUIConversation:a,TUIGroup:i,TUIProfile:l,TUIContact:c,message:d,component:p,time:h,Evaluate:g,Words:m,TUISearch:u}};var v=f;const y=n(9768),k=n(4950),w=n(9810),I=n(8690),E=n(9473),b=n(5058),C=n(9224),T=n(8775),S=n(7339),_=n(2543),N=n(5524),D={zh_cn:{"取消":"取消","发送":"发送","系统通知":"系统通知","关闭":"关闭","确定":"确定",TUIChat:y,TUIConversation:k,TUIGroup:w,TUIProfile:I,TUIContact:E,message:C,component:T,time:S,Evaluate:N,Words:_,TUISearch:b}};var U=D;const M={...v,...U};var B=M;class x{constructor(e){(0,o.Z)(this,"messages",{en:{},zh_cn:{}}),(0,o.Z)(this,"i18n",void 0),this.messages=e}static getInstance(){return x.instance||(x.instance=new x(B)),x.instance}provideMessage(e){return this.messages.en={...this.messages.en,...e.en},this.messages.zh_cn={...this.messages.zh_cn,...e.zh_cn},this.messages}useI18n(){return(0,r.QT)()}static install(e){const t=x.getInstance(),n="zh";t.i18n=(0,r.o)({legacy:!1,globalInjection:!0,global:!0,locale:"zh"===n?"zh_cn":n,fallbackLocale:"zh_cn",messages:t.messages}),e.use(t.i18n)}static plugin(e){e.config.i18n=x.getInstance()}}function V(){return x.getInstance().i18n.global.locale}(0,o.Z)(x,"instance",void 0);var L=x},4307:function(e,t,n){"use strict";n.d(t,{x7:function(){return p},kK:function(){return c.Z},FF:function(){return y},_e:function(){return i},aR:function(){return l.Z}});const o={theme:"dark"};function r(e){e.setCommonStore(o)}function s(e){}const a={name:"TUITheme",plugin:r,install:s};var i=a,l=n(865),c=n(6365);const u=[{name:"TUILongPress",callback:(e,t,n)=>{if("function"!==typeof t.value){const e=n.context.name;let o=`[longpress:] provided expression '${t.expression}' is not afunction, but has to be `;e&&(o+=`Found in component '${e}' `),console.warn(o)}let o=null;const r=e=>{"click"===e.type&&0!==e.button||null===o&&(o=setTimeout((()=>{a(e)}),1e3))},s=e=>{null!==o&&(clearTimeout(o),o=null)},a=e=>{t.value(e)};e.addEventListener("mousedown",r,!1),e.addEventListener("touchstart",r,!1),e.addEventListener("click",s),e.addEventListener("mouseout",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s)}}],d=e=>{u.map((t=>{e.directive(t.name,{beforeMount:t.callback})}))};var p=d,h=n(7327),m=n(8656),g=n(1429),f=n.n(g);class v{constructor(e){(0,h.Z)(this,"allowNotifications",!0),(0,h.Z)(this,"showPreviews",!0),(0,h.Z)(this,"notificationTitle","腾讯云 IM "),(0,h.Z)(this,"notificationIcon","https://web.sdk.qcloud.com/im/demo/latest/faviconnew.png"),e&&(void 0!==e?.allowNotifications&&(this.allowNotifications=e.allowNotifications),void 0!==e?.showPreviews&&(this.showPreviews=e.showPreviews),void 0!==e?.notificationTitle&&(this.notificationTitle=e.notificationTitle),void 0!==e?.notificationIcon&&(this.notificationIcon=e.notificationIcon))}static getInstance(e){return v.instance||(v.instance=new v(e)),v.instance}static plugin(e,t){e.config.notification=this.getInstance(t),this.TUICore=e}static install(e){e.use(this.getInstance())}setNotificationConfiguration(e){e&&(void 0!==e?.allowNotifications&&(this.allowNotifications=e.allowNotifications),void 0!==e?.showPreviews&&(this.showPreviews=e.showPreviews),void 0!==e?.notificationTitle&&(this.notificationTitle=e.notificationTitle),void 0!==e?.notificationIcon&&(this.notificationIcon=e.notificationIcon))}async notify(e){this.allowNotifications&&this.checkNotificationAbility()&&await this.requestNotificationPermission()&&await this.handleNotification(e)}checkNotificationAbility(){return"Notification"in window&&"denied"!==window.Notification.permission}requestNotificationPermission(){return new Promise(((e,t)=>{window?.Notification||t(!1),"granted"===window.Notification.permission&&e(!0),window.Notification.requestPermission().then((t=>{"granted"===t&&e(!0)})).catch((()=>{t(!1)}))}))}async handleNotification(e){if(!this._isMessageNeedNotification(e))return;const t=this._handleNotificationType(e);let n,o={badge:this.notificationIcon,icon:this.notificationIcon,body:"",requireInteraction:!1};switch(t){case"call":if(n=this._handleCallNotificationContent(e),!n?.content)return;o.body=n.content,o.requireInteraction=!n.callEnd;break;case"chat":o.body=await this._handleChatNotificationContent(e),o.requireInteraction=!1;break}const r=new Notification(this.notificationTitle,o);r.onclick=()=>{if(window.focus(),!e||!e?.conversationID)return;const t=v?.TUICore?.TUIServer?.TUIConversation;e?.conversationType!==f().TYPES.CONV_C2C&&e?.conversationType!==f().TYPES.CONV_GROUP||t?.getConversationProfile(e?.conversationID).then((e=>{e?.data?.conversation&&t.handleCurrentConversation(e?.data?.conversation)})),r.close()}}_isMessageNeedNotification(e){if(!e||!e?.ID||!e?.type||e?.isRevoked||e?.isDeleted||m.RZ&&(0,m.RZ)(e))return!1;if(e?.type===f().TYPES.MSG_GRP_TIP||e?.type===f().TYPES.MSG_GRP_SYS_NOTICE)return!1;const t=v?.TUICore?.TUIServer?.TUIConversation?.currentStore?.currentConversationID;return!this.checkPageFocus()||e?.conversationID!==t}_handleNotificationType(e){if(e.type===f().TYPES.MSG_CUSTOM){const t=JSON.parse(e?.payload?.data);if(1===t?.businessID||"av_call"===t?.businessID)return"call"}return"chat"}async _handleChatNotificationContent(e){let t="";if(!e||!e?.ID||!e?.type)return t;switch(this.showPreviews){case!0:t=await this._handleChatNotificationContentTitle(e),t+=this._handleChatNotificationContentText(e);break;case!1:t="您有"+await(v?.TUICore?.tim?.getTotalUnreadMessageCount())+"条新消息";break;default:break}return t}async _handleChatNotificationContentTitle(e){let t="";switch(e?.conversationType){case f().TYPES.CONV_C2C:t=(e?.nick||e?.from)+": ";break;case f().TYPES.CONV_GROUP:t=e?.conversationID+": ",await(v?.TUICore?.tim?.getConversationProfile(e?.conversationID)?.then((n=>{t=(n?.data?.conversation?.groupProfile?.name||e?.conversationID)+": "})).catch((()=>{t=e?.conversationID+": "})));break;case f().TYPES.CONV_SYSTEM:t="系统消息: ";break;default:break}return t}_handleChatNotificationContentText(e){let t="";switch(e.type){case f().TYPES.MSG_TEXT:t+=e?.payload?.text;break;case f().TYPES.MSG_CUSTOM:t+="[自定义消息]";break;case f().TYPES.MSG_IMAGE:t+="[图片]";break;case f().TYPES.MSG_AUDIO:t+="[语音]";break;case f().TYPES.MSG_VIDEO:t+="[视频]";break;case f().TYPES.MSG_FILE:t+="[文件]";break;case f().TYPES.MSG_FACE:t+="[表情]";break;case f().TYPES.MSG_MERGER:t+="[合并消息]";break;case f().TYPES.MSG_LOCATION:t+="[位置]";break;default:break}return t}_handleCallNotificationContent(e){let t="",n=!1;try{if(e.type===f().TYPES.MSG_CUSTOM){const o=JSON.parse(e?.payload?.data),r=JSON.parse(o.data);1===o?.businessID&&(1===o.actionType&&(o.groupID&&o.timeout>0||!o.call_end&&0!==o.call_end&&!o.groupID&&(!r?.data||"switchToAudio"!==r?.data.cmd&&"switchToVideo"!==r?.data.cmd))?(t=this.showPreviews?`${o.inviter} 发起通话`:"您有一个通话请求",n=!1):2===o.actionType&&(t=this.showPreviews?`${o.inviter} 取消通话`:"通话取消",n=!0))}}catch(o){console.warn(o)}return{content:t,callEnd:n}}checkPageFocus(){return document.hasFocus()}}(0,h.Z)(v,"TUICore",void 0),(0,h.Z)(v,"instance",void 0);var y=v},6636:function(e,t,n){"use strict";n.d(t,{Be:function(){return s},IY:function(){return r},OJ:function(){return o}});const o=1400799056,r="d5aff3ebff6253ac4fe2e7fbd7d61bc42a0d4ac6c931ec4048297a3579bc9dac",s="zhangsan"},449:function(e,t,n){"use strict";var o=n(311);function r(e,t){const n=(0,o.resolveComponent)("router-view");return(0,o.openBlock)(),(0,o.createBlock)(n)}var s=n(3744);const a={},i=(0,s.Z)(a,[["render",r]]);var l=i,c=n(1158),u=n.n(c),d=n(8243),p=n(5652);const h=e=>((0,o.pushScopeId)("data-v-df048374"),e=e(),(0,o.popScopeId)(),e),m={class:"search"},g={class:"search-main"},f=h((()=>(0,o.createElementVNode)("div",{class:"logo"},null,-1))),v={class:"search-wrap"},y={class:"goods-tj"};var k=(0,o.defineComponent)({__name:"index",setup(e){const t=(0,o.reactive)({productName:"",selectShop:"",shopTypes:[{name:"天猫",id:1},{name:"店铺",id:2}]}),{productName:n,selectShop:r,shopTypes:s}=(0,o.toRefs)(t);return(e,t)=>{const a=(0,o.resolveComponent)("el-option"),i=(0,o.resolveComponent)("el-select"),l=(0,o.resolveComponent)("el-input"),c=(0,o.resolveComponent)("router-link");return(0,o.openBlock)(),(0,o.createElementBlock)("div",m,[(0,o.createElementVNode)("div",g,[f,(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("div",null,[(0,o.createVNode)(l,{modelValue:(0,o.unref)(n),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.isRef)(n)?n.value=e:null),placeholder:"充电宝",class:"input-with-select"},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{modelValue:(0,o.unref)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.isRef)(r)?r.value=e:null),placeholder:"宝贝",style:{width:"115px"}},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(s),(e=>((0,o.openBlock)(),(0,o.createBlock)(a,{label:e.name,key:e.id,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),append:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" 搜 索 ")])),_:1},8,["modelValue"])]),(0,o.createElementVNode)("div",y,[(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("购物车")])),_:1}),(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("四件套")])),_:1}),(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("潮流T恤")])),_:1}),(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("时尚女鞋")])),_:1}),(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("短裤")])),_:1}),(0,o.createVNode)(c,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("半身裙")])),_:1})])])])])}}});const w=(0,s.Z)(k,[["__scopeId","data-v-df048374"]]);var I=w;const E={class:"content-main"},b=["src"];var C=(0,o.defineComponent)({__name:"index",setup(e){const t=[{url:n(9459)},{url:n(4402)},{url:n(7352)}];return(e,n)=>{const r=(0,o.resolveComponent)("el-carousel-item"),s=(0,o.resolveComponent)("el-carousel");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(p.Z),(0,o.createVNode)(I),(0,o.createElementVNode)("div",E,[(0,o.createVNode)(s,{interval:4e3,height:"600px"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t,(e=>(0,o.createVNode)(r,{key:e.url},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("img",{src:e.url,alt:"",srcset:"",style:{width:"100%"}},null,8,b)])),_:2},1024))),64))])),_:1})])],64)}}});const T=(0,s.Z)(C,[["__scopeId","data-v-f8785b6c"]]);var S=T;const _=[{path:"/",redirect:"/home"},{path:"/home",component:S},{path:"/chat",component:()=>n.e(937).then(n.bind(n,937))},{path:"/login",component:()=>n.e(658).then(n.bind(n,4570))},{path:"/shop-cart",component:()=>n.e(377).then(n.bind(n,3377))}],N=(0,d.createRouter)({history:(0,d.createWebHashHistory)(),routes:_});var D=N,U=n(4865),M=n.n(U);D.beforeEach(((e,t,n)=>{M().start(),n()})),D.afterEach(((e,t)=>{M().done()}));var B=n(7476);const x=(0,B.WB)();var V=x,L=n(6636),R=n(7327),A=(n(7658),n(4307));class P{destroyed(){}updateStore(e,t){}}function O(e){const t=e;let n,o,r,s;return t>=3600?(o=parseInt(""+t/3600,10)<10?`0${parseInt(""+t/3600,10)}`:parseInt(""+t/3600,10),r=parseInt(""+t%60/60,10)<10?`0${parseInt(""+t%60/60,10)}`:parseInt(""+t%60/60,10),s=t%3600<10?"0"+t%3600:t%3600,s>60&&(r=parseInt(""+s/60,10)<10?`0${parseInt(""+s/60,10)}`:parseInt(""+s/60,10),s=s%60<10?"0"+s%60:s%60),n=`${o}:${r}:${s}`):t>=60&&t<3600?(r=parseInt(""+t/60,10)<10?`0${parseInt(""+t/60,10)}`:parseInt(""+t/60,10),s=t%60<10?"0"+t%60:t%60,n=`00:${r}:${s}`):t<60&&(s=t<10?`0${t}`:t,n=`00:00:${s}`),n}const G="https://web.sdk.qcloud.com/im/assets/emoji/",H={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[下雨]":"emoji_2@2x.png","[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[再见]":"emoji_9@2x.png","[冷汗]":"emoji_10@2x.png","[凋谢]":"emoji_11@2x.png","[刀]":"emoji_12@2x.png","[删除]":"emoji_13@2x.png","[勾引]":"emoji_14@2x.png","[发呆]":"emoji_15@2x.png","[发抖]":"emoji_16@2x.png","[可怜]":"emoji_17@2x.png","[可爱]":"emoji_18@2x.png","[右哼哼]":"emoji_19@2x.png","[右太极]":"emoji_20@2x.png","[右车头]":"emoji_21@2x.png","[吐]":"emoji_22@2x.png","[吓]":"emoji_23@2x.png","[咒骂]":"emoji_24@2x.png","[咖啡]":"emoji_25@2x.png","[啤酒]":"emoji_26@2x.png","[嘘]":"emoji_27@2x.png","[回头]":"emoji_28@2x.png","[困]":"emoji_29@2x.png","[坏笑]":"emoji_30@2x.png","[多云]":"emoji_31@2x.png","[大兵]":"emoji_32@2x.png","[大哭]":"emoji_33@2x.png","[太阳]":"emoji_34@2x.png","[奋斗]":"emoji_35@2x.png","[奶瓶]":"emoji_36@2x.png","[委屈]":"emoji_37@2x.png","[害羞]":"emoji_38@2x.png","[尴尬]":"emoji_39@2x.png","[左哼哼]":"emoji_40@2x.png","[左太极]":"emoji_41@2x.png","[左车头]":"emoji_42@2x.png","[差劲]":"emoji_43@2x.png","[弱]":"emoji_44@2x.png","[强]":"emoji_45@2x.png","[彩带]":"emoji_46@2x.png","[彩球]":"emoji_47@2x.png","[得意]":"emoji_48@2x.png","[微笑]":"emoji_49@2x.png","[心碎了]":"emoji_50@2x.png","[快哭了]":"emoji_51@2x.png","[怄火]":"emoji_52@2x.png","[怒]":"emoji_53@2x.png","[惊恐]":"emoji_54@2x.png","[惊讶]":"emoji_55@2x.png","[憨笑]":"emoji_56@2x.png","[手枪]":"emoji_57@2x.png","[打哈欠]":"emoji_58@2x.png","[抓狂]":"emoji_59@2x.png","[折磨]":"emoji_60@2x.png","[抠鼻]":"emoji_61@2x.png","[抱抱]":"emoji_62@2x.png","[抱拳]":"emoji_63@2x.png","[拳头]":"emoji_64@2x.png","[挥手]":"emoji_65@2x.png","[握手]":"emoji_66@2x.png","[撇嘴]":"emoji_67@2x.png","[擦汗]":"emoji_68@2x.png","[敲打]":"emoji_69@2x.png","[晕]":"emoji_70@2x.png","[月亮]":"emoji_71@2x.png","[棒棒糖]":"emoji_72@2x.png","[汽车]":"emoji_73@2x.png","[沙发]":"emoji_74@2x.png","[流汗]":"emoji_75@2x.png","[流泪]":"emoji_76@2x.png","[激动]":"emoji_77@2x.png","[灯泡]":"emoji_78@2x.png","[炸弹]":"emoji_79@2x.png","[熊猫]":"emoji_80@2x.png","[爆筋]":"emoji_81@2x.png","[爱你]":"emoji_82@2x.png","[爱心]":"emoji_83@2x.png","[爱情]":"emoji_84@2x.png","[猪头]":"emoji_85@2x.png","[猫咪]":"emoji_86@2x.png","[献吻]":"emoji_87@2x.png","[玫瑰]":"emoji_88@2x.png","[瓢虫]":"emoji_89@2x.png","[疑问]":"emoji_90@2x.png","[白眼]":"emoji_91@2x.png","[皮球]":"emoji_92@2x.png","[睡觉]":"emoji_93@2x.png","[磕头]":"emoji_94@2x.png","[示爱]":"emoji_95@2x.png","[礼品袋]":"emoji_96@2x.png","[礼物]":"emoji_97@2x.png","[篮球]":"emoji_98@2x.png","[米饭]":"emoji_99@2x.png","[糗大了]":"emoji_100@2x.png","[红双喜]":"emoji_101@2x.png","[红灯笼]":"emoji_102@2x.png","[纸巾]":"emoji_103@2x.png","[胜利]":"emoji_104@2x.png","[色]":"emoji_105@2x.png","[药]":"emoji_106@2x.png","[菜刀]":"emoji_107@2x.png","[蛋糕]":"emoji_108@2x.png","[蜡烛]":"emoji_109@2x.png","[街舞]":"emoji_110@2x.png","[衰]":"emoji_111@2x.png","[西瓜]":"emoji_112@2x.png","[调皮]":"emoji_113@2x.png","[象棋]":"emoji_114@2x.png","[跳绳]":"emoji_115@2x.png","[跳跳]":"emoji_116@2x.png","[车厢]":"emoji_117@2x.png","[转圈]":"emoji_118@2x.png","[鄙视]":"emoji_119@2x.png","[酷]":"emoji_120@2x.png","[钞票]":"emoji_121@2x.png","[钻戒]":"emoji_122@2x.png","[闪电]":"emoji_123@2x.png","[闭嘴]":"emoji_124@2x.png","[闹钟]":"emoji_125@2x.png","[阴险]":"emoji_126@2x.png","[难过]":"emoji_127@2x.png","[雨伞]":"emoji_128@2x.png","[青蛙]":"emoji_129@2x.png","[面条]":"emoji_130@2x.png","[鞭炮]":"emoji_131@2x.png","[风车]":"emoji_132@2x.png","[飞吻]":"emoji_133@2x.png","[飞机]":"emoji_134@2x.png","[饥饿]":"emoji_135@2x.png","[香蕉]":"emoji_136@2x.png","[骷髅]":"emoji_137@2x.png","[麦克风]":"emoji_138@2x.png","[麻将]":"emoji_139@2x.png","[鼓掌]":"emoji_140@2x.png","[龇牙]":"emoji_141@2x.png"},j=["[龇牙]","[调皮]","[流汗]","[偷笑]","[再见]","[敲打]","[擦汗]","[猪头]","[玫瑰]","[流泪]","[大哭]","[嘘]","[酷]","[抓狂]","[委屈]","[便便]","[炸弹]","[菜刀]","[可爱]","[色]","[害羞]","[得意]","[吐]","[微笑]","[怒]","[尴尬]","[惊恐]","[冷汗]","[爱心]","[示爱]","[白眼]","[傲慢]","[难过]","[惊讶]","[疑问]","[困]","[么么哒]","[憨笑]","[爱情]","[衰]","[撇嘴]","[阴险]","[奋斗]","[发呆]","[右哼哼]","[抱抱]","[坏笑]","[飞吻]","[鄙视]","[晕]","[大兵]","[可怜]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[凋谢]","[米饭]","[蛋糕]","[西瓜]","[啤酒]","[瓢虫]","[勾引]","[OK]","[爱你]","[咖啡]","[月亮]","[刀]","[发抖]","[差劲]","[拳头]","[心碎了]","[太阳]","[礼物]","[皮球]","[骷髅]","[挥手]","[闪电]","[饥饿]","[咒骂]","[折磨]","[抠鼻]","[鼓掌]","[糗大了]","[左哼哼]","[打哈欠]","[快哭了]","[吓]","[篮球]","[乒乓]","[NO]","[跳跳]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[闭嘴]","[猫咪]","[红双喜]","[鞭炮]","[红灯笼]","[麻将]","[麦克风]","[礼品袋]","[信封]","[象棋]","[彩带]","[蜡烛]","[爆筋]","[棒棒糖]","[奶瓶]","[面条]","[香蕉]","[飞机]","[左车头]","[车厢]","[右车头]","[多云]","[下雨]","[钞票]","[熊猫]","[灯泡]","[风车]","[闹钟]","[雨伞]","[彩球]","[钻戒]","[沙发]","[纸巾]","[手枪]","[青蛙]"],z="https://web.sdk.qcloud.com/im/assets/face-elem/",F=[{icon:1,list:["yz00","yz01","yz02","yz03","yz04","yz05","yz06","yz07","yz08","yz09","yz10","yz11","yz12","yz13","yz14","yz15","yz16","yz17"]},{icon:2,list:["ys00","ys01","ys02","ys03","ys04","ys05","ys06","ys07","ys08","ys09","ys10","ys11","ys12","ys13","ys14","ys15"]},{icon:3,list:["gcs00","gcs01","gcs02","gcs03","gcs04","gcs05","gcs06","gcs07","gcs08","gcs09","gcs10","gcs11","gcs12","gcs13","gcs14","gcs15","gcs16"]}];function $(e){const t=[];let n=e.text,o=-1,r=-1;while(""!==n)switch(o=n.indexOf("["),r=n.indexOf("]"),o){case 0:if(-1===r)t.push({name:"text",text:n}),n="";else{const e=n.slice(0,r+1);H[e]?(t.push({name:"img",src:G+H[e]}),n=n.substring(r+1)):(t.push({name:"text",text:"["}),n=n.slice(1))}break;case-1:t.push({name:"text",text:n}),n="";break;default:t.push({name:"text",text:n.slice(0,o)}),n=n.substring(o);break}return t}var Z=n(1429),Y=n.n(Z),K=Y();const W={typeC2C:"isC2C",typeGroup:"isGroup",cancel:"cancel",group:"GROUP",handleMessage:{revoke:"revoke",copy:"copy",delete:"delete",forward:"forward",reply:"reply",reference:"reference"},at:"@",all:"所有人",typeText:1,typeCustom:2,typeImage:3,typeAudio:4,typeVideo:5,typeFile:6,typeFace:8,typeForward:"forward",typeMute:"mute",typeOrder:"order",typeService:"consultion",typeReply:"quick_reply",typeEvaluate:"evaluation",typeTextLink:"text_link",typeAndroid:"android",typeIphone:"iphone",typeMini:"miniprogram",typeUserTyping:"user_typing_status",typeInputStatusIng:"EIMAMSG_InputStatus_Ing",typeInputStatusEnd:"EIMAMSG_InputStatus_End",scrollType:{toBottom:"bottom",toTarget:"target"},inViewType:{page:"page",scroll:"scroll"},TYPE_CALL_MESSAGE:1,CALL_ACTION_TYPE:{INVITE:1,CANCEL_INVITE:2,ACCEPT_INVITE:3,REJECT_INVITE:4,INVITE_TIMEOUT:5}};var q=W;function X(e){let t="";switch(e.type){case K.TYPES.CONV_C2C:t=fe(e?.userProfile?.avatar)?e?.userProfile?.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png";break;case K.TYPES.CONV_GROUP:t=fe(e?.groupProfile?.avatar)?e?.groupProfile?.avatar:"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg";break;case K.TYPES.CONV_SYSTEM:t=fe(e?.groupProfile?.avatar)?e?.groupProfile?.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/group_avatar.png";break}return t}function J(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();let n="";switch(e.type){case K.TYPES.CONV_C2C:n=e?.userProfile.nick||e?.userProfile?.userID||"";break;case K.TYPES.CONV_GROUP:n=e.groupProfile.name||e?.groupProfile?.groupID||"";break;case K.TYPES.CONV_SYSTEM:n=t("系统通知");break}return n}function Q(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=[`[${t("TUIConversation.有人@我")}]`,`[${t("TUIConversation.@所有人")}]`,`[${t("TUIConversation.@所有人")}][${t("TUIConversation.有人@我")}]`];let o="";for(let r=0;r<e.groupAtInfoList.length;r++)e.groupAtInfoList[r].atTypeArray[0]&&e.unreadCount>0&&(o=n[e.groupAtInfoList[r].atTypeArray[0]-1]);return o}function ee(e){const t={referenceMessageForShow:"",referenceMessageType:0};if(!e||!e?.ID||!e?.type)return t;switch(e.type){case K.TYPES.MSG_TEXT:t.referenceMessageForShow=e?.payload?.text,t.referenceMessageType=1;break;case K.TYPES.MSG_CUSTOM:t.referenceMessageForShow="[自定义消息]",t.referenceMessageType=2;break;case K.TYPES.MSG_IMAGE:t.referenceMessageForShow="[图片]",t.referenceMessageType=3;break;case K.TYPES.MSG_AUDIO:t.referenceMessageForShow="[语音]",t.referenceMessageType=4;break;case K.TYPES.MSG_VIDEO:t.referenceMessageForShow="[视频]",t.referenceMessageType=5;break;case K.TYPES.MSG_FILE:t.referenceMessageForShow="[文件]",t.referenceMessageType=6;break;case K.TYPES.MSG_FACE:t.referenceMessageForShow="[表情]",t.referenceMessageType=8;break}return t}function te(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),{lastMessage:n}=e,o=e;let r="",s="";const a=o.unreadCount>0&&o.messageRemindType===K.TYPES.MSG_REMIND_ACPT_NOT_NOTE?t(`[${o.unreadCount>99?"99+":o.unreadCount}条]`):"";if(o.type===K.TYPES.CONV_GROUP&&(r=n.fromAccount===o.groupProfile.selfInfo.userID?t("TUIConversation.我"):n.nameCard||n.nick||n.fromAccount),n.type===K.TYPES.MSG_TEXT)s=n.payload.text;else if(n.type===K.TYPES.MSG_CUSTOM){const e=ke(n?.payload?.data);if(1===e?.businessID)return s=pe(n),s;s=n.messageForShow}else s=n.messageForShow;return n.isRevoked&&(s=t("TUIChat.撤回了一条消息")),o.type===K.TYPES.CONV_GROUP&&n.type===K.TYPES.MSG_GRP_TIP?s:`${a}${r?`${r}:`:""}${s}`}function ne(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n={message:e,text:""};let o=e?.nick||e?.payload?.userIDList?.join(",");if(e?.payload?.memberList?.length>0&&(o="",e?.payload?.memberList?.map((e=>{o+=`${e?.nick||e?.userID},`})),o=o?.slice(0,-1)),e?.type===K?.TYPES?.MSG_GRP_TIP)switch(e.payload.operationType){case K.TYPES.GRP_TIP_MBR_JOIN:n.text=`${o} ${t("message.tip.加入群组")}`;break;case K.TYPES.GRP_TIP_MBR_QUIT:n.text=`${t("message.tip.群成员")}：${o} ${t("message.tip.退出群组")}`;break;case K.TYPES.GRP_TIP_MBR_KICKED_OUT:n.text=`${t("message.tip.群成员")}：${o} ${t("message.tip.被")}${e.payload.operatorID}${t("message.tip.踢出群组")}`;break;case K.TYPES.GRP_TIP_MBR_SET_ADMIN:n.text=`${t("message.tip.群成员")}：${o} ${t("message.tip.成为管理员")}`;break;case K.TYPES.GRP_TIP_MBR_CANCELED_ADMIN:n.text=`${t("message.tip.群成员")}：${o} ${t("message.tip.被撤销管理员")}`;break;case K.TYPES.GRP_TIP_GRP_PROFILE_UPDATED:n.text=oe(e);break;case K.TYPES.GRP_TIP_MBR_PROFILE_UPDATED:for(const o of e.payload.memberList)o.muteTime>0?n.text=`${t("message.tip.群成员")}：${o.userID}${t("message.tip.被禁言")}`:n.text=`${t("message.tip.群成员")}：${o.userID}${t("message.tip.被取消禁言")}`;break;default:n.text=`[${t("message.tip.群提示消息")}]`;break}else n.text=pe(e);return n}function oe(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),{payload:n}=e,{newGroupProfile:o}=n,{operatorID:r}=n;let s="";const a=Object.keys(o)[0];switch(a){case"muteAllMembers":s=o[a]?`${t("message.tip.管理员")} ${r} ${t("message.tip.开启全员禁言")}`:`${t("message.tip.管理员")} ${r} ${t("message.tip.取消全员禁言")}`;break;case"ownerID":s=`${o[a]} ${t("message.tip.成为新的群主")}`;break;case"groupName":s=`${r} ${t("message.tip.修改群名为")} ${o[a]}`;break;case"notification":s=`${r} ${t("message.tip.发布新公告")}`;break;default:break}return s}function re(e){const t={text:$(e.payload)};return t}function se(e){const t={message:e,name:"",url:""};return t.name=e.payload.data,e.payload.data.indexOf("@2x")<0&&(t.name=`${t.name}@2x`),t.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${t.name}.png`,t}function ae(e){const t={lon:"",lat:"",href:"",url:"",description:"",message:e};return t.lon=e.payload.longitude.toFixed(6),t.lat=e.payload.latitude.toFixed(6),t.href=`https://map.qq.com/?type=marker&isopeninfowin=1&markertype=1&pointx=${t.lon}&pointy=${t.lat}&name=${e.payload.description}`,t.url=`https://apis.map.qq.com/ws/staticmap/v2/?center=${t.lat},${t.lon}&zoom=10&size=300*150&maptype=roadmap&markers=size:large|color:0xFFCCFF|label:k|${t.lat},${t.lon}&key=UBNBZ-PTP3P-TE7DB-LHRTI-Y4YLE-VWBBD`,t.description=e.payload.description,t}function ie(e){return{progress:"unSend"===e?.status&&e.progress,url:e.payload.imageInfoArray[1].url,width:e.payload.imageInfoArray[0].width,height:e.payload.imageInfoArray[0].height,message:e}}function le(e){return{progress:"unSend"===e?.status&&e?.progress,url:e?.payload?.videoUrl,snapshotUrl:e?.payload?.snapshotUrl,snapshotWidth:e?.payload?.snapshotWidth,snapshotHeight:e?.payload?.snapshotHeight,message:e}}function ce(e){return{progress:"unSend"===e?.status&&e.progress,url:e.payload.url,message:e,second:e.payload.second}}function ue(e){let t="";return t=e.payload.fileSize>=1048576?`${(e.payload.fileSize/1048576).toFixed(2)} Mb`:e.payload.fileSize>=1024?`${(e.payload.fileSize/1024).toFixed(2)} Kb`:`${e.payload.fileSize.toFixed(2)}B`,{progress:"unSend"===e?.status&&e.progress,url:e.payload.fileUrl,message:e,name:e.payload.fileName,size:t}}function de(e){return{message:e,...e.payload}}function pe(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();let n={},o={};try{n=ke(e.payload.data)}catch(a){n={}}if(1!==n.businessID)return"";try{o=ke(n.data)}catch(a){o={}}let r="";n?.inviteeList?.forEach(((e,t)=>{r+=t<n?.inviteeList?.length-1?`"${e}"、`:`"${e}" `}));const s=`"${n?.inviter}" `;switch(n.actionType){case 1:return o.call_end>=0&&!n.groupID?`${t("message.custom.通话时长")}：${O(o.call_end)}`:n.groupID&&n.timeout>0?`${s}${t("message.custom.发起通话")}`:n.groupID?`${t("message.custom.结束群聊")}`:o.data&&"switchToAudio"===o.data.cmd?`${t("message.custom.切换语音通话")}`:o.data&&"switchToVideo"===o.data.cmd?`${t("message.custom.切换视频通话")}`:`${t("message.custom.发起通话")}`;case 2:return`${n.groupID?s:""}${t("message.custom.取消通话")}`;case 3:return o.data&&"switchToAudio"===o.data.cmd?`${t("message.custom.切换语音通话")}`:o.data&&"switchToVideo"===o.data.cmd?`${t("message.custom.切换视频通话")}`:`${n.groupID?r:""}${t("message.custom.已接听")}`;case 4:return`${n.groupID?r:""}${t("message.custom.拒绝通话")}`;case 5:return o.data&&"switchToAudio"===o.data.cmd?`${t("message.custom.切换语音通话")}`:o.data&&"switchToVideo"===o.data.cmd?`${t("message.custom.切换视频通话")}`:`${n.groupID?r:""}${t("message.custom.无应答")}`;default:return""}}function he(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();return{message:e,custom:pe(e)||e?.payload?.extension||`[${t("message.custom.自定义消息")}]`}}function me(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return`${e.payload.operatorID} ${t("message.tip.申请加入群组")}：${n}`;case 2:return`${t("message.tip.成功加入群组")}：${n}`;case 3:return`${t("message.tip.申请加入群组")}：${n} ${t("message.tip.被拒绝")}`;case 4:return`${t("message.tip.你被管理员")}${e.payload.operatorID} ${t("message.tip.踢出群组")}：${n}`;case 5:return`${t("message.tip.群")}：${n} ${t("message.tip.被")} ${e.payload.operatorID} ${t("message.tip.解散")}`;case 6:return`${e.payload.operatorID} ${t("message.tip.创建群")}：${n}`;case 7:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 8:return`${t("message.tip.你退出群组")}：${n}`;case 9:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.设置为群")}：${n} ${t("message.tip.的管理员")}`;case 10:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.撤销群")}：${n} ${t("message.tip.的管理员身份")}`;case 12:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 13:return`${e.payload.operatorID} ${t("message.tip.同意加群")}：${n}`;case 14:return`${e.payload.operatorID} ${t("message.tip.拒接加群")}：${n}`;case 255:return`${t("message.tip.自定义群系统通知")}: ${e.payload.userDefinedField}`}}function ge(e,t,n){const o=e?.querySelectorAll(`.${t}`)||[],r=Array.prototype.slice.call(o).map((e=>new Promise(((t,n)=>{e.onload=()=>{t(e)},e.onloadeddata=()=>{t(e)},e.onprogress=()=>{t(e)},e.complete&&t(e)}))));return Promise.all(r).then((()=>{n&&n()})).catch((e=>{console.error("网络异常",e)}))}function fe(e){return/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)}function ve(e,t,n){return{businessID:e,version:t,...n}}function ye(e){return!!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function ke(e){return ye(e)?JSON.parse(e):e}function we(e){if(!e)return!1;try{const{businessID:t}=ke(e?.payload?.data);if(t===q.typeUserTyping)return!0}catch{return!1}return!1}function Ie(e,t=new WeakMap){if("object"!==typeof e||null===e)throw new TypeError("传入参数不是对象");if(t.has(e))return t.get(e);const n=Object.create(Object.getPrototypeOf(e)),o=Object.keys(e);return o.forEach((o=>{const r=e[o];"object"!==typeof r||null===r?n[o]=r:Array.isArray(r)?n[o]=[...r]:r instanceof Set?n[o]=new Set([...r]):r instanceof Map?n[o]=new Map([...r]):(t.set(e,e),n[o]=Ie(r,t))})),n}const Ee=e=>e?.type===K?.TYPES?.MSG_GRP_TIP||e?.type===K?.TYPES?.MSG_CUSTOM&&e?.conversationType===K?.TYPES?.CONV_GROUP&&ke(e?.payload?.data)?.businessID===q?.TYPE_CALL_MESSAGE,be=(e,t,n,o)=>{const r=e/t,s=n/o;return e<=n&&t<=o?{width:e,height:t}:e<=n&&t>o||e>n&&t>o&&r<=s?{width:e*(o/t),height:o}:{width:n,height:t*(n/e)}};class Ce extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIChat",{},this.updateStore.bind(this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){Object.assign(this.currentStore,e),e.conversation.conversationID?e.conversation.conversationID&&e.conversation.conversationID!==t.conversation.conversationID&&this.render(e.conversation):this.currentStore.messageList=[]}render(e){const t=15;if(this.currentStore.isFirstRender=!0,this.currentStore.messageList=[],this.currentStore.readSet.clear(),this.getMessageList({conversationID:e.conversationID,count:t}),e.type===this.TUICore.TIM.TYPES.CONV_GROUP){this.currentStore.userInfo.isGroup=!0;const t={groupID:e.groupProfile.groupID,userIDList:[e.groupProfile.selfInfo.userID]};this.getGroupProfile({groupID:e.groupProfile.groupID}),this.getGroupMemberProfile(t).then((e=>{const{memberList:t}=e.data,[n]=t;this.currentStore.selfInfo=n})),this?.TUICore?.TUIServer?.TUIGroup?.getGroupMemberList({groupID:e.groupProfile.groupID,count:100,offset:0}).then((e=>{this.currentStore.allMemberList=e.data}))}else this.currentStore.userInfo.isGroup=!1,this.currentStore.userInfo.list=[e?.userProfile]}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_RECEIVED,this.handleMessageReceived,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_MODIFIED,this.handleMessageModified,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_REVOKED,this.handleMessageRevoked,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_READ_BY_PEER,this.handleMessageReadByPeer,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.MESSAGE_READ_RECEIPT_RECEIVED,this.handleMessageReadReceiptReceived,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_RECEIVED,this.handleMessageReceived),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_MODIFIED,this.handleMessageModified),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_REVOKED,this.handleMessageRevoked),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_READ_BY_PEER,this.handleMessageReadByPeer),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.MESSAGE_READ_RECEIPT_RECEIVED,this.handleMessageReadReceiptReceived)}handleMessageReceived(e){e?.data?.forEach((e=>{e?.conversationID===this?.store?.conversation?.conversationID&&(this.currentStore.messageList=[...this.currentStore.messageList,e]),A.FF.getInstance().notify(e)}))}handleMessageModified(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageRevoked(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageReadByPeer(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleGroupListUpdated(e){e?.data.map((e=>(e?.groupID===this?.store?.conversation?.groupProfile?.groupID&&(this.store.conversation.groupProfile=e,this.currentStore.conversation={},this.currentStore.conversation=this.store.conversation),e)))}handleMessageReadReceiptReceived(e){const t=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=t}handleMessageOptions(e,t,n,o){const r={to:"",conversationType:o?.type||this.store.conversation.type,payload:e,needReadReceipt:this.currentStore.needReadReceipt};switch(this.currentStore.needTyping&&(r.cloudCustomData={messageFeature:{needTyping:1,version:1}},r.cloudCustomData=JSON.stringify(r.cloudCustomData)),"file"===t&&n&&(r.onProgress=n),r.conversationType){case this.TUICore.TIM.TYPES.CONV_C2C:r.to=o?.userProfile?.userID||this.store.conversation?.userProfile?.userID||"";break;case this.TUICore.TIM.TYPES.CONV_GROUP:r.to=o?.groupProfile?.groupID||this.store.conversation?.groupProfile?.groupID||"";break;default:break}return r}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUIChat",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}handlePromiseCallbackRetry(e,t=[],n=function(){return!1}){return new Promise(((o,r)=>{let s=0;function a(){s++,e().then(o).catch((e=>{s>t.length||n&&n(e)?r(e):setTimeout(a,t[s-1])}))}a()}))}handleUploadProgress(e,t){this.currentStore.messageList.map((n=>(n.ID===t.ID&&(n.progress=e),n)))}sendFaceMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions(e,"face"),o=this.TUICore.tim.createFaceMessage(n);this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendImageMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions({file:e},"file",(e=>{this.handleUploadProgress(e,o)})),o=this.TUICore.tim.createImageMessage(n);o.progress=.01,this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendVideoMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions({file:e},"file",(e=>{this.handleUploadProgress(e,o)})),o=this.TUICore.tim.createVideoMessage(n);o.progress=.01,this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendFileMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions({file:e},"file",(e=>{this.handleUploadProgress(e,o)})),o=this.TUICore.tim.createFileMessage(n);o.progress=.01,this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendCustomMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{e.data=JSON.stringify(e.data);const n=this.handleMessageOptions(e,"custom"),o=this.TUICore.tim.createCustomMessage(n);this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendLocationMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions(e,"location"),o=this.TUICore.tim.createLocationMessage(n);this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}forwardMessage(e,t){return this.handlePromiseCallback((async(n,o)=>{try{const o=this.handleMessageOptions(e,"forward",{},t),r=this.TUICore.tim.createForwardMessage(o),s=await this.TUICore.tim.sendMessage(r);this.store.conversation.conversationID===s.data.message.conversationID&&this.currentStore.messageList.push(s.data.message),n(s)}catch(r){o(r);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}async sendMessageReadReceipt(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.sendMessageReadReceipt(e);t(n)}catch(o){n(o)}}))}async getMessageReadReceiptList(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getMessageReadReceiptList(e);t(n)}catch(o){n(o)}}))}async getMessageList(e,t){return this.handlePromiseCallback((async(n,o)=>{try{const o=await this.TUICore.tim.getMessageList(e);o.data.messageList.length&&await this.getMessageReadReceiptList(o.data.messageList),this.currentStore.messageList=t?[...o.data.messageList,...this.currentStore.messageList]:o.data.messageList,this.currentStore.nextReqMessageID=o.data.nextReqMessageID,this.currentStore.isCompleted=o.data.isCompleted,n(o)}catch(r){o(r)}}))}async getHistoryMessageList(){const e={conversationID:this.currentStore.conversation.conversationID,nextReqMessageID:this.currentStore.nextReqMessageID,count:15};this.currentStore.isCompleted||this.getMessageList(e,!0)}sendTextMessage(e,t){return this.handlePromiseCallback((async(n,o)=>{try{const o=this.handleMessageOptions({text:e},"text");let r={};if(o.cloudCustomData)try{r=ke(o.cloudCustomData)}catch{r={}}const s=JSON.stringify(t),a=Object.assign(o,{cloudCustomData:s,...r}),i=this.TUICore.tim.createTextMessage(a);this.currentStore.messageList.push(i);const l=await this.TUICore.tim.sendMessage(i);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===l.data.message.ID?l.data.message:e)),n(l)}catch(r){o(r);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendTypingMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{e.data=JSON.stringify(e.data);const n=this.handleMessageOptions(e,"custom"),o=this.TUICore.tim.createCustomMessage(n),r=await this.TUICore.tim.sendMessage(o,{onlineUserOnly:!0});t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendTextAtMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions(e,"text"),o=this.TUICore.tim.createTextAtMessage(n);this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}sendMergerMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=this.handleMessageOptions(e,"merger"),o=this.TUICore.tim.createMergerMessage(n);this.currentStore.messageList.push(o);const r=await this.TUICore.tim.sendMessage(o);this.currentStore.messageList=this.currentStore.messageList.map((e=>e.ID===r.data.message.ID?r.data.message:e)),t(r)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}revokeMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.revokeMessage(e),o=ke(e?.cloudCustomData);o?.messageReply?.messageRootID&&await this.revokeReplyMessage(e),t(n)}catch(o){n(o);const e=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=e}}))}resendMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.resendMessage(e);this.currentStore.messageList=this.currentStore.messageList.filter((t=>t.ID!==e.ID)),this.currentStore.messageList.push(n.data.message),t(n)}catch(o){n(o)}}))}deleteMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.deleteMessage(e);t(n);const o=this.currentStore.messageList;this.currentStore.messageList=[],this.currentStore.messageList=o}catch(o){n(o)}}))}modifyMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.modifyMessage(e);t(n)}catch(o){const e=o?.code,t=o?.data;2480===e?console.warn("MODIFY_MESSAGE_ERROR","修改消息发生冲突，data.message 是最新的消息","data.message:",t?.message):2481===e?console.warn("MODIFY_MESSAGE_ERROR","不支持修改直播群消息"):20026===e&&console.warn("MODIFY_MESSAGE_ERROR","消息不存在"),n(o)}}))}replyMessage(e,t){const n=()=>this.handlePromiseCallback((async(n,o)=>{try{const o={messageAbstract:e?.payload?.text,messageSender:e?.from,messageID:e?.ID,messageType:e?.type,messageTime:e?.time,messageSequence:e?.sequence,version:1};if(!t){const n=ke(e?.cloudCustomData),o=n?.messageReply?.messageRootID;t=await(this?.currentStore?.messageList?.find((e=>e?.ID===o)))||this.findMessage(o)}const r=t?.cloudCustomData?ke(t?.cloudCustomData):{messageReplies:{}};r?.messageReplies?.replies?r.messageReplies.replies=[...r?.messageReplies?.replies,o]:r.messageReplies={replies:[o],version:1},t.cloudCustomData=JSON.stringify(r);const s=this.modifyMessage(t);n(s)}catch(r){o(r)}})),o=function(e){return!e||2480!==e?.code};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}revokeReplyMessage(e,t){const n=()=>this.handlePromiseCallback((async(n,o)=>{try{if(!t){const n=ke(e?.cloudCustomData),o=n?.messageReply?.messageRootID;t=await(this?.currentStore?.messageList?.find((e=>e?.ID===o)))||this.findMessage(o)}const o=t?.cloudCustomData?ke(t?.cloudCustomData):{messageReplies:{}};if(o?.messageReplies?.replies){const t=o.messageReplies.replies.findIndex((t=>t?.messageID===e?.ID));o?.messageReplies?.replies?.splice(t,1)}t.cloudCustomData=JSON.stringify(o);const r=this.modifyMessage(t);n(r)}catch(r){o(r)}})),o=function(e){return!e||2480!==e?.code};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}emojiReact(e,t){const n=()=>this.handlePromiseCallback((async(n,o)=>{try{e&&e?.ID&&t||o();const r=this.TUICore?.TUIServer?.TUIProfile?.store?.profile?.userID;e=await(this?.currentStore?.messageList?.find((t=>t?.ID===e?.ID)))||this.findMessage(e?.ID);const s=e?.cloudCustomData?ke(e?.cloudCustomData):{messageReact:{}};if(s?.messageReact?.reacts)if(s?.messageReact?.reacts[t]){const e=s?.messageReact?.reacts[t]?.indexOf(r);-1===e?s?.messageReact?.reacts[t]?.push(r):(s?.messageReact?.reacts[t]?.splice(e,1),0===s?.messageReact?.reacts[t]?.length&&delete s?.messageReact?.reacts[t])}else s.messageReact.reacts[t]=[r];else s.messageReact={reacts:{},version:1},s.messageReact.reacts[t]=[r];e.cloudCustomData=JSON.stringify(s);const a=this.modifyMessage(e);n(a)}catch(r){o(r)}})),o=function(e){return!e||2480!==e?.code};return this.handlePromiseCallbackRetry(n,[500,1e3,3e3],o)}findMessage(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.findMessage(e);t(n)}catch(o){n(o)}}))}getGroupProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.currentStore.conversation.groupProfile=n.data.group,t(n)}catch(o){n(o)}}))}getGroupMemberProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberProfile(e);t(n)}catch(o){n(o)}}))}handleGroupApplication(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}}))}async getUserProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}}))}async getFriendList(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getFriendList();e(t)}catch(n){t(n)}}))}async checkFriend(e,t){return this.handlePromiseCallback((async(n,o)=>{try{const o=await this.TUICore.tim.checkFriend({userIDList:[e],type:t}),r=o?.data?.successUserIDList[0]?.relation;n(r)}catch(r){o(r)}}))}async getGroupReadMemberList(e,t="",n=15){return this.handlePromiseCallback((async(o,r)=>{try{const r=await this.TUICore.tim.getGroupMessageReadMemberList({message:e,filter:0,cursor:t,count:n});o(r)}catch(s){r(s)}}))}async getGroupUnreadMemberList(e,t="",n=15){return this.handlePromiseCallback((async(o,r)=>{try{const r=await this.TUICore.tim.getGroupMessageReadMemberList({message:e,filter:1,cursor:t,count:n});o(r)}catch(s){r(s)}}))}async handleMessageSentByMeToView(e){e?.conversationID===this?.store?.conversation?.conversationID&&this.currentStore.messageList.push(e)}bind(e){return this.currentStore=e}}var Te=n.p+"img/at.cc16facd.svg";const Se=e=>((0,o.pushScopeId)("data-v-5e6c012e"),e=e(),(0,o.popScopeId)(),e),_e={class:"TUIChat-header"},Ne={class:"setting"},De={class:"TUIChat-main"},Ue={class:"TUIChat-safe-tips"},Me=["id"],Be=Se((()=>(0,o.createElementVNode)("i",{class:"icon icon-bottom-double"},null,-1))),xe={class:"to-bottom-tip-cont"},Ve={key:0,class:"dialog dialog-conversation"},Le=["src"],Re={class:"name"},Ae=["src"],Pe={key:0,class:"name"},Oe={class:"dialog dialog-conversation"},Ge={class:"func",id:"func"},He={class:"func-main"},je={key:0,class:"memberList"},ze={class:"memberList-box",ref:"dialog"},Fe={key:0,class:"memberList-box-title"},$e=Se((()=>(0,o.createElementVNode)("h1",null,"选择提醒的人",-1))),Ze=Se((()=>(0,o.createElementVNode)("img",{src:Te,alt:""},null,-1))),Ye=["onClick"],Ke=["src"],We={key:1,class:"reply"},qe={class:"reply-box"},Xe=Se((()=>(0,o.createElementVNode)("i",null,null,-1))),Je={class:"reply-box-show"},Qe={class:"input"},et=["placeholder"],tt={key:0},nt=["disabled"],ot={class:"input-btn-hover"},rt={key:2,class:"reference"},st={class:"reference-box"},at={class:"reference-box-show"},it={class:"reference-box-show-name"},lt={class:"mask-main"},ct=Se((()=>(0,o.createElementVNode)("i",null,null,-1))),ut={key:1,class:"TUIChat"},dt={class:"TUIChat-header"};function pt(e,t,n,r,s,a){const i=(0,o.resolveComponent)("TypingHeader"),l=(0,o.resolveComponent)("Manage"),c=(0,o.resolveComponent)("Replies"),u=(0,o.resolveComponent)("MessageTip"),d=(0,o.resolveComponent)("MessageText"),p=(0,o.resolveComponent)("MessageImage"),h=(0,o.resolveComponent)("MessageVideo"),m=(0,o.resolveComponent)("MessageAudio"),g=(0,o.resolveComponent)("MessageFile"),f=(0,o.resolveComponent)("MessageFace"),v=(0,o.resolveComponent)("MessageLocation"),y=(0,o.resolveComponent)("MessageCustom"),k=(0,o.resolveComponent)("MessageMerger"),w=(0,o.resolveComponent)("MessageTool"),I=(0,o.resolveComponent)("MessageEmojiReact"),E=(0,o.resolveComponent)("MessageBubble"),b=(0,o.resolveComponent)("MessageRevoked"),C=(0,o.resolveComponent)("ReadReceiptDialog"),T=(0,o.resolveComponent)("imagePreviewer"),S=(0,o.resolveComponent)("MessageSystem");return"chat"===e.conversationType?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["TUIChat",[e.env.isH5?"TUIChat-H5":""]])},[(0,o.createElementVNode)("header",_e,[e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.back&&e.back(...t))})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(i,{needTyping:e.needTyping,conversation:e.conversation,messageList:e.messageList,inputText:e.text,inputBlur:e.inputBlur,inputCompositionCont:e.inputCompositionCont},null,8,["needTyping","conversation","messageList","inputText","inputBlur","inputCompositionCont"]),(0,o.createElementVNode)("aside",Ne,[e.conversation.groupProfile?((0,o.openBlock)(),(0,o.createBlock)(l,{key:0,conversation:e.conversation,userInfo:e.userInfo,isH5:e.env.isH5},null,8,["conversation","userInfo","isH5"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(c,{message:e.currentMessage,conversation:e.conversation,show:e.repliesDialogStatus,isH5:e.env.isH5,messageList:e.messageList,onCloseDialog:e.closeDialog,ref:"repliesDialog"},null,8,["message","conversation","show","isH5","messageList","onCloseDialog"])])]),(0,o.createElementVNode)("div",De,[(0,o.createElementVNode)("div",Ue,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.安全提示")),1),(0,o.createElementVNode)("a",{onClick:t[1]||(t[1]=t=>e.openLink(e.Link.complaint))},(0,o.toDisplayString)(e.$t("TUIChat.点此投诉")),1)]),(0,o.createElementVNode)("ul",{class:"TUI-message-list",onClick:t[4]||(t[4]=t=>e.dialogID=""),ref:"messageEle",id:"messageEle"},[e.isCompleted?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:0,class:"message-more",onClick:t[2]||(t[2]=(...t)=>e.getHistoryMessageList&&e.getHistoryMessageList(...t))},(0,o.toDisplayString)(e.$t("TUIChat.查看更多")),1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.messages,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:n,id:t?.ID,ref_for:!0,ref:"messageAimID"},[e.isMessageTip(t)?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,data:e.handleTipMessageShowContext(t)},null,8,["data"])):t.isRevoked?((0,o.openBlock)(),(0,o.createBlock)(b,{key:2,isEdit:t.type===e.types.MSG_TEXT,data:t,onEdit:n=>e.handleEdit(t)},null,8,["isEdit","data","onEdit"])):((0,o.openBlock)(),(0,o.createBlock)(E,{key:1,isH5:e.env.isH5,data:t,messagesList:e.messages,needGroupReceipt:e.needGroupReceipt,needReplies:!0,needEmojiReact:e.isNeedEmojiReact,onJumpID:e.jumpID,onResendMessage:e.resendMessage,onShowReadReceiptDialog:e.showDialog,onShowRepliesDialog:e.showDialog,onDropDownOpen:e.handleDropDownOpen},{dialog:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{message:t,needEmojiReact:e.isNeedEmojiReact,onForwardMessage:e.forwardMessage,onReferOrReplyMessage:e.referOrReplyMessage},null,8,["message","needEmojiReact","onForwardMessage","onReferOrReplyMessage"]),!e.env?.isH5&&e.isNeedEmojiReact?((0,o.openBlock)(),(0,o.createBlock)(I,{key:0,message:t,type:"dropdown"},null,8,["message"])):(0,o.createCommentVNode)("",!0)])),default:(0,o.withCtx)((()=>[t.type===e.types.MSG_TEXT?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,data:e.handleTextMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_IMAGE?((0,o.openBlock)(),(0,o.createBlock)(p,{key:1,data:e.handleImageMessageShowContext(t),isH5:e.env.isH5,onUploading:e.handleUploadingImageOrVideo,onPreviewImage:e.handleImagePreview},null,8,["data","isH5","onUploading","onPreviewImage"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_VIDEO?((0,o.openBlock)(),(0,o.createBlock)(h,{key:2,data:e.handleVideoMessageShowContext(t),isH5:e.env.isH5,onUploading:e.handleUploadingImageOrVideo},null,8,["data","isH5","onUploading"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_AUDIO?((0,o.openBlock)(),(0,o.createBlock)(m,{key:3,data:e.handleAudioMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_FILE?((0,o.openBlock)(),(0,o.createBlock)(g,{key:4,data:e.handleFileMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_FACE?((0,o.openBlock)(),(0,o.createBlock)(f,{key:5,data:e.handleFaceMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_LOCATION?((0,o.openBlock)(),(0,o.createBlock)(v,{key:6,data:e.handleLocationMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_CUSTOM?((0,o.openBlock)(),(0,o.createBlock)(y,{key:7,data:e.handleCustomMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0),t.type===e.types.MSG_MERGER?((0,o.openBlock)(),(0,o.createBlock)(k,{key:8,data:e.handleMergerMessageShowContext(t)},null,8,["data"])):(0,o.createCommentVNode)("",!0)])),_:2},1032,["isH5","data","messagesList","needGroupReceipt","needEmojiReact","onJumpID","onResendMessage","onShowReadReceiptDialog","onShowRepliesDialog","onDropDownOpen"]))],8,Me)))),128)),e.needToBottom?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:1,class:"to-bottom-tip",onClick:t[3]||(t[3]=t=>e.scrollToTarget("bottom"))},[Be,(0,o.createElementVNode)("div",xe,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.toBottomTipCont),1)])])):(0,o.createCommentVNode)("",!0)],512),e.forwardStatus&&e.messageComponents.Forward?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ve,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)("Forward"),{list:e.conversationData.list,message:e.currentMessage,show:e.forwardStatus,isH5:e.env.isH5,"onUpdate:show":t[5]||(t[5]=t=>e.forwardStatus=t)},{left:(0,o.withCtx)((({data:t})=>[(0,o.createElementVNode)("img",{class:"avatar",src:e.conversationData.handleAvatar(t)},null,8,Le),(0,o.createElementVNode)("label",Re,(0,o.toDisplayString)(e.conversationData.handleName(t)),1)])),right:(0,o.withCtx)((({data:t})=>[(0,o.createElementVNode)("img",{class:"avatar",src:e.conversationData.handleAvatar(t)},null,8,Ae),e.env.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("label",Pe,(0,o.toDisplayString)(e.conversationData.handleName(t)),1))])),_:1},40,["list","message","show","isH5"]))])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",Oe,[(0,o.createVNode)(C,{message:e.currentMessage,conversation:e.conversation,show:e.receiptDialogStatus,isH5:e.env.isH5,onCloseDialog:e.closeDialog,ref:"readReceiptDialog"},null,8,["message","conversation","show","isH5","onCloseDialog"])]),e.showImagePreview?((0,o.openBlock)(),(0,o.createBlock)(T,{key:1,currentImage:e.currentImagePreview,imageList:e.imageList,onClose:t[6]||(t[6]=t=>e.showImagePreview=!1)},null,8,["currentImage","imageList"])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["TUIChat-footer",[e.isMute&&"disabled",e.env.isH5&&"TUIChat-H5-footer"]])},[(0,o.createElementVNode)("div",Ge,[(0,o.createElementVNode)("main",He,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.pluginComponentList,((t,n)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(t),{key:n,isMute:e.isMute,isH5:e.env.isH5,conversation:e.conversation,parentID:"func",onSend:e.handleSend},null,40,["isMute","isH5","conversation","onSend"])))),128))])]),e.showGroupMemberList?((0,o.openBlock)(),(0,o.createElementBlock)("div",je,[(0,o.createElementVNode)("ul",ze,[e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("header",Fe,[$e,(0,o.createElementVNode)("span",{class:"close",onClick:t[7]||(t[7]=(...t)=>e.toggleshowGroupMemberList&&e.toggleshowGroupMemberList(...t))},"关闭")])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("li",{class:"memberList-box-header",onClick:t[8]||(t[8]=t=>e.selectAt("allMember",e.allMember))},[Ze,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.allMember[0].allText),1),(0,o.createElementVNode)("span",null,"("+(0,o.toDisplayString)(e.allMemberList.length)+")",1)]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.allMemberList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"memberList-box-body",key:n,onClick:n=>e.selectAt("oneMember",t)},[(0,o.createElementVNode)("img",{src:t.avatar,alt:""},null,8,Ke),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(t.nick?t.nick:t.userID),1)],8,Ye)))),128))],512)])):(0,o.createCommentVNode)("",!0),"reply"===e.reference?.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",We,[(0,o.createElementVNode)("div",qe,[Xe,(0,o.createElementVNode)("div",Je,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.reference.message.nick?e.reference.message.nick:e.reference.message.from)+(0,o.toDisplayString)(e.env.isH5?":":""),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.reference.content),1)]),(0,o.createElementVNode)("label",{class:"icon icon-cancel",onClick:t[9]||(t[9]=(...t)=>e.closeReferenceInEdit&&e.closeReferenceInEdit(...t))})])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",Qe,[(0,o.withDirectives)((0,o.createElementVNode)("textarea",{ref:"inputEle",id:"input-text-area",onPaste:t[10]||(t[10]=(...t)=>e.pasting&&e.pasting(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.text=t),placeholder:e.$t("TUIChat.请输入消息"),"data-type":"text",onInput:t[12]||(t[12]=(...t)=>e.inputChange&&e.inputChange(...t)),onKeyup:t[13]||(t[13]=(0,o.withKeys)(((...t)=>e.deleteAt&&e.deleteAt(...t)),["delete"])),onKeydown:t[14]||(t[14]=(0,o.withKeys)(((...t)=>e.sendMseeage&&e.sendMseeage(...t)),["enter"])),onKeypress:t[15]||(t[15]=(...t)=>e.geeks&&e.geeks(...t)),onBlur:t[16]||(t[16]=t=>e.inputBlur=!0),onFocus:t[17]||(t[17]=t=>e.inputBlur=!1),onCompositionstart:t[18]||(t[18]=t=>e.inputComposition=!0),onCompositionend:t[19]||(t[19]=(...t)=>e.compositionEnd&&e.compositionEnd(...t)),rows:"1"},null,40,et),[[o.vShow,!e.isMute],[o.vModelText,e.text]]),e.isMute?((0,o.openBlock)(),(0,o.createElementBlock)("p",tt,(0,o.toDisplayString)(e.$t(`TUIChat.${e.muteText}`)),1)):(0,o.createCommentVNode)("",!0),e.isMute?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,class:"input-btn","data-type":"text",disabled:!e.text,onClick:t[20]||(t[20]=(...t)=>e.sendMseeage&&e.sendMseeage(...t))},[(0,o.createElementVNode)("p",ot,(0,o.toDisplayString)(e.$t("TUIChat.按Enter发送，Ctrl+Enter换行")),1),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$t("发送")),1)],8,nt)),"reference"!==e.reference?.show||e.isMute?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",rt,[(0,o.createElementVNode)("div",st,[(0,o.createElementVNode)("div",at,[(0,o.createElementVNode)("span",it,(0,o.toDisplayString)(e.reference.message.nick?e.reference.message.nick:e.reference.message.from)+":",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.reference.content),1)]),(0,o.createElementVNode)("label",{class:"icon icon-cancel",onClick:t[21]||(t[21]=(...t)=>e.closeReferenceInEdit&&e.closeReferenceInEdit(...t))})])]))])],2),(0,o.withDirectives)((0,o.createElementVNode)("div",{class:"mask",onClick:t[24]||(t[24]=t=>e.showResend=!1)},[(0,o.createElementVNode)("div",lt,[(0,o.createElementVNode)("header",null,(0,o.toDisplayString)(e.$t("TUIChat.确认重发该消息？")),1),(0,o.createElementVNode)("footer",null,[(0,o.createElementVNode)("p",{onClick:t[22]||(t[22]=t=>e.showResend=!1)},(0,o.toDisplayString)(e.$t("TUIChat.取消")),1),ct,(0,o.createElementVNode)("p",{onClick:t[23]||(t[23]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("TUIChat.确定")),1)])])],512),[[o.vShow,e.showResend]])],2)):"system"===e.conversationType?((0,o.openBlock)(),(0,o.createElementBlock)("div",ut,[(0,o.createElementVNode)("header",dt,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.conversationName),1)]),(0,o.createVNode)(S,{data:e.messages,types:e.types,onApplication:e.handleApplication},null,8,["data","types","onApplication"])])):e.slotDefault?(0,o.renderSlot)(e.$slots,"default",{key:2},void 0,!0):(0,o.createCommentVNode)("",!0)}const ht={key:0,class:"text-box"},mt=["src"];function gt(e,t,n,r,s,a){return(0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.data.text,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:t},["text"===e.name?((0,o.openBlock)(),(0,o.createElementBlock)("span",ht,(0,o.toDisplayString)(e.text),1)):"img"===e.name?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:1,class:"text-img",src:e.src},null,8,mt)):(0,o.createCommentVNode)("",!0)],64)))),128)}var ft=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{}});return(0,o.watchEffect)((()=>{n.data=e.data})),{...(0,o.toRefs)(n)}}});const vt=(0,s.Z)(ft,[["render",gt],["__scopeId","data-v-5fd09d66"]]);var yt=vt,kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAfKADAAQAAAABAAAAfAAAAACOatThAAAXwUlEQVR4Ae2dC6xVVXrH9+HyVARFRwQJHcQBRIqJVXQqE67otCU8VKiMJnUeJo0DPqL2ZSaltcEhrdNmsCP4qBm000QdEPUCQQLBS51X6ZQoAzJIHSNluIwPUEDe3Nv/b93zHffZ99xzz7l3v85hr+Q7az/WWev7vv/6vvXYa6+d82on5G699dZesLt8+fJWRW1+1qdNmzaoT58+w3r16jWstbV1RFtb25d0HxomGpLL5c5XfLaor6ifiHBcdEL0mdJ/rHi/qEW0S+l3Ka89yqvl5MmTLWvXrj2o6/5Qlh9/wjQd59LETCe8OMUGQRb4A48fP36l/nO9wLpK8XDRUAF1oc77dJJXVZeV10nl9YH+9DvRXp3/UvHr/fr12yJ+DvsyK8mj735qDlMJ+MMPP9yrubkZOmWaamxs7D948OArZXGTZHlTBMR1oi/Y/UB8On9u8gXjQPKCtzCvYXFDMCHnAv5D0U/FyybxsvnTTz/dIl6PWVrx2lvUKjnwRKkKpoi0MNXBUmbOnDlKzN0umiHCos0d69AFwAUgZPGTu9nDH/L1E/kHKwHNwhbRatHzq1atek8xoYMs7ZeT/UWAxIPcc8Pll1/eZhYxa9asoWLqRtFtoq/Kkg1klA/AtOUGrg5jD1YJsGAqgNOjrB7w14teEG1oamqiKfDwWNu3b8+pGTDPw+VEQtKA56QMyCnwlltuOf/UqVPflia+JRot4jo8otgi5eo8LcFfCamIxvO7Ol7Wu3fvJ19++WU6hEWyJsV8UoAXCS+3PVLWAcjzZM1YN0oDYPgz0mHqA3wbOS8kubDyJyTXMrn73Toukj1uiWIHHPeGkIpb5cqHHDt27K90CtgATQBolBZsK7lXSwH3jX6dvIoBfln//v2/J9e+368HXY8txAm41WxnuTfddNNc1fpFokskrVk0yomTpzgUXSSbLP43ou+8+uqrP0ZugBeZV4icn1iUi1DWaZk+ffoEDWX+UZJNR2CRuW6zhMiFTqgA81xWqddoWPfQmjVrtgU7rVHyFzngCEPvVO30WarZuO+/llWfpRgFEOod6HYpP/8tyC19HNHlR6WP76l9P2K6+jxp+EdRAm7jUMAeJdZ/KGoUBWu6Lp1xIejZmqWBOxnD50E3HYWumEgA93dINKaeLa6XqhbTKfOPoUMXpgYzNOAbZO106uZr7L7Sr7+wZQq9JwyzotYBAwb0HT9+PJ2yfxXTPLSg1hYmKcIWpEbzw+Bo0jCEgaKvjRs37qzdu3f/5zPPPHMKXWrKlkoRWgjVwq0N0gTKhadPn/53gf3H4jSz6srg8lv7uoaGhq9rwuYD02llWXSdKrQOkzGmeKRmy1blwebhB2WEWrG6FqsmU5i1n0J36BBd0uFFt2FJFAoQBrba64lilvHlWBGWHRqjYQlcI/mY7naqbZ+rdn2r6bin/PfYwo0RufEvC+x1YigDu6eotBsKoI9Fp+g2LEvvkYXz3Jdn1mJoslxQkxg8T0TnrMcVSXlk4XNdHtBDmFlq039iOu+ucroNDJYN2JoiHS+wceOAbW12d/nJ/lesAfBBp+ehY3SNztF9cbLKz7oFOMMFXMycOXMu0fTgChU3TIRl96686CxlhRpAp+iWtXor0Dm6B4MK/1+UrGqXTkGiVs2eXaCc1ogmiayTUZR5dhKqBkzHm5XrdM3KfWRYVFNKtYCTvo12ZNCgQU3qUEzTuTFSTblZ2u5pwOlaPfe1Bw8enIV7VzYOk0qzq8otqO1w6c8555yFebApsNvtSaVMZukKGkDXjNOngQFXDZNCii4OKgaLjgJtx8033zxHBS5WvswMUQGq9RJdsJTd7kIDZtHXaep6+8qVK7eDzdtvv13RFGxFFk5bAdgafo1Rx+EHYsiAzsDuAp0IbqNzqBdYgEk1nbhKACNNm2rRAC1HYinuVFHWbksJCQfDYKOWTc0Q6EfFj8OqHF9dWris21UKveXxN8oIsLN2u5xG47vn2nMwyWPjGVblWChr4bhyUeuMGTOu0LKkn6vtHqDMaCvK/q9cgdm9UDXgsFCv/ajc+5dXr179lmHWWSnlgLN7bRpzr1IGvPlhbqSz/LLr8WvAMFmtsflMFV/ArRQrnbp0tdnca1Ov/HbFgG0LGErlk11LTgO4drCZkceK/lanuFptCLLLdf44RO3DZrny0ZyLOksf/H92Hq8GzLW/qzdbJ6kDx2vPDsMgGyVrgmbS3PhcYP9lHmzcRgZ2UHvpOQeb02AFZrBlGAZZ7AA4jT5Tdlo/fokS35H/QwZ2UHPpOzeM7gA7MATLIJsdLlgCPX/9M9WYETpnGNZpOksfdqxRgctSPPA+dtjZh54fPMIrISF+URjTriPAzjFS4ieoSc7plV8gpn+lP1/EuSiYrkRW4V1CYSdOnPDEuKfFfJ4mfDy1TQWFhldSODnBr1yppwkQT4s3PT279vr27ZsEv9aW7xN2v88TNUnoMDVJiyzX5/fvyoNN7y9WsAH46NGj3pgxY7xHHnnEW7x4sXf99dd7R44c8czqjfk0xPAEb1OnTvUee+wxb9GiRd7YsWOdDMgScwCr1jx2d1G2D1PHSoEj/P2zzz7LfPmFGsR/X3d53h2rdWMpKG/ixIneggULvFGjRnna5sObPHmyp201vK1btzorkkCO+aR/APvQoUOeVqJ4Dz74oON16NCh3qRJk7x33nnH27Nnj6eNhuJm0zAbrk0Wlr/22muH8v0yp7SChfOyH5xJmawlHyeKte02N37ZZZc5sIcMGeLco4F79913e6qMTsEJWA6qKQrwANjwBG8EeMWlwzsVFllompAtxuDacpU3Lo+lZ9jCQ8HC7fGaXOl3dX0MNxVi5RQl3n///c6yURznKMtAv+aaazw9+PfeeuutRC3dLFsTHd69995b4I/rELzrzRsPa3/jjTfaNRn/L9j12blz5/OGLSyYhTtgWS+la+ytQrB77WcR/wIqyjr33HNdSX6r4NjOk7b0Upbt5w/mjVdkQSarsBGr0J+9YXdjHlPHFj/uhk3FqXd5u5jrr+t01mINKJLOmmaJPPUhOigKJZri7rnnHg/rwtpRaFyBsiiTsuGBAE8GsJ2TDhlWrFiRVOcNVui89QdTTgxjXHpOJs/2Gw3acRB3PlIE4PFpUoWhODo4ckFOqbhvA9gU6o+vvvpq7/Dhw8694z4trbKKJAQt28+LFQgPEPcef/xxT7s3OtceNW9WfiB2GKrsfldcccVzLJLQ/VwDQOPjR48efZ0uLOCij3QYb2C8TW+cDhGgmkv0K9gUGFebDg/wE2yzjSc0ZEATL1myxHvllVe8gQMHRl4Ry6BjOI6QlW/QqGE3WPutmE3vOKd37tr0MplFdgtXqAV6nt6ycIqjIJRoIHOOok3ZUbfpQcsOls+5nz/AhndkQJYEAxjaSAtsXSgsftMQ4iExznCMkBjgFI4CcdP0xpO09O5atpZwJw02arSQkxzH1VS+iCd3wzK99XmO7v6LiL1XCIkCDgOAzlSlgR53mx60bPMoFhuP8Mk12mzceAosG9b8ASwv0OzfkwL9hANcJ9eK8fm6wc3EwTZuk7L0OrFs1GhYDlClXCfA33eAa7LlTt1sFNHoWCIdJh/itvQ6smwDz0Zc/6eOW7NZ+F/oLrNrdN39HTn7U6JxXJZeR5btx8swPSTAn2dYNljddmYReAOUCfbUAQ73UVt6HVo2aiMYpoc1Hn+x4dJLL/2iLtJ+DxIRUuXS21lq/43K0uvUsv2qA9NWzfGvbFCHbaJOeNxjQFvs/0NqjsO29Dq2bD9mYDpQHbeXAZwZtjkiBumuTVec6hCWpZ8Blg2OgO2wFeDrG9RD/1NdmCIyX6/D9IeeWrqBbc+zGUsTLOaYMiCupXicDatdBcN2G4DfJYEm5P+RancelKo7ls7MHZM5rEEDbJ56kQ8hCDbn3LO58ZTNoAXV0dV5TrK04NLpoX9RhNQ1Bbj4dYBUOyP3ySefuHVnLF4wkC22PAGaazVu2YhDcNhKno8A/EFdsK8R1BzgThqBU83cO0/hWHdmIFtseXFeR5aNWASwPQjgPBJlLp1Qk4DDOABVYumASfsNcRwEu84sG9VYANvTDdq99+90wCqXmgXbJAKsriydtKQjBMHmnHt10mY7GfM/DlvJ14qFA3jsa2n93IR5DGBm6ayI8btuKwdg/WBz3c5T9Dzb2A0tloxtAP4PyjGV06ndldRv6QcOHPB4tAqgXDdgLW+7RsyLBPr4jFfjvXETrUMs2dWQZeGM0gAW/pAkrhuXDno2qTJ79mzvvvvuK1h10LpJa9eIr732Wrcw8s0330x03Tt8RREk43EsnO9n102wuXHAnjdvnpMLd+0PnJe6Rhr+w3+ZoCGvOgsnmGm7V0IxLKvJiRc/IGbZ5WbQSI81m2Xb/zm3SkCbbzNydADtuqWtwdgmXvbj0r8hAWp64gUA/JY9f/78AqB+YA04VpNybPdKxVdddZX32WefxbbuPYZKxNDsPVw6+4EQiv1e+7Wa+MWyeSPEHoQ4YXyABs+ZLoUIfssOntsS6LjfcHGMhftj2O7Hpf+JhObhiTP7cMuJPrdKLdsseunSpW51qRb0uQ4a43Sz/Dq2dIet5PwFLp0FEFNEttgtepRCKqGSNtuAJgZsbUbrxtm84UJvnMmZSt5wqfE23WGrCr2SqdWLpf/ZtQZ4tZYdnEGjAgRn5LhGqENLN8D/DQtnp4c7RIxBasKtd8eyef0nOIMGwDb3XseWDqZg26qKvATA++kEC2cRY+oB76llS8aicAZYumG61wGu/VS0SvkUy5zsQzWpnW4Ny7KLENdJnVu69c3+V03YEl4mPC4rnym5eRHBbgZ1kvh52JYdFKiOLd0w/R81a8vc3KEA563RKXklpO65eFSWXQr0Om3TwfSFwqtG6qlTC74pSp07j9qyJXNRqENLB+w2td9/X3iZUO34x3or4c91g+98WyNfpIgkTuKy7KBsddSmOywF9kead3hIzXf768IcyMr/UILi2lMBeNyWXQr0OhinOyxlOOs14fQjZCzs8aIpVh6g2IfnEnXtSVl2KdBrvE13b47KkJ9Q+/1fwT1etkhg2nK+dUnNSCT4weapF0EuqTD7xTkuFyLYdCk7L7AhXtiBPMmbKVnKIvjL59zPHzzzEIepWGRJMKAg+24p2LrAsMwd6FXS32o8zqZ8I0XWlXf34vpBcey1yt6l/h0OuW4BZXNODAClZtAsbVgxZVVr6Txh27Ztm9tVOSw+qszHMPyZmqaFwrkNrN2wDFNnHy9t7DNMwk3NZ/y5lqssqTvJsQa2yb7hhhu8Bx54oGDRQbAN8ODceHfKrOY/lFtNm85TuJaWFm/Xrl1JbaWNeGzo87S80yYwFuCtDnCz8gkTJvxWiwPYdjn2NW4sSmCPcXYlZnNazv0u0YAmjsuygxWCsiuxdON9+PDh3saNG11T46+4wXwjOleRuWPa7HDejh07DhjG1si4BvGll176jQrfkGcAlxBbQCEoive+CCjXAsd2HnWbbWV2FlfSphuvyIJMCYBt2G3IY4o4TqEGOHtxOmuXVf04L6z9qTPZQ72OUrT1p/fcc8+5vdEZlqFcv8LMjQefeoXKSAWZwRM80H+AJ4JVWHiGd/Z3RxZkSgpww9Kwhc8C4NpM3dUAMbdO138tsh4e6SIPWAUuXe7HW7hwobd///7C9tkUjmLpKUfVG69WQL+l+0EHbHhHBmRJ4FMYGCrY/TqPpWfYIqOzag6am5vdh+DZQV9z6+xhTeeNShBr542VKHxJgDbn4osvdh25p59+2m1Uy96lWFdaApWUjhy9cTpoI0aM8N5//3332Q5tSu+dffbZSfBrmC3WWzSvNTY29uZLF6azIJicZx+5Me1UGOOya/IjN4DN9zH4Go6EeCIvb6F2VCh/j5OZe0eRuE6s3jpCPc48ggzgDR7hFZ4T5NdhBXZgCJYS1zXVJnahDbcLFmsS5j/0xz06j7Utt/INYBRox3YvjTE8wishoWbHtd1gBnad6ajQhlsCa8vXr1//sdryL+j6V5BB1GnlsP9mcaIacBgJ8CX6rPSKYNttnJUEUaA71yDX9M/K4F0lpmIUuQbLIItToQGwaQArMIMjwzDIXUnAlYgvCzPdul9juQX5P2WAB7WXnnOHDViBWX7cXRKvYC/dL4Ldyz4Y79dK+o7xxnjgnn0wXhnQY3egq0Pyt3IXR/MZl6w5upeF+DUAFrjyo2BE8XnMOsWoQ6fNzzMdOLr2mvjYpw4cD1QaRdSozpoC3cpCjBpwWAjwRRqGvQhWorIzU+a2y/FIGtr0AXp8uVrHU0XmRsr9L7sXrQYMg42a7ZuhthsP7LAqV2wlluqsnAz1eed5qk0tyjDrtZfTavT3zJW3gAnYYN0qtlNXbixVYuEubb7Xflrf7pqjGSV7osb/K87DCs3iHmkAUB2welAzVx/WecmwqSTXsm24PwM9zHBDNT2x2q72fIDufUXk2hB/uuw4cg2YK/+npqamH1QDNpxVa52kd0/V9Dy4ST1DW+VaccWJXB31XYADW83qWq2Zm6VONfugO0wqFbuSNtyfl2vPKUhgf103NosAG0ayEK0GzLI3o3swqLTd9rNVLeAe3X4K4mmMHu7z5dodIkAvOxzwF5odV60BdIuOd6BzexIGFtXmVK1LL+RvbYeWFI/X0yHWwfG6MS6Gp2tZCE8DptMWTZ3eqEUNb5vuu1NEtwGnMJ7I4Fq08H6yHsk16dJ5Impd1Z5D/8lCRw2YLg9o+DVLa+h+YjrvmLSyKz0CBrCpbTAihqaryH0i8sza9Mr0Xy4VOkSX+9AtOkbX6Lzcn7q61yMLt8zNxeijtRPVoWCMPlZknQxLlsWVa8B0t1M98rkafm01HVeeRemUPbJwy1IzPadhCMY0zfdHum69d2pjl7M/lk8WO12hMzpom9FlmGCjXzIOJdjEjMD/RMtiGaOz/5ttI4InCcWbhMJsOjPBMGize8uq18mNz9VLBHvDsmwTORQLt8ywdIZsam8+0AL8m8T4o7pnlSpr101RHWPTDY86H0V36BBdotOOybt/JRKrg1FYUtyqdp0twZbK4ocqhnnuRVKu8q21YFYN0L8T8/Plwlf69Re2QFEqPid35GrozJkzR4nxH4oaRbgtBD2TgTeg0T96aBbdqQmV9/Iu3HSky+EGc7fh5prPzdp1uaf9euCyXLX4pOga3WYzQISGoqx0yj51ATAJbqWK9PFdHd8tsD8Mu712pQR+IgWcsgAdF6WPzZwW8K/r89VNEvL3dIuhG8EUUO/AIyeERUNrNEN5m5YUL9dmDK1z587N6c1Y04VuRxPiVHJOwEOtas9zmpL9mkRapONRis3F1aObL5JNlf09yfsdTZG+qGNnDNIJaaDIQ+QW7pdAs0ROwE2bNuWeeuqpX2m7sB9pShZBGb7xGQ4qoN8SdFqzwXrXZtEfSJLHNbb+pjzdfwvsXpomdQYQp4RxWrhfLrN2V7PVqRspBXxLCeble/NcB3j4M9Jh6oOTR1wSO28lueh9PyG5lqmd3q3jItl1HmtICnATskh4PYQ5Xxb/bd0E/NEiFAePZvV4pKR5FgtFAR5tuAnIxvO7Ol6mCZQnZdEf67hIVp0nElKhPHqnvLRO+44WNHZnzH6j6DbRV2Ud9OoJfuXCe1L8wwcEv4VKKGs+rvP1ohdEGzSmxro9ydVL74vnwp5EIe9qQ1IK64xPG7ujSBTq5cfwLLSYIbpSZODr0AWsi7RWASxuv9uzXwPWYvIO9nsAmX3QWML9PGNpxYQOsrRfTvY3bYA7bWAR6uBBhUeB6uD0Hzx48JUaykzSQoApsvrrRLzdWipYh8nkC8bB/wAoIRgHwXWJZMkfin4qXjaJl83az2WLeD3mbuqHZ9YiVgY5j2XX0xCbItLAS2c8lLQUNQMDtesCFj9VwP+B4uGii0QXisJadUOFo3fNc/69KueXAvh1vaG5Re75sK5ZKMmj3UxTXAuAm76cUjmRsgsu325OmzZtkDpIw7VW+yJZ3giB8yXdg1h6dT4kqzxLcV+RNQu44xNKe0QxHSuoRbRLaXcJ3D1ag79PHcm9a9euPajr/lCWH3/CNB3/P+NRtA50ZFrNAAAAAElFTkSuQmCC",wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAfKADAAQAAAABAAAAfAAAAACOatThAAAYcklEQVR4Ae2dCZAUVbaGsxtEQFxABEH0CSq4L7jyXAaR0UAWYQwZNWYmxhkNR8ctDH3uuzI+cPcFuI7LPMNxHEVaEAlxXMIVDQxHkXHh4VNsEFkeKosI3e//TuUpqqqrqqu7q7qyyrwRpzLz3ps3zzn/PeeumVUTVE6oOemkk2ph98knn2zQoTGV9REjRmy12Wab9amtre3T0NDQr7GxcTelQ31EPWpqarbVcQtRJ9HmIsIPovWi1cq/XMcVosWiT5X/U5W1SGUt/vHHHxfPnDnzW8Wnhrz8pGaM0nlNlJjJwYspNhNkgd/thx9+GKx7jhZYB+nYV9RbQPXS9WY5ympRtMr6UWUt1U1fi+p1/a6OL22++eZzxc/3KYVl5TElPTKnkQT82muvrX355ZehDa6poUOHdt56660Hy+IOkeX9TEAcLtrO0zOOG8Nrly/zmJE96S3ca/ixQ2ZGrgX8N6LXxcsr4mXOqlWr5orXdZ5XvHYUNUgOPFGkgisiKkw1sZTRo0f3F3OniEaJsGh3xzq1ALgAhCypZIlt/KHcVKL8zEpAszBXNF30+LPPPrtQR0ITWRLR5f1FgLIHuecOe+21V6NbxJgxY3qLqeGik0U/lyU7yCgfgGnLHVydtnvwSoAFUwFMj7J6wH9B9FfR7Lq6OpqCAI81b968GjUD7nmILksoN+A1UgZkChw3bty2GzZs+IM0cZpoFxHx8Ihi05Sr66iE1EpIRXSeF+j8oY4dO94zdepUOoRpspaL+XIBnia83PZOsg5APkvWjHWjNACGPyedRj7At5N5IcmFlU+RXA/J3X+h8zTZ21uidgcc94aQOjbIlfdYt27dxboEbIAmADRKy2wrSaukgPtGvyavjgD/UOfOnSfJta9I1YPi2y20J+Bes81yTzjhhPGq9RNEAyStWzTKaU+e2kPRabLJ4v9HdPm0adP+htwAL3KvUHJ+2kW5COWdlpEjR+6toczNkmwkAovcdbsllFzoMj3APZdX6hka1l06Y8aMDzM7raXkr+SAIwy9U7XTXVWzcd//IavuqiMKIFQ70AkpN/0m5ZY+1ih6ovQxSe37GtfVpqzFPysl4D4OBez+Yv3PoqGizJquqJ9cyPRsL0sDv2MMH4LuOiq6YkoCeGqHRGPqX4jryarFdMpSx9BFF6YCC3TgO8ja6dSdrbH706n6K7ZMRe8Jw6yooUuXLp323HNPOmV3iWkWLai1yUmKYgtSoeVhcDRpGEI30S933333rl988cWrDzzwwAZ0qSlbKkXRQlEt3NsgTaD02rhx46MC+zhxGlt1YXClWvusDh06/EYTNktdp4UV0XyuonWYnDEdd9Js2bMh2Cx+8IyiVqzmxarIHG7tG9AdOkSXdHjRbbEkKgoQDrba633FLOPLQSIsu2iMFkvgCinHdfex2vbxatf/6TpuK/9ttnBnRG58iMCeJYZisNuKSsJQAH0QOkW3xbL0Nlk4676sWYuhI+SC6sRgdxGdszZXJJURh026XKlFmDFq019znbdWOa0GBssGbE2R7imwceOA7W12a/mJ70vXAPig0+7oGF2jc3Sfnq3wq1YBznABF3PiiScO0PTg3/W4PiIsu2Phj45zFqgBdIpu2av3d3SO7sGgwPvTsrXYpfMgUYNmz3qqpBmiQ0TeyUgrPL4oqgZcx3NU6kjNyi1zLFrylJYCTv5G2pGtttqqTh2KEbp2Rlry3Dhv6zRgulbPfea33347BveuYgyTQotrkVtQ22H5t9xyyxtCsHlgq9uTQpmM8yU1gK4Zp48AA2Idk2SOZk4KBouOAm3H2LFjT9QD71C5zAxRAVrqJZphKU5uRgNu0Ydr6nre008/PQ9sPvroo4KmYAuycNoKwNbwa6A6DneLIQc6BrsZdEqQjM6hWrAAk5Z04goBjDyNqkVdtB2JrbjDRHG7LSWUOTgG/9C2qVECfa34Mazy8dWshcu6rVLoLY9LVBBgx+12Po22X5q152ASYhM4VvlYyGvhuHJRw6hRo/bTtqQ31XZ3UWG0FXnvy/fAOK2oGjAs1GtfK/c+ZPr06e87Zrmekg84T2vUmPtZFcCbH+5GcpUXx7e/BhyT6Rqbj9bjk7hlYyWnS1ebTVqjeuWn6AjYvoEhWzlxXPk0gGsHm1EhVvS3cuLqtSGTXeK5sYfahzly5btwLcqVP/P++Lp9NeCufYHebD1EHTheezYMM9nIWhM0k2bjc4F9UQg2bqNiwVYbxxufgdq5JuRpmYqpsGuw2QhWYAbvjmGmHE0Ap9Fnyk77xwco86/DGyoWbPjXSlOgLVeB9tk1IdIggK/w4AL8GuzAECwzZcq5uqX111/JIvqhL1HOfJkFRu1atT7o1q1bcPbZZweHHnpoGrBY/GuvvRbcd999wdq1awPtIwvIX6EBcJl27Qd2Or8+mxxeKzyNa3rlPVXjP9DN23Mtyszn+SN91FAy+P7775lvDs4880wDM9WSsXpAvu222wK9ARJoftpcfqSFys+ct+VLhN0+rKgpu2Hqt6WZfIrfPzMEm95fRYKNgICLFW+/PfVWNTeH9Xbv3j2gclRBAKuGELszkScFUxMvKaW33Zqb7aUUXELVBCw5X8hVEfLdUwFpvwLLzLY8CTgv+yGEhGcv+e4i2u5kus4rNqS68WxCNJee7Z4Ix4EZ2O0eYhk4tvCcBJQVFyLkAsdzVEimJS7j3wrSgGHnWDq28O+gmnWzX0pxw0PBPC28jA8VpAHHbniIKawbxpbgU3Eaj54iN9BZiXTW4lDZGqDz1hlMEcMxBnD7upAiOsgFsEeNULGD0QT78a9jCKZgG7r1mlpHXpsbhigTRHCXkLiKfytRA47hkBBbs3KPRCA+esc1PTzz9zrGoXI1AIY+0gJbC7ZXjTNNPBydiIqtO9RDNRzMoB1b3LpF6K3PLdXAHxFKGFt3NUCdkMGwBFswJspd+gGK5PPShBjwhB6q4dcBB9sDEMgAF9jH6JzEeDiGVqor2HpIiHHSwr1RjwGvLrCRxjE1jBmWba1IPi5PiN15Qg/V9OuY9gXrWm2JYe3Qv3PqidUk8E9dFse0N1jThmPdfUKteOJPXUnVJL9jCsZ9HXCO8YRLNcG8SRYA9wmYvrXqvQ0M07wmbMoan1WLBgxbsI4BrxZI88uxCXDt9khs+Mp/Q5xaBRoAa9ruHqEssUuvAlBziODY9gBwPs4TucA+M3aSVsp+swrhtWetFMqXjgleCxJXZfwFZC3cB6tXr7a3QlBmlAP88SLD+vXro1pBDVuwRpP8F2dkAsrTf30GeikuOOCAAwJ9LcqUGUXQ3ftog0Gw2267BTvssENkeQ0B7sQrRJEBHFA1GxT07t07uPjii4M99tgj0LfDgzvvvDP44IMP7M2Q5vaYt1fNdS+koU5wxhlnBMcff3wA8I8++migNz7s9Sa8VMRCp8j4SsDGJW6zzTbBlVdeGeifCk1XO++8c6CXJIKDDz7YXhvi1aByB3j1infeeecF2hlqHok3WM4555xAX8wI9B01e42p3LxmPh/A+TvlsgasBTfOS3+XXXZZsOuuu5pC3Yr0J7PBVVddFRx55JEGejndO8+GV72wF1x44YXBsccea/0N55X0c889NzjuuOPKzmsWUNdHAnDcIgrDOvbdd18DG0smDgWS3rVrV6sMKJjOHPGkt2fgmXghfTUpuPTSS4Ojjz7aeHVeOBLg/fzzzw8GDx4ctTZ9PTNtq0OllWVrMkqi7Rs4cKC9zgsvrriQLwMW0PWH8MEFF1wQ6KvCBjrp7QU6PNG/cC902GGHmWVnNjHwg7unUuCRuA/eyxycgdVUSV4pLVtAGbjH5cuXG8FIts6OA4uC8QSnnnqqWQ/3e1qphOCZVEra6Kuvvjo46KCDkpad75lLliyxfKXmLx8PqWnS1TIA53sgBK8Fiat2+gWwTp06BSjnnnvuCdasWZP3xXyUxz2nnXZacPrpp5uLpYKUSqmADU+9evUKrrnmmmDvvffOatmuLnjhnldeeSXQZ7RMNvgtc3AGVuDSl5SZGVMgn+N44403guuuu856uACYy9I9bfz48WbtuFAosyloq1wAR3+B8TV8DRo0yHjK9Rz4Je3FF18MJk2aZJNGlBEBwE0VYM1M2yehYrwWtFVPrbofZfEFhrlz55rbXLp0qSkvG+g8wEFnCHTRRfYdG+s95wKjpUwBFF+P2FnDwuuvvz7o379/QWA/99xzwa233mqPo6mKCNiGLVhHBnA0hJXSKfrwww9tGLZo0SIDnfjMAOCAS4UYNmxYcMUVV9hYmF40YLUlONhY9A033BD069cvJ9gACsHLM888E9x11132fMrIVVnbwlsr790EuAqoFzElxKxbWa1czzfQsfSFCxca6AsWLDAF5lIeiqZCDBkyxDwDFYYOVmstHaC+++47a6uxbGb9eHau8gCbyvfEE08EU6ZMsTabMiJi2agUTMEWjOvptAH4YhGh7IDDBAAy7q6vrzcQsXgUngt0t6b999/f3G/Pnj1bDDqgOdgHHnigddB69OiRtF74Sg1u2dz3yCOPBA8++KB5GK5z8Zl6fzueO6ZgXF+rRQo6bfzRKcETE1dl/EVpgL5ixQoD8Z133jHQs7l32HRL1393WgerpQsZ3I9lM75m6MUULzwAYK5A2v333x889thj9v03riNk2c62Y/o1WPMy4SqlYOUET0xclfkXcFk1o/M0YcKEQB+oyevesVDuGTBgQHDjjTfaFC1Dqlzu2MUDKJ5x1FFHWV9giy22yGvZ3MdzaK+lPwObuAiCbWzxo1AP1om5wCCYm4hLvokSXpb/gJUxTmf+mt7vrFmzCnLvffr0Ca7Voss+++xj4+h8krCWfcwxxwSXXHKJgZfLsh1Qvtx4xx132KoYlYPgafmeU6a0NIytOys3SIP+W5Enlom37I9FmVgpxzfffNNA0f99JNvKTLfLtTcJrLKxps7ESbZ8xAEay5vMBfizMjmhPHhgevWWW24JZs+ebfcRH/FAm9QoOa/5+OOP/9cA14LFcrmoM5RAdcWt5264lFiugMJx22+//bYdWWjxkA1MwKPHD9jZgt+z3Xbb2Tw9eTwuNb9XApqHm2++OXj11Vcr5auNhqVkWqam8VL9Ec56A5wTWfm/SzC+zxZZwB0QJjTmzJlj06r0qD1kgsU1YPl9ni/zSB7yZt5PPtpqKhoduptuuil46623orq5IVMsrg1L8f+C/v3oL0TwMqGBLtf0EhEKkfZRgAMx3n788cet4+RfQ3ZwE2IkfnMBmZkn9drPKQ+PsnLlShspvPvuu5Vi2S6CYenYgnVqm03HjQyRmIBxjnMdAQN3PW3aNPs4LpMtgFusNpVyKI9VPBZN3nvvPatkWHyFBKzbJ1y8Ux7wB2fG/3777feVLGW4LnYSAXxqZbA8UfsBdDpayPDll1/asiXDOAertfxyP26ciR8WTT755JNKAxvRHcM3tDZ/g3TUiJ4Alb+6sO94SciZoZIi2WkLeUs7YHFYOt89Zyp02bJlBlZrLd3BZvMklv3ZZ59Zb7yCLNv1YxiCKR/zCZvuRu+0WSat9X4lgfns8mZ+VyUcsXR2mACSPiQb0JGjEniHq1AZHGxAxrK/+uqrSgUbkdUi1azTLqGz5s+fv9I9uQHuCiFBK0SH6XqgCJdQMZYO6LhzNlKwxMqQjblwQKQtbi442NKBrZB9/fXXyUmY5u6NYLphJ7mf1wre5FT+ku2099blAv4WZuCmigqAxiQK7TnumLaXtpj4fME9wfvvv2+WTUeNefzm7stXZpnTTGDH0rGFpyTg2gduA1bVilmK/5fIe3jkq5gAeLh3NlCwCMILDICeqw0GVJ/MYf591apV5ily5a8ARQA22P0rxJI9/oYtvCdduhYm7I/gn3/++e/k1rdR2jARGZv3h8oUpYB7Z/6dmbHXX3/ddqvsuOOOTdw7oAI2eSZOnGhLqtxXwZYNDI7ZHRqyPj906NCODz/8cHIsmQScnJ9//rnVBAE+X7XjN4ri631eAFkqJgA6M3LsgKEH37dv3+Q2JbdewGb/GX9yw+IM26CrAGx2MbHk/Xs1aWscUwcu6dLDiEatMNXybzi6aUoYl6wdflOlHAHPQcSCZ86cae4dFw/JmwW33367uXvPVymy5eDTsAI7MARL5TMj9vz4+qxBkzD/LQs4Q5bSTxloFzIrR9b7ohbpbTTHu+++24ZubHJgQ8XUqVOtB4+lV7hlo3ZruwX2IrDLhUPW9hm/rzZ9gz7IOkGAX6abqTlp7j9XgVGNlyKMNbYdeyWgJ07A/VdBMIwk55/q6uoudwwz5coKuDIRX5V/NosrB3xArgKrdjytnyW5WvdnsyHYTLeukIKuCkutCjMAZDptVQQ28Bg2YAVmPo0a4pZ2yGXhZPK0+A/j01QWuQtvbtv2h/ESix67gS73d6XcxVrF0Y5XhaVHDrbWMQQWHcAGjCgixCwnRnk7YkzG0LXXv+8u0dicBZWhImpURfbYxXe1BcNCgE/QMOwJsBLRW88Z3G3nzKAE8tCB66JNBtN1PkzkbkSncSiTBhyDf2gqeZTabjywYZWPn0Is1aycAjVzdZZqE28wxK49n1ZLn+aufDGYgA3WrcfmdOXOUiEWbnnp+angjWPHjj1RvVxfUeP+gsvwh8bHNmkAUA1YTRiN1/LnU45NIaXmbcNTC2CLDAVr9+M8teddlHakyNqQ1Hzxeck14K78PzXBcndLwIazllon+W1VTZv769Qz5K8rnQHKi0NpNWC6VrM6U58FG8NsqB5nmBT62ELa8NSyrD3nQQKb1bQ5IrwEjMShtBpww5qD7sGg0HY7la2WAh7Q7edBrMZo7fgUFTZfBOh5hwOpD43PW6wBdIuO56NzXwkDi5aW1FKXnizf2w59QmtPTVPOVgL/qYGLybkCl7w5PmmJBlynizV1OlybGj5y3bekEM/basApwFdkxo0bd4SW5OoU1V1ErWux59A9cWiqAdflSg2/xmg59zXXedOshcW0CRjaEWobjIihkXokOy0oM27TC9N/vlzoEF0uQbfoGF2HHbV89+VNa5OFe8nuYrR+vq86FIzRB4m8k+HZ4mPhGnDdfawe+XgNv/7pOi68iOw522ThXiQTMjAEY5rmO1bx3nun/Wl29sfLiY+mK3RGB20Ouiwm2OiXgosSfGJG4P+ftsUyRufl7dQXGoriTYrCbDQLwTBoszvKqmfJjY9/6qmn6otl2S5yUSzcC8PSGbKpvVmqXaAniPGJSvNKFbfrrqimR9cNS50T0R06RJfotGn21seUxOpgFJZ0bFC7/gudTpbF99YR5kkryXNVbqUFt2qA5ktaZ8uFP52qv2ILVErF18gdWQ0dPXp0fzH+Z9FQEW4LQX/KwDvQ6B89vCz6nSZUFoYu3HWk6OIGd7fFLTUszdt1uacVWnB5UrX4R9GhSt5chNBQKSudio9cAEyC7VSRPm7S+R8F9jfFbq/tKRk/JQWcZwE6Lkqfzdgo4F/S31vUSch/UxJDN4IroNqBR04Ii4ZmaIbyZH1i+0l9jKFBX4aumTx5sutCyaUJ7ankGgEPNag9r9GU7C8lEvve++voLq4a3XyabKrsCyXv5ZoifULnZgzSCXmgkoeSW3iqBJolMgH18fiae++99wO9w/0XTckiKMM33mOjAqZagi4rNnjv2i16qST5L42tfytP947ArtU0qRlAe0rYnhaeKpdbu9Vsdep2kgJOU4azwt488QAPf046jXwwecQlR/NWkove9xTJ9ZDa6S90nia7rts1lAtwFzJNeC3CbCuL/4MSAX8XEYqDR7d6PFK5eRYLaQEefbgJyM7zAp0/pAmUe2TRy3WeJquuyxIioTx6p7y0TvuOFjR2Z8w+XHSy6OeyDnr1hFTlwnu5+IcPCH6TlVDW/IOuXxD9VTRbY2qsO5Bctfr2TE2xJ1Eou6WhXArLxaeP3VEkCg3CMTwbLUaJBoscfJ1awLrI6xXAj4nUtv06sH6k7Mx+DyDzHTS2cD/OWFpHQhNZEtHl/Y0a4KYNLEIdPIiFBAvq4HTWPxQO1lDmEG0E+Jms/nDRdp6ecfQOk8uXeczInqhcigRYgh8zwbVEWfI3otfFyyviZY4+EzJXvK6zRP2wZi1iZ5B5LI+PwtEVEQVecvGQ1VLUDHTTl42x+GECng+u9hVtL+JLusXadUOFo3fNOn+9nvOuAH5JX4uaK/f8veI8ZOXRE6N0rATAXV+mVC6k7KTL98QRI0ZspQ5SX+3V3l6W10/g7KY0iK1X20Kyyq46dhJ5s4A7Xq+8a3SkYwUtFn2qvJ8K3EXag79EHcl6fT3iW8Wnhrz8pGaM0vn/A2RUSOTn2og3AAAAAElFTkSuQmCC";const It=e=>((0,o.pushScopeId)("data-v-7c708e28"),e=e(),(0,o.popScopeId)(),e),Et=["src","width","height"],bt={key:0,class:"progress"},Ct=["value"],Tt={key:0},St=["src"],_t={key:0,class:"dialog-box-h5-footer"},Nt=It((()=>(0,o.createElementVNode)("img",{src:kt},null,-1))),Dt=[Nt],Ut=It((()=>(0,o.createElementVNode)("img",{src:wt},null,-1))),Mt=[Ut];function Bt(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"message-image",onClick:t[6]||(t[6]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"])),ref:"skeleton"},[(0,o.createElementVNode)("img",{class:"message-img",src:e.data.url,width:e.data.width,height:e.data.height,style:(0,o.normalizeStyle)(e.isH5?{maxWidth:e.data.width?e.data.width+"px":"calc(100vw - 180px)",maxHeight:e.data.height?e.data.height+"px":"calc(100vw - 180px)"}:{})},null,12,Et),e.data.progress?((0,o.openBlock)(),(0,o.createElementBlock)("div",bt,[(0,o.createElementVNode)("progress",{value:e.data.progress,max:"1"},null,8,Ct)])):(0,o.createCommentVNode)("",!0),e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:1,class:"dialog",onClick:t[5]||(t[5]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"]))},[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("header",Tt,[(0,o.createElementVNode)("i",{class:"icon icon-close",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["stop"]))})])),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["dialog-box",[e.isH5?"dialog-box-h5":""]]),onClick:t[4]||(t[4]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"]))},[(0,o.createElementVNode)("img",{class:(0,o.normalizeClass)([e.isWidth?"isWidth":"isHeight"]),src:e.data.message.payload.imageInfoArray[0].url,onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"]))},null,10,St),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("div",_t,[(0,o.createElementVNode)("p",{onClick:t[2]||(t[2]=(...t)=>e.toggleShow&&e.toggleShow(...t))},Dt),(0,o.createElementVNode)("p",{onClick:t[3]||(t[3]=(0,o.withModifiers)((t=>e.downloadImage(e.data.message)),["stop"]))},Mt)])):(0,o.createCommentVNode)("",!0)],2)])):(0,o.createCommentVNode)("",!0)],512)}var xt=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},emits:["uploading","previewImage"],setup(e,t){const n=(0,o.reactive)({data:{progress:0},show:!1}),r=(0,o.ref)(),s=(0,o.computed)((()=>{const{width:e=0,height:t=0}=n.data?.message?.payload?.imageInfoArray[0];return e>=t}));(0,o.watchEffect)((()=>{n.data=e.data,n.data&&(0,o.nextTick)((()=>{if(n.data.progress)t.emit("uploading");else{const{width:t=0,height:o=0}=n.data;if(0===t||0===o)return;const s=document.getElementById("app")?.clientWidth||0,a=e.isH5?Math.min(s-180,300):300,i=be(t,o,a,a);r?.value?.style&&(r.value.style.width=`${i.width}px`),r?.value?.style&&(r.value.style.height=`${i.height}px`)}}))}));const a=()=>{n.data.progress||t.emit("previewImage",n.data.message)},i=e=>{const t=document.createElement("a"),n=e.payload.imageInfoArray[0].instanceID;t.setAttribute("download",n);const o=new Image;o.src=e.payload.imageInfoArray[0].url,o.setAttribute("crossOrigin","Anonymous"),o.onload=()=>{t.href=l(o),t.click()}},l=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n?.drawImage(e,0,0,e.width,e.height);const o=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase();return t.toDataURL(`image/${o}`,1)};return{...(0,o.toRefs)(n),toggleShow:a,skeleton:r,isWidth:s,downloadImage:i}}});const Vt=(0,s.Z)(xt,[["render",Bt],["__scopeId","data-v-7c708e28"]]);var Lt=Vt;const Rt={class:"message-video"},At=["src"],Pt=["src","poster"],Ot=["src","poster"],Gt={key:3,class:"progress"},Ht=["value"],jt=["src"];function zt(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Rt,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["message-video-box",[!e.data.progress&&"success"===e.data.message.status&&e.isH5&&"message-video-cover"]]),onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t)),ref:"skeleton"},[e.data.progress&&e.poster||e.isH5&&e.poster?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,class:(0,o.normalizeClass)(["message-img",[e.isWidth?"isWidth":"isHeight"]]),src:e.poster},null,10,At)):e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("video",{key:1,class:"message-img video-h5-uploading",src:e.data.url+"#t=0.1",poster:e.data.url,preload:"auto",muted:"",ref:"video"},null,8,Pt)):e.data.progress||e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("video",{key:2,class:"message-img video-web",src:e.data.url,controls:"",preload:"metadata",poster:e.poster,ref:"video"},null,8,Ot)),e.data.progress?((0,o.openBlock)(),(0,o.createElementBlock)("div",Gt,[(0,o.createElementVNode)("progress",{value:e.data.progress,max:"1"},null,8,Ht)])):(0,o.createCommentVNode)("",!0)],2),e.show&&e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"dialog-video",onClick:t[3]||(t[3]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"]))},[(0,o.createElementVNode)("header",null,[(0,o.createElementVNode)("i",{class:"icon icon-close",onClick:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["stop"]))})]),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["dialog-video-box",[e.isH5?"dialog-video-h5":""]]),onClick:t[2]||(t[2]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["self"]))},[(0,o.createElementVNode)("video",{class:(0,o.normalizeClass)([e.isWidth?"isWidth":"isHeight"]),src:e.data.url,controls:"",autoplay:""},null,10,jt)],2)])):(0,o.createCommentVNode)("",!0)])}var Ft=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e,t){const n=(0,o.reactive)({data:{},show:!1,poster:"",posterWidth:0,posterHeight:0}),r=(0,o.ref)(),s=(0,o.ref)(),a=(0,o.computed)((()=>{const{snapshotWidth:e=0,snapshotHeight:t=0}=n.data?.message?.payload;return e>=t})),i="https://web.sdk.qcloud.com/im/assets/images/transparent.png",l=()=>{n.data.progress||(n.show=!n.show)},c=e=>new Promise((function(t,o){let r="",s=document.createElement("video");s.setAttribute("crossOrigin","anonymous"),s.setAttribute("src",e),s.setAttribute("preload","auto"),s.addEventListener("loadeddata",(function(){let e=document.createElement("canvas"),o=s.videoWidth,a=s.videoHeight;e.width=o,e.height=a,e.getContext("2d").drawImage(s,0,0,o,a),r=e.toDataURL("image/jpeg"),n.posterWidth=o,n.posterHeight=a,t(r)}),{once:!0})})),u=async e=>e?e.progress?await c(e.url):e.snapshotUrl!==i&&e.snapshotUrl||e?.message?.payload?.snapshotUrl!==i&&e?.message?.payload?.snapshotUrl||e?.message?.payload?.thumbUrl!==i&&e?.message?.payload?.thumbUrl||await c(e.url):"";return(0,o.watchEffect)((async()=>{n.data=e.data,n.data&&(n.poster=await u(n.data),await(0,o.nextTick)((async()=>{const o=document.getElementById("messageEle")?.clientWidth||0,a=e.isH5?Math.min(o-172,300):300;let l;if(n.data.progress)t.emit("uploading");else{let{snapshotWidth:t=0,snapshotHeight:o=0,snapshotUrl:c}=n.data;if(0===t||0===o)return;c===i&&(t=n.posterWidth,o=n.posterHeight),l=be(t,o,a,a),r?.value?.style&&(r.value.style.width=`${l.width}px`),r?.value?.style&&(r.value.style.height=`${l.height}px`),e.isH5||(s?.value?.style&&(s.value.style.width=`${l.width}px`),s?.value?.style&&(s.value.style.height=`${l.height}px`))}})))})),(0,o.watch)((()=>n.data?.progress),((e,n)=>{!e&&n&&t.emit("uploading")})),{...(0,o.toRefs)(n),toggleShow:l,isWidth:a,getVideoBase64:c,handlePosterUrl:u,skeleton:r,video:s}}});const $t=(0,s.Z)(Ft,[["render",zt],["__scopeId","data-v-6fb3c458"]]);var Zt=$t;const Yt=["src"];function Kt(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["message-audio",["out"===e.data.message.flow&&"reserve"]]),onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.play&&e.play(...t)),["stop"])),style:(0,o.normalizeStyle)(`width: ${10*e.data?.second+40}px`)},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon icon-voice",["out"===e.data.message.flow&&"icon-reserve"]])},null,2),(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.data.second)+"s",1),(0,o.createElementVNode)("audio",{ref:"audio",src:e.data.url},null,8,Yt)],6)}var Wt=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{},show:!1}),r=(0,o.ref)(null);(0,o.watch)((()=>e.data),(()=>{n.data=e.data}),{deep:!0,immediate:!0});const s=()=>{const e=document.getElementsByTagName("audio");for(const n of e)n.paused||(n.pause(),n.load());const t=r.value;t.paused?(t.play(),n.show=!0):(t.pause(),t.load(),n.show=!1)};return{...(0,o.toRefs)(n),audio:r,play:s}}});const qt=(0,s.Z)(Wt,[["render",Kt],["__scopeId","data-v-6cf28738"]]);var Xt=qt;const Jt=e=>((0,o.pushScopeId)("data-v-5b1e1f47"),e=e(),(0,o.popScopeId)(),e),Qt={class:"message-file"},en=["title"],tn=Jt((()=>(0,o.createElementVNode)("i",{class:"icon icon-files"},null,-1))),nn={class:"message-file-content"},on=["value"];function rn(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Qt,[(0,o.createElementVNode)("div",{class:"box",onClick:t[0]||(t[0]=(...t)=>e.download&&e.download(...t)),title:e.$t("TUIChat.单击下载")},[tn,(0,o.createElementVNode)("div",nn,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.data.name),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.data.size),1)])],8,en),e.data.progress?((0,o.openBlock)(),(0,o.createElementBlock)("progress",{key:0,value:e.data.progress,max:"1"},null,8,on)):(0,o.createCommentVNode)("",!0)])}var sn=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{}});(0,o.watchEffect)((()=>{n.data=e.data}));const r=()=>{const e=n.data,t={mode:"cors",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"})};if(window.fetch)fetch(e.url,t).then((e=>e.blob())).then((t=>{const n=document.createElement("a"),o=window.URL.createObjectURL(t);n.href=o,n.download=e.name,n.click()}));else{const t=document.createElement("a");t.href=e.url,t.target="_blank",t.download=e.name,t.click()}};return{...(0,o.toRefs)(n),download:r}}});const an=(0,s.Z)(sn,[["render",rn],["__scopeId","data-v-5b1e1f47"]]);var ln=an;const cn={class:"message-image",ref:"skeleton"},un=["src"];function dn(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",cn,[(0,o.createElementVNode)("img",{class:"message-img",src:e.data.url},null,8,un)],512)}var pn=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{}}),r=(0,o.ref)();return(0,o.watchEffect)((()=>{n.data=e.data,n.data&&(0,o.nextTick)((()=>{const t=document.getElementById("messageEle")?.clientWidth||0,n=e.isH5?Math.min(t-172,300):300,o=be(240,240,n,n);r?.value?.style&&(r.value.style.width=`${o.width}px`),r?.value?.style&&(r.value.style.height=`${o.height}px`)}))})),{...(0,o.toRefs)(n),skeleton:r}}});const hn=(0,s.Z)(pn,[["render",dn],["__scopeId","data-v-17431992"]]);var mn=hn;const gn=["href"],fn={class:"el-icon-location-outline"},vn=["src"];function yn(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("a",{class:"message-location",href:e.data.href,target:"_blank",title:"点击查看详情"},[(0,o.createElementVNode)("span",fn,(0,o.toDisplayString)(e.data.description),1),(0,o.createElementVNode)("img",{src:e.data.url},null,8,vn)],8,gn)}var kn=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{}});return(0,o.watchEffect)((()=>{n.data=e.data})),{...(0,o.toRefs)(n)}}});const wn=(0,s.Z)(kn,[["render",yn],["__scopeId","data-v-635adde7"]]);var In=wn;const En=e=>((0,o.pushScopeId)("data-v-235bdc1e"),e=e(),(0,o.popScopeId)(),e),bn={class:"message-merger"},Cn=["data-value"],Tn={class:"merger-title"},Sn=En((()=>(0,o.createElementVNode)("span",{class:"merger-label"}," 聊天记录",-1)));function _n(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",bn,[(0,o.createElementVNode)("div",{class:"merger-box","data-value":e.data.message},[(0,o.createElementVNode)("p",Tn,(0,o.toDisplayString)(e.data.title),1),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.data.abstractList,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{class:"merger-text",key:t},(0,o.toDisplayString)(e),1)))),128))],8,Cn),Sn])}var Nn=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({data:{}});return(0,o.watchEffect)((()=>{n.data=e.data})),{...(0,o.toRefs)(n)}}});const Dn=(0,s.Z)(Nn,[["render",_n],["__scopeId","data-v-235bdc1e"]]);var Un=Dn;const Mn=e=>((0,o.pushScopeId)("data-v-03269e72"),e=e(),(0,o.popScopeId)(),e),Bn={class:"custom"},xn={key:0},Vn=["href"],Ln={key:0},Rn=["href"],An={key:1},Pn={key:1,class:"evaluate"},On=Mn((()=>(0,o.createElementVNode)("i",{class:"icon icon-star-light"},null,-1))),Gn=[On],Hn=["src"],jn={key:3,class:"textLink"},zn=["href"],Fn=["innerHTML"];function $n(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Bn,[e.isCustom===e.constant.typeService?((0,o.openBlock)(),(0,o.createElementBlock)("div",xn,[(0,o.createElementVNode)("h1",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.extension.title),1),e.extension.hyperlinks_text?((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:0,href:e.extension.hyperlinks_text.value,target:"view_window"},(0,o.toDisplayString)(e.extension.hyperlinks_text.key),9,Vn)):(0,o.createCommentVNode)("",!0)]),e.extension.item&&e.extension.item.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("ul",Ln,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.extension.item,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:n},[e.isUrl(t.value)?((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:0,href:t.value,target:"view_window"},(0,o.toDisplayString)(t.key),9,Rn)):((0,o.openBlock)(),(0,o.createElementBlock)("p",An,(0,o.toDisplayString)(t.key),1))])))),128))])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("article",null,(0,o.toDisplayString)(e.extension.description),1)])):e.isCustom.businessID===e.constant.typeEvaluate?((0,o.openBlock)(),(0,o.createElementBlock)("div",Pn,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("message.custom.对本次服务评价")),1),(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(~~e.isCustom.score,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"evaluate-list-item",key:t},Gn)))),128))]),(0,o.createElementVNode)("article",null,(0,o.toDisplayString)(e.isCustom.comment),1)])):e.isCustom.businessID===e.constant.typeOrder?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:2,class:"order",onClick:t[0]||(t[0]=t=>e.openLink(e.isCustom.link))},[(0,o.createElementVNode)("img",{src:e.isCustom.imageUrl,alt:""},null,8,Hn),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.isCustom.title),1),(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.isCustom.description),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.isCustom.price),1)])])):e.isCustom.businessID===e.constant.typeTextLink?((0,o.openBlock)(),(0,o.createElementBlock)("div",jn,[(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.isCustom.text),1),(0,o.createElementVNode)("a",{href:e.isCustom.link,target:"view_window"},(0,o.toDisplayString)(e.$t("message.custom.查看详情>>")),9,zn)])):e.isCustom.businessID===e.constant.TYPE_CALL_MESSAGE?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:4,class:(0,o.normalizeClass)(["call",`call-${e.data?.message?.conversationType}`]),onClick:t[1]||(t[1]=(...t)=>e.handleCallAgain&&e.handleCallAgain(...t))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon",e.handleCallMessageIcon()])},null,2),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.data.custom),1)],2)):((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:5,innerHTML:e.data.custom},null,8,Fn))])}class Zn{constructor(e){(0,R.Z)(this,"aegis",void 0),(0,R.Z)(this,"options",{}),(0,R.Z)(this,"aegisOptions",[]),e?this.aegis=e:this.init((()=>{this.aegis=new window.Aegis({id:"iHWefAYqTgxNuvtAjr",uin:"",reportApiSpeed:!0,reportAssetSpeed:!0,spa:!0}),this.aegisOptions.length>0&&(this.aegisOptions.map((e=>(this.reportEvent(e),e))),this.aegisOptions=[])}))}install(e){e.config.globalProperties.$TUIAegis=Zn.getInstance()}static getInstance(){return Zn.instance||(Zn.instance=new Zn(window.$Aegis)),Zn.instance}setAegisOptions(e){this.options=e}reportEvent(e){this.aegis?this.aegis.reportEvent({...e,...this.options}):this.aegisOptions=[...this.aegisOptions,e]}init(e){if(!Zn.instance){const t=document.createElement("script");t.type="text/javascript",t.src="https://tam.cdn-go.cn/aegis-sdk/latest/aegis.min.js",document.getElementsByTagName("head")[0].appendChild(t),t.onload=e}}}(0,R.Z)(Zn,"instance",void 0);var Yn=Zn,Kn=n(9954),Wn=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=Kn.oR&&(0,Kn.oR)(),r=(0,o.reactive)({data:{},extension:{},isCustom:"",constant:q});(0,o.watchEffect)((()=>{r.data=e.data;const{message:{payload:t}}=e.data;r.isCustom=t.data||" ",r.isCustom=ke(t.data),t.data===q.typeService&&(r.extension=ke(t.extension))}));const s=e=>{window.open(e)},a=()=>{const e=JSON.parse(JSON.parse(r?.data?.message?.payload?.data)?.data)?.call_type;let t="";switch(e){case 1:t="icon-call-voice";break;case 2:t="icon-call-video";break;default:break}return t},i=async()=>{const t=JSON.parse(JSON.parse(e?.data?.message?.payload?.data)?.data)?.call_type;switch(Yn.getInstance().reportEvent({name:"callOptions",ext1:"clickCall"}),r?.data?.message?.conversationType){case window.TUIKitTUICore.TIM.TYPES.CONV_C2C:const{flow:e,to:s,from:a}=r?.data?.message;if(s===a)break;try{await(window?.TUIKitTUICore?.TUIServer?.TUICallKit?.call({userID:"out"===e?s:a,type:t})),window?.TUIKitTUICore?.isOfficial&&n?.commit("handleTask",6)}catch(o){console.warn(o)}window?.TUIKitTUICore?.TUIServer?.TUICallKit&&(Yn.getInstance().reportEvent({name:"callOptions",ext1:"clickCall-success"}),Yn.getInstance().reportEvent({name:"callOptions",ext1:"call-c2c"}));break;case window.TUIKitTUICore.TIM.TYPES.CONV_GROUP:break;default:break}};return{...(0,o.toRefs)(r),isUrl:fe,openLink:s,handleCallMessageIcon:a,handleCallAgain:i}}});const qn=(0,s.Z)(Wn,[["render",$n],["__scopeId","data-v-03269e72"]]);var Xn=qn;const Jn={class:"message-tip"};function Qn(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Jn,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.message?.text),1)])}var eo=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({message:{}});return(0,o.watchEffect)((()=>{n.message=e.data})),{...(0,o.toRefs)(n)}}});const to=(0,s.Z)(eo,[["render",Qn],["__scopeId","data-v-3415dc48"]]);var no=to;const oo=e=>((0,o.pushScopeId)("data-v-1ea69b6b"),e=e(),(0,o.popScopeId)(),e),ro=["src"],so={class:"message-area"},ao={key:0,class:"name"},io={key:1,ref:"dropdownRef",class:"dropdown-inner"},lo=oo((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-replies"},null,-1)));function co(e,t,n,r,s,a){const i=(0,o.resolveComponent)("MessageReference"),l=(0,o.resolveComponent)("MessageEmojiReact");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["message-bubble",["in"===e.message.flow?"":"reverse"]]),ref:"htmlRefHook"},[(0,o.createElementVNode)("img",{class:"avatar",src:e.message?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,ro),(0,o.createElementVNode)("main",so,["in"===e.message.flow&&"GROUP"===e.message.conversationType?((0,o.openBlock)(),(0,o.createElementBlock)("label",ao,(0,o.toDisplayString)(e.message.nameCard||e.message.nick||e.message.from),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(e.handleImageOrVideoBubbleStyle(e.message)),onContextmenu:t[2]||(t[2]=(0,o.withModifiers)(((...t)=>e.toggleDialog&&e.toggleDialog(...t)),["prevent","right"]))},[e.message?.cloudCustomData&&e.referenceMessage&&e.referenceMessage?.messageRootID?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["message-replie-area",["in"===e.message?.flow?"":"message-replies-area-reverse"]]),onClick:t[0]||(t[0]=t=>e.showRepliesDialog(e.message,!1))},[(0,o.createVNode)(i,{message:e.message,referenceMessage:e.referenceMessage,referenceForShow:e.referenceForShow,url:e.url,face:e.face,allMessageID:e.allMessageID,type:"reply"},null,8,["message","referenceMessage","referenceForShow","url","face","allMessageID"])],2)):(0,o.createCommentVNode)("",!0),(0,o.renderSlot)(e.$slots,"default",{},void 0,!0),e.dropdown?((0,o.openBlock)(),(0,o.createElementBlock)("div",io,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["dialog",["in"===e.message.flow?"":"dialog-right"]]),onClick:t[1]||(t[1]=t=>e.dropdown=!1)},[(0,o.renderSlot)(e.$slots,"dialog",{},void 0,!0)],2)],512)):(0,o.createCommentVNode)("",!0),e.needEmojiReact&&e.isEmojiReactionInMessage(e.message)?((0,o.openBlock)(),(0,o.createBlock)(l,{key:2,message:e.message,type:"content"},null,8,["message"])):(0,o.createCommentVNode)("",!0)],34)]),"fail"===e.message.status?((0,o.openBlock)(),(0,o.createElementBlock)("label",{key:0,class:"message-label fail",onClick:t[3]||(t[3]=t=>e.resendMessage(e.message))},"!")):(0,o.createCommentVNode)("",!0),e.showReadReceiptTag(e.message)?((0,o.openBlock)(),(0,o.createElementBlock)("label",{key:1,class:(0,o.normalizeClass)(["message-label",e.readReceiptStyle(e.message)]),onClick:t[4]||(t[4]=t=>e.showReadReceiptDialog(e.message))},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.readReceiptCont(e.message)),1)],2)):(0,o.createCommentVNode)("",!0)],2),e.message?.cloudCustomData&&e.referenceMessage&&!e.referenceMessage?.messageRootID?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["message-reference-area",["in"===e.message.flow?"":"message-reference-area-reverse"]]),onClick:t[5]||(t[5]=t=>e.jumpToAim(e.referenceMessage))},[(0,o.createVNode)(i,{message:e.message,referenceMessage:e.referenceMessage,referenceForShow:e.referenceForShow,url:e.url,face:e.face,allMessageID:e.allMessageID,type:"reference"},null,8,["message","referenceMessage","referenceForShow","url","face","allMessageID"])],2)):(0,o.createCommentVNode)("",!0),e.replies?.length?((0,o.openBlock)(),(0,o.createElementBlock)("label",{key:1,class:(0,o.normalizeClass)(["message-replies",["in"===e.message.flow?"":"message-replies-reverse"]]),onClick:t[6]||(t[6]=t=>e.showRepliesDialog(e.message,!0))},[lo,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.replies?.length+e.$t("TUIChat.条回复")),1)],2)):(0,o.createCommentVNode)("",!0)],64)}var uo=n(6309);const po={key:0},ho={key:1};function mo(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:"fade",onBeforeLeave:e.onClose,onAfterLeave:t[0]||(t[0]=t=>e.$emit("destroy"))},{default:(0,o.withCtx)((()=>[(0,o.withDirectives)((0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["message",[e.handleStyle(e.type),e.isH5&&"message-h5"]]),style:(0,o.normalizeStyle)(e.customStyle)},[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("p",po,(0,o.toDisplayString)(e.message),1)),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",ho,(0,o.toDisplayString)(e.message),1)):(0,o.createCommentVNode)("",!0)],6),[[o.vShow,e.visible]])])),_:1},8,["onBeforeLeave"])}var go=n(7475),fo=(0,o.defineComponent)({name:"TUIMessage",props:{message:{type:String,default:""},duration:{type:Number,default:3e3},repeatNum:{type:Number,default:1},id:{type:String,default:""},onClose:{type:Function,required:!1},offset:{type:Number,default:20},zIndex:{type:Number,default:0},isH5:{type:Boolean,default:!1},type:{type:String,default:""}},setup(e){const t=(0,o.ref)(!1);let n;function r(){e.duration>0&&({stop:n}=(0,go.eM)((()=>{t.value&&a()}),e.duration))}function s(){n?.()}function a(){t.value=!1}(0,o.watch)((()=>e.repeatNum),(()=>{s(),r()}));const i=(0,o.computed)((()=>({top:`${e.offset}px`,zIndex:e.zIndex})));(0,o.onMounted)((()=>{r(),t.value=!0}));const l=e=>!e||"error"!==e&&"success"!==e&&"warning"!==e?"normal":e;return{visible:t,customStyle:i,handleStyle:l}}});const vo=(0,s.Z)(fo,[["render",mo],["__scopeId","data-v-0ec6daf8"]]);var yo=vo;const ko=[];let wo=1;const Io=document.body,Eo=function(e){const t=ko.find((t=>`${t.vm.props?.message??""}`===`${e.message??""}`));if(t)return t.vm.component.props.repeatNum+=1,{close:()=>i.component.proxy.visible=!1};let n=e.offset||20;ko.forEach((({vm:e})=>{n+=(e.el?.offsetHeight||0)+20})),n+=20;const r=`message_${wo+=1}`,s=e.onClose,a={zIndex:20+wo,offset:n,id:r,...e,onClose:()=>{bo(r,s)}},i=(0,o.createVNode)(yo,a),l=document.createElement("div");return i.props.onDestroy=()=>{(0,o.render)(null,l)},(0,o.render)(i,l),ko.push({vm:i}),Io.appendChild(l.firstElementChild),{close:()=>i.component.proxy.visible=!1}};function bo(e,t){const n=ko.findIndex((({vm:t})=>e===t.component.props.id));if(-1===n)return;const{vm:o}=ko[n];if(!o)return;t?.(o);const r=o.el.offsetHeight;ko.splice(n,1);const s=ko.length;if(!(s<1))for(let a=n;a<s;a++){const e=Number.parseInt(ko[a].vm.el.style.top,10)-r-16;ko[a].vm.component.props.offset=e}}var Co=Eo;const To={80001:"您发送的消息可能包含违规内容，请停止发送此类内容",80002:"您发送的消息超过最大长度限制（>8KB）"};var So=To;function _o(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=6e4,o=60*n,r=24*o,s=7*r,a=(new Date).getTime(),i=a-e;let l="";if(i<0)return;const c=i/n,u=i/o,d=i/r,p=i/s;if(p>=1&&p<=4)l=` ${parseInt(`${p}`,10)} ${t("time.周")}${t("time.前")}`;else if(d>=1&&d<=6)l=` ${parseInt(`${d}`,10)} ${t("time.天")}${t("time.前")}`;else if(u>=1&&u<=23)l=` ${parseInt(`${u}`,10)} ${t("time.小时")}${t("time.前")}`;else if(c>=1&&c<=59)l=` ${parseInt(`${c}`,10)} ${t("time.分钟")}${t("time.前")}`;else if(i>=0&&i<=n)l=`${t("time.刚刚")}`;else{const t=new Date;t.setTime(e);const n=t.getFullYear(),o=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,r=t.getDate()<10?`0${t.getDate()}`:t.getDate();l=`${n}-${o}-${r}`}return l}function No(e){const{t:t}=window.TUIKitTUICore.config.i18n.useI18n(),n=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return`${e.payload.operatorID} ${t("message.tip.申请加入群组")}：${n}`;case 2:return`${t("message.tip.成功加入群组")}：${n}`;case 3:return`${t("message.tip.申请加入群组")}：${n} ${t("message.tip.被拒绝")}`;case 4:return`${t("message.tip.你被管理员")}${e.payload.operatorID} ${t("message.tip.踢出群组")}：${n}`;case 5:return`${t("message.tip.群")}：${n} ${t("message.tip.被")} ${e.payload.operatorID} ${t("message.tip.解散")}`;case 6:return`${e.payload.operatorID} ${t("message.tip.创建群")}：${n}`;case 7:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 8:return`${t("message.tip.你退出群组")}：${n}`;case 9:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.设置为群")}：${n} ${t("message.tip.的管理员")}`;case 10:return`${t("message.tip.你被")}${e.payload.operatorID} ${t("message.tip.撤销群")}：${n} ${t("message.tip.的管理员身份")}`;case 12:return`${e.payload.operatorID} ${t("message.tip.邀请你加群")}：${n}`;case 13:return`${e.payload.operatorID} ${t("message.tip.同意加群")}：${n}`;case 14:return`${e.payload.operatorID} ${t("message.tip.拒接加群")}：${n}`;case 255:return`${t("message.tip.自定义群系统通知")}: ${e.payload.userDefinedField}`}}function Do(e,t){Co(e?.type&&e?.message?{message:`${e.type} : ${e.message}`||e,isH5:!!t?.isH5,type:"error"}:{message:So[e.code]||e,isH5:!!t?.isH5,type:"error"})}function Uo(e,t){Co({message:e,isH5:!!t?.isH5,type:"success"})}function Mo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(-1===t.indexOf(e[n]))return!1;return!0}const Bo={key:0,class:"face-box"},xo={key:0,class:"text-box"},Vo=["src"],Lo={key:1},Ro=["src"],Ao={key:3,class:"message-video-cover"},Po=["src"],Oo=["src"],Go={key:5};function Ho(e,t,n,r,s,a){return e.referenceMessage?.messageID&&-1!==e.allMessageID.indexOf(e.referenceMessage.messageID)?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(`${e.type} ${"in"===e.message.flow&&e.type+"-reverse"}`)},[(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.referenceForShow.nick||e.referenceForShow.from)+(0,o.toDisplayString)("reference"===e.type?":":""),1),e.referenceMessage.messageType===e.constant.typeText?((0,o.openBlock)(),(0,o.createElementBlock)("div",Bo,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.face,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t},["text"===e.name?((0,o.openBlock)(),(0,o.createElementBlock)("span",xo,(0,o.toDisplayString)(e.text),1)):"img"===e.name?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:1,class:"text-img",src:e.src},null,8,Vo)):(0,o.createCommentVNode)("",!0)])))),128))])):(0,o.createCommentVNode)("",!0),e.referenceMessage.messageType===e.constant.typeCustom?((0,o.openBlock)(),(0,o.createElementBlock)("span",Lo,(0,o.toDisplayString)(e.referenceMessage.messageAbstract),1)):(0,o.createCommentVNode)("",!0),e.referenceMessage.messageType===e.constant.typeImage?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:2,class:"message-img",src:e.referenceForShow.payload.imageInfoArray[1].url},null,8,Ro)):(0,o.createCommentVNode)("",!0),e.referenceMessage.messageType===e.constant.typeVideo?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ao,[(0,o.createElementVNode)("img",{class:"message-videoimg",src:e.referenceForShow?.payload?.snapshotUrl||e.referenceForShow?.payload?.thumbUrl},null,8,Po)])):(0,o.createCommentVNode)("",!0),e.referenceMessage.messageType===e.constant.typeFace?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:4,class:"message-img",src:e.url},null,8,Oo)):(0,o.createCommentVNode)("",!0),e.referenceMessage.messageType===e.constant.typeFile||e.referenceMessage.messageType===e.constant.typeAudio?((0,o.openBlock)(),(0,o.createElementBlock)("span",Go,(0,o.toDisplayString)(e.referenceMessage?.messageAbstract),1)):(0,o.createCommentVNode)("",!0)],2)):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:1,class:(0,o.normalizeClass)(`${e.type} ${"in"===e.message.flow&&e.type+"-reverse"}`)},[(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.referenceMessage?.messageSender),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.referenceMessage?.messageAbstract),1)],2))}const jo=(0,o.defineComponent)({props:{message:{type:Object,default:{}},referenceMessage:{type:Object,default:()=>({})},referenceForShow:{type:Object,default:()=>({})},face:{type:Array,default:()=>[]},url:{type:String,default:""},allMessageID:{type:String,default:""},type:{type:String,deafault:""}},setup(e,t){const n=(0,o.reactive)({message:{},referenceMessage:{},referenceForShow:{},allMessageID:"",face:[],url:"",type:""});return(0,o.watchEffect)((()=>{n.message=e.message,n.referenceMessage=e.referenceMessage,n.referenceForShow=e.referenceForShow,n.face=e.face,n.url=e.url,n.allMessageID=e.allMessageID,n.type=e.type})),(0,o.watch)((()=>e.referenceForShow),(()=>{n.referenceForShow=e.referenceForShow}),{deep:!0}),{...(0,o.toRefs)(n),constant:q}}});var zo=jo;const Fo=(0,s.Z)(zo,[["render",Ho],["__scopeId","data-v-f346d012"]]);var $o=Fo;const Zo={class:"face-list collapse"},Yo={class:"face-list-collapse"},Ko=["onClick"],Wo=["src"],qo={class:"face-list face-list-expand"},Xo=["onClick"],Jo=["src"],Qo={key:1,class:"emoji-content"},er={class:"emoji-react",ref:"container"},tr=["onClick"],nr=["src"],or={class:"emoji-react-item-content"};function rr(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,["dropdown"===e.type?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["dialog-emoji",e.env?.isH5?"dialog-emoji-h5":""])},[(0,o.createElementVNode)("div",Zo,[(0,o.createElementVNode)("ul",Yo,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.emojiCollapseList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"face-list-item",key:n,onClick:(0,o.withModifiers)((n=>e.select(t)),["stop"])},[(0,o.createElementVNode)("img",{src:e.emojiUrl+e.emojiMap[t]},null,8,Wo)],8,Ko)))),128))]),(0,o.createElementVNode)("div",{class:"face-list-button",onClick:t[0]||(t[0]=(0,o.withModifiers)((t=>e.isCollapse=!e.isCollapse),["stop"]))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon",[e.isCollapse?"icon-expand":"icon-collapse"]])},null,2)])]),(0,o.withDirectives)((0,o.createElementVNode)("ul",qo,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.emojiExpandList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"face-list-item",key:n,onClick:(0,o.withModifiers)((n=>e.select(t)),["stop"])},[(0,o.createElementVNode)("img",{src:e.emojiUrl+e.emojiMap[t]},null,8,Jo)],8,Xo)))),128))],512),[[o.vShow,!e.isCollapse]])],2)):(0,o.createCommentVNode)("",!0),"content"===e.type?((0,o.openBlock)(),(0,o.createElementBlock)("div",Qo,[(0,o.createElementVNode)("ul",er,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.handleEmojiReact(e.message),((t,n)=>(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"emoji-react-item",key:n,onClick:(0,o.withModifiers)((t=>e.select(n)),["stop"])},[(0,o.createElementVNode)("img",{src:e.emojiUrl+e.emojiMap[n]},null,8,nr),(0,o.createElementVNode)("div",or,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.handleEmojiReactItem(t)),1)])],8,tr)),[[o.vShow,t&&t?.length]]))),128))],512)])):(0,o.createCommentVNode)("",!0)],64)}var sr=(0,o.defineComponent)({props:{message:{type:Object,default:()=>({})},emojiList:{type:Array,default:()=>[]},type:{type:String,default:""}},emits:["handleCollapse"],setup(e,t){const{TUIServer:n}=ri,r=(0,o.reactive)({message:{},emojiUrl:G,emojiMap:H,emojiName:j,isCollapse:!0,types:K.TYPES,env:n.TUICore.TUIEnv,type:e.type,emojiReacts:{},allMemberList:[]}),s=(0,o.ref)({}),a=(0,o.computed)((()=>r.emojiName.slice(0,6))),i=(0,o.computed)((()=>r.emojiName.slice(6))),l=e=>{n.emojiReact(r.message,e)},c=e=>{try{if(!e?.cloudCustomData)return;const t=ke(e?.cloudCustomData)?.messageReact?.reacts;if(!t)return;return r.emojiReacts=t,t}catch(t){console.warn(t)}},u=e=>{let t="";return e?.forEach(((e,n)=>{const o=r.allMemberList?.find((t=>t.userID===e));t=t+(o?o?.nick:e)+", "})),t.length&&(t=t.substring(0,t.lastIndexOf(","))),t},d=e=>{const t=n?.currentStore;switch(e?.conversationType){case K.TYPES.CONV_C2C:r.allMemberList=[{userID:t?.conversation?.userProfile?.userID,nick:t?.conversation?.userProfile?.nick},{userID:t?.selfInfo?.userID,nick:t?.selfInfo?.nick}];break;case K.TYPES.CONV_GROUP:r.allMemberList=t?.allMemberList?.memberList;break;default:break}};return(0,o.watch)((()=>e.message),((t,n)=>{r.message=e.message,t?.conversationID!==n?.conversationID&&d(t)}),{deep:!0,immediate:!0}),(0,o.watch)((()=>r.isCollapse),((e,n)=>{e!==n&&r?.env?.isH5&&t.emit("handleCollapse",e)})),{...(0,o.toRefs)(r),emojiCollapseList:a,emojiExpandList:i,select:l,handleEmojiReact:c,handleEmojiReactItem:u,container:s}}});const ar=(0,s.Z)(sr,[["render",rr],["__scopeId","data-v-1870fb78"]]);var ir=ar;const lr=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},messagesList:{type:Array,default:()=>[]},isH5:{type:Boolean,default:!1},needGroupReceipt:{type:Boolean,default:!1},needReplies:{type:Boolean,default:!0},flow:{type:String,default:""},needEmojiReact:{type:Boolean,default:!1}},emits:["jumpID","resendMessage","showReadReceiptDialog","showRepliesDialog","dropDownOpen"],components:{MessageReference:$o,MessageEmojiReact:ir},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),{TUIServer:r}=ri,s=(0,o.reactive)({env:(0,A.kK)(),message:{},messagesList:[],show:!1,type:{},referenceMessage:{},referenceForShow:{},allMessageID:"",needGroupReceipt:!1,needReplies:!0,replies:[],face:[],url:"",needEmojiReact:!1});(0,o.watchEffect)((()=>{if(s.type=q,s.messagesList=e.messagesList,s.needEmojiReact=e.needEmojiReact,s.message=Ie(s.messagesList?.find((t=>t?.ID===e.message?.ID))||e.data),s.needGroupReceipt=e.needGroupReceipt,s.needReplies=e.needReplies,s.message.cloudCustomData){const e=[],t=ke(s.message.cloudCustomData);s.replies=t?.messageReplies?.replies||[],s.referenceMessage=t.messageReply?t.messageReply:"";for(let n=0;n<s.messagesList.length;n++)e.push(s.messagesList[n].ID),s.allMessageID=JSON.stringify(e),s.messagesList[n].ID===s.referenceMessage?.messageID&&(s.referenceForShow=s.messagesList[n],s.referenceMessage.messageType===q.typeText&&(s.face=$(s.referenceForShow.payload)),s.referenceMessage.messageType===q.typeFace&&(s.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${s.referenceForShow.payload.data}@2x.png`))}else s.replies=[]}));const a=(0,o.ref)(null),i=(0,o.ref)(!1),l=(0,o.ref)(null),c=e=>{i.value=!i.value,i.value&&(t.emit("dropDownOpen",l),(0,o.nextTick)((()=>{const t=l?.value?.children[0],n=document.getElementsByClassName("dialog-item")[0],o=l?.value?.offsetParent,r=(0,uo.rBN)(o),a=document.getElementById("messageEle"),i=(0,uo.rBN)(a),c=i?.left?.value,u=i?.left?.value+a.clientWidth-t.clientWidth+76,d=i?.top?.value,p=i?.top?.value+a.clientHeight-t.clientHeight,{clientX:h,clientY:m}=e;if(s?.env?.isH5){r?.top?.value<=n?.clientHeight?t.style.bottom=`-${n?.clientHeight}px`:t.style.top="in"===s?.message?.flow?`-${n?.clientHeight-20}px`:`-${n?.clientHeight}px`;const e=r?.left?.value+r?.width?.value/2;e>n.clientWidth/2&&e<a?.clientWidth-n.clientWidth/2?t.style.left="calc(50% - 135px)":e<=n.clientWidth/2?t.style.left="-20px":t.style.left=`-${n.clientWidth/2+10}px`}else{switch(!0){case h>c&&h<u:t.style.left=`${Math.max(e.clientX-r?.left?.value-76,-40)}px`;break;case h<=c:t.style.left="20px";break;case h>=u:t.style.right=`${Math.max(r?.left?.value+o?.clientWidth-e.clientX-256,-10)}px`;break}switch(!0){case m>d&&m<p:t.style.top=e.clientY-r?.top?.value+"px",t.style.cssText=t.style.cssText.replace("align-items:end;","");break;case m<=d:t.style.top="0px",t.style.cssText=t.style.cssText.replace("align-items:end;","");break;case m>=p:t.style.bottom=r?.top?.value+o?.clientHeight-e.clientY+"px",t.style.cssText+="align-items:end;";break}}})))},u=o=>{if(s.referenceMessage?.messageID&&s.allMessageID.includes(s.referenceMessage?.messageID))t.emit("jumpID",s.referenceMessage.messageID);else{const t=n("TUIChat.无法定位到原消息");Do(t,e)}};(0,uo.i9H)(l,(()=>{i.value=!1}));const d=e=>{s?.env?.isH5&&c(e)};(0,uo.IDL)(a,d);const p=e=>{t.emit("resendMessage",e)},h=e=>!("out"!==e.flow||"success"!==e.status||!e.needReadReceipt),m=e=>e?.readReceiptInfo?.isPeerRead||void 0===e?.readReceiptInfo?.isPeerRead&&e?.isPeerRead||0===e?.readReceiptInfo?.unreadCount?"":"unRead",g=e=>{switch(e.conversationType){case r.TUICore.TIM.TYPES.CONV_C2C:return n(e?.readReceiptInfo?.isPeerRead||void 0===e?.readReceiptInfo?.isPeerRead&&e?.isPeerRead?"TUIChat.已读":"TUIChat.未读");case r.TUICore.TIM.TYPES.CONV_GROUP:return 0===e.readReceiptInfo.unreadCount?n("TUIChat.全部已读"):0===e.readReceiptInfo.readCount||void 0===e.readReceiptInfo.unreadCount&&void 0===e.readReceiptInfo.readCount?n("TUIChat.未读"):`${e.readReceiptInfo.readCount+n("TUIChat.人已读")}`;default:return""}},f=e=>{t.emit("showReadReceiptDialog",e,"receipt")},v=(o,r)=>{if(r)t.emit("showRepliesDialog",o,"replies");else if(s.referenceMessage?.messageRootID){const o=s.messagesList?.find((e=>e.ID===s.referenceMessage?.messageRootID));if(o)return void t.emit("showRepliesDialog",o,"replies");{const t=n("TUIChat.无法定位到原消息");Do(t,e)}}},y=e=>{const t=["content"];return e?(t.push(`content-${s.message.flow}`),s.message.type!==K.TYPES.MSG_IMAGE||k(e)||t.push("content-image"),s.message.type!==K.TYPES.MSG_VIDEO||k(e)||t.push("content-video"),t):t},k=e=>{try{if(!e?.cloudCustomData)return;const t=ke(e?.cloudCustomData)?.messageReact?.reacts;return!(!t||0===Object.keys(t).length)}catch(t){return console.warn(t),!1}};return{...(0,o.toRefs)(s),toggleDialog:c,htmlRefHook:a,jumpToAim:u,dropdown:i,dropdownRef:l,resendMessage:p,showReadReceiptTag:h,readReceiptStyle:m,readReceiptCont:g,showReadReceiptDialog:f,showRepliesDialog:v,handleImageOrVideoBubbleStyle:y,isEmojiReactionInMessage:k,TIM:K}}});var cr=lr;const ur=(0,s.Z)(cr,[["render",co],["__scopeId","data-v-1ea69b6b"]]);var dr=ur;const pr={class:"revoke"},hr={key:0},mr={key:1};function gr(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",pr,["in"===e.message.flow?((0,o.openBlock)(),(0,o.createElementBlock)("label",hr,(0,o.toDisplayString)(e.message.nick||e.message.from),1)):((0,o.openBlock)(),(0,o.createElementBlock)("label",mr,(0,o.toDisplayString)(e.$t("TUIChat.您")),1)),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.撤回了一条消息")),1),"out"===e.message.flow&&e.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:2,class:"edit",onClick:t[0]||(t[0]=(...t)=>e.edit&&e.edit(...t))},(0,o.toDisplayString)(e.$t("TUIChat.重新编辑")),1)):(0,o.createCommentVNode)("",!0)])}var fr=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({message:{},isEdit:!1});(0,o.watchEffect)((()=>{n.message=e.data,n.isEdit=e.isEdit}));const r=()=>{t.emit("edit",n.message)};return{...(0,o.toRefs)(n),edit:r}}});const vr=(0,s.Z)(fr,[["render",gr],["__scopeId","data-v-3276ba60"]]);var yr=vr;const kr=e=>((0,o.pushScopeId)("data-v-ebfdc9fc"),e=e(),(0,o.popScopeId)(),e),wr={class:"message-system"},Ir={class:"list"},Er=kr((()=>(0,o.createElementVNode)("i",{class:"icon icon-system"},null,-1))),br={key:0,class:"btn-box"},Cr=["onClick"],Tr=["onClick"];function Sr(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",wr,[(0,o.createElementVNode)("ul",Ir,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.messageList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:n},[t.type===e.types.MSG_GRP_TIP||t.type===e.types.MSG_GRP_SYS_NOTICE?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[Er,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.translateGroupSystemNotice(t)),1),1===t?.payload?.operationType?((0,o.openBlock)(),(0,o.createElementBlock)("div",br,[(0,o.createElementVNode)("button",{class:"btn btn-default",onClick:n=>e.handleApplication("Agree",t)},"接受",8,Cr),(0,o.createElementVNode)("button",{class:"btn btn-cancel",onClick:n=>e.handleApplication("Reject",t)},"拒绝",8,Tr)])):(0,o.createCommentVNode)("",!0)],64)):(0,o.createCommentVNode)("",!0)])))),128))])])}var _r=(0,o.defineComponent)({props:{data:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({messageList:[],types:{}});(0,o.watchEffect)((()=>{n.messageList=e.data,n.types=e.types}));const r=(e,n)=>{const o={handleAction:e,message:n};t.emit("application",o)};return{...(0,o.toRefs)(n),translateGroupSystemNotice:me,handleApplication:r}}});const Nr=(0,s.Z)(_r,[["render",Sr],["__scopeId","data-v-ebfdc9fc"]]);var Dr=Nr;const Ur=e=>((0,o.pushScopeId)("data-v-487e0181"),e=e(),(0,o.popScopeId)(),e),Mr=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-copy"},null,-1))),Br=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-copy"},null,-1))),xr=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-forward"},null,-1))),Vr=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-quote"},null,-1))),Lr=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-reply"},null,-1))),Rr=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-revoke"},null,-1))),Ar=Ur((()=>(0,o.createElementVNode)("i",{class:"icon icon-msg-del"},null,-1)));function Pr(e,t,n,r,s,a){const i=(0,o.resolveComponent)("MessageEmojiReact");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["dialog-item",e.env?.isH5?"dialog-item-h5":"dialog-item-web"])},[e.env?.isH5&&e.needEmojiReact?((0,o.openBlock)(),(0,o.createBlock)(i,{key:0,message:e.message,type:"dropdown",onHandleCollapse:e.handleCollapse},null,8,["message","onHandleCollapse"])):(0,o.createCommentVNode)("",!0),(0,o.withDirectives)((0,o.createElementVNode)("ul",{class:(0,o.normalizeClass)(["dialog-item-list",e.env?.isH5?"dialog-item-list-h5":"dialog-item-list-web"])},[e.message.type!==e.types.MSG_FILE&&e.message.type!==e.types.MSG_VIDEO&&e.message.type!==e.types.MSG_IMAGE||e.env.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,onClick:t[0]||(t[0]=t=>e.openMessage(e.message))},[Mr,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.打开")),1)])),e.message.type===e.types.MSG_TEXT?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:1,onClick:t[1]||(t[1]=t=>e.handleMseeage(e.message,e.constant.handleMessage.copy))},[Br,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.复制")),1)])):(0,o.createCommentVNode)("",!0),"success"===e.message.status?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:2,onClick:t[2]||(t[2]=t=>e.handleMseeage(e.message,e.constant.handleMessage.forward))},[xr,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.转发")),1)])):(0,o.createCommentVNode)("",!0),"success"===e.message.status?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:3,onClick:t[3]||(t[3]=t=>e.handleMseeage(e.message,"reference"))},[Vr,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.引用")),1)])):(0,o.createCommentVNode)("",!0),"success"===e.message.status?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:4,onClick:t[4]||(t[4]=t=>e.handleMseeage(e.message,"reply"))},[Lr,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.回复")),1)])):(0,o.createCommentVNode)("",!0),"out"===e.message.flow&&"success"===e.message.status&&e.message.type!==e.types.MSG_CUSTOM?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:5,onClick:t[5]||(t[5]=t=>e.handleMseeage(e.message,e.constant.handleMessage.revoke))},[Rr,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.撤回")),1)])):(0,o.createCommentVNode)("",!0),"success"===e.message.status?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:6,onClick:t[6]||(t[6]=t=>e.handleMseeage(e.message,e.constant.handleMessage.delete))},[Ar,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.删除")),1)])):(0,o.createCommentVNode)("",!0)],2),[[o.vShow,e.showToolList]])],2)}var Or=n(2819),Gr=(0,o.defineComponent)({props:{message:{type:Object,default:()=>({})},needEmojiReact:{type:Boolean,default:!1}},components:{MessageEmojiReact:ir},setup(e,t){const n=window?.TUIKitTUICore?.TUIServer?.TUIChat,r=Kn.oR&&(0,Kn.oR)(),s=(0,o.reactive)({message:{},show:!1,types:K.TYPES,env:n.TUICore.TUIEnv,showToolList:!0,needEmojiReact:!1});(0,o.watchEffect)((()=>{s.needEmojiReact=e.needEmojiReact})),(0,o.watch)((()=>e.message),(()=>{s.message=e.message}),{deep:!0,immediate:!0});const a=e=>{let t="";switch(e.type){case s.types.MSG_FILE:t=e.payload.fileUrl;break;case s.types.MSG_VIDEO:t=e.payload.remoteVideoUrl;break;case s.types.MSG_IMAGE:t=e.payload.imageInfoArray[0].url;break}window.open(t,"_blank")},i=async(e,o)=>{switch(o){case q.handleMessage.revoke:try{await n.revokeMessage(e),Yn.getInstance().reportEvent({name:"messageOptions",ext1:"messageRevoke"}),window?.TUIKitTUICore?.isOfficial&&r?.commit("handleTask",1)}catch(a){Do(a,s.env)}break;case q.handleMessage.copy:try{if(e?.type===s.types.MSG_TEXT&&e?.payload?.text){const{toClipboard:t}=(0,Or.Z)();await t(e?.payload?.text)}}catch(a){Do(a,s.env)}break;case q.handleMessage["delete"]:await n.deleteMessage([e]),Yn.getInstance().reportEvent({name:"messageOptions",ext1:"messageDelete"});break;case q.handleMessage.forward:Yn.getInstance().reportEvent({name:"messageOptions",ext1:"messageForward"}),t.emit("forwardMessage",e);break;case q.handleMessage.reference:t.emit("referOrReplyMessage",e,"reference");break;case q.handleMessage.reply:t.emit("referOrReplyMessage",e,"reply");break}},l=e=>{s?.env?.isH5&&(s.showToolList=e)};return{...(0,o.toRefs)(s),openMessage:a,handleMseeage:i,constant:q,handleCollapse:l}}});const Hr=(0,s.Z)(Gr,[["render",Pr],["__scopeId","data-v-487e0181"]]);var jr=Hr;const zr=e=>((0,o.pushScopeId)("data-v-32b36a5d"),e=e(),(0,o.popScopeId)(),e),Fr={class:"manage-header"},$r={class:"manage-header-left"},Zr={key:0,class:"main"},Yr={class:"userInfo space-top"},Kr=zr((()=>(0,o.createElementVNode)("i",{class:"icon icon-right"},null,-1))),Wr=["onClick"],qr=["src"],Xr={key:0},Jr={key:1},Qr=zr((()=>(0,o.createElementVNode)("i",{class:"icon icon-right end"},null,-1))),es=zr((()=>(0,o.createElementVNode)("i",{class:"icon icon-right"},null,-1))),ts={class:"groupID"},ns=["title"],os=["src"],rs={class:"footer space-top"},ss={key:4,class:"admin"},as={key:0,class:"admin-list"},is=["src"],ls={key:1,class:"admin-content space-top"},cs={key:2,class:"admin-list last"},us=["src"],ds={key:0,class:"delDialog-title"},ps={key:1,class:"delDialog-title"};function hs(e,t,n,r,s,a){const i=(0,o.resolveComponent)("ManageName"),l=(0,o.resolveComponent)("ManageMember"),c=(0,o.resolveComponent)("MemeberProfile"),u=(0,o.resolveComponent)("ManageNotification"),d=(0,o.resolveComponent)("Slider"),p=(0,o.resolveComponent)("Transfer"),h=(0,o.resolveComponent)("Mask"),m=(0,o.resolveComponent)("Dialog");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("i",{class:"icon icon-chat-setting",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["manage",[e.isH5?"manage-h5":""]]),ref:"dialog"},[(0,o.createElementVNode)("header",Fr,[e.isH5&&!e.currentTab?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("aside",$r,[e.currentTab?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[2]||(t[2]=t=>e.setTab(""))})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t(`TUIChat.manage.${e.TabName}`)),1)])]),(0,o.createElementVNode)("span",null,[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-close",onClick:t[3]||(t[3]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),e.currentTab?"member"===e.currentTab?((0,o.openBlock)(),(0,o.createBlock)(l,{key:1,self:e.conversation.groupProfile.selfInfo,list:e.userInfo.list,total:~~e.conversation.groupProfile.memberCount,isShowDel:"Owner"===e.conversation.groupProfile.selfInfo.role,onMore:t[14]||(t[14]=t=>e.getMember("more")),onDel:e.submit,onHandleMemberProfileShow:e.handleMemberProfileShow},null,8,["self","list","total","isShowDel","onDel","onHandleMemberProfileShow"])):"profile"===e.currentTab?((0,o.openBlock)(),(0,o.createBlock)(c,{key:2,userInfo:e.currentMember},null,8,["userInfo"])):"notification"===e.currentTab?((0,o.openBlock)(),(0,o.createBlock)(u,{key:3,isAuth:e.isAuth,data:e.conversation.groupProfile,onUpdate:e.updateProfile},null,8,["isAuth","data","onUpdate"])):"admin"===e.currentTab?((0,o.openBlock)(),(0,o.createElementBlock)("main",ss,[e.isAdmin?((0,o.openBlock)(),(0,o.createElementBlock)("div",as,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群管理员")),1),(0,o.createElementVNode)("ol",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.member.admin,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("dl",{key:t},[(0,o.createElementVNode)("dt",null,[(0,o.createElementVNode)("img",{class:"avatar",src:e?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,is)]),(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(e?.nick||e?.userID),1)])))),128)),(0,o.createElementVNode)("dl",null,[(0,o.createElementVNode)("dt",{class:"avatar",onClick:t[15]||(t[15]=t=>e.toggleMask("addAdmin"))},"+")]),(0,o.createElementVNode)("dl",null,[e.member.admin.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("dt",{key:0,class:"avatar",onClick:t[16]||(t[16]=t=>e.toggleMask("removeAdmin"))},"-")):(0,o.createCommentVNode)("",!0)])])])):(0,o.createCommentVNode)("",!0),e.isSetMuteTime?((0,o.openBlock)(),(0,o.createElementBlock)("div",ls,[(0,o.createElementVNode)("aside",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.全员禁言")),1),(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.全员禁言开启后，只允许群主和管理员发言。")),1)]),(0,o.createVNode)(d,{open:e.conversation.groupProfile.muteAllMembers,onChange:e.setAllMuteTime},null,8,["open","onChange"])])):(0,o.createCommentVNode)("",!0),e.isSetMuteTime?((0,o.openBlock)(),(0,o.createElementBlock)("div",cs,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.单独禁言人员")),1),(0,o.createElementVNode)("ol",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.member.muteMember,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("dl",{key:t},[(0,o.createElementVNode)("dt",null,[(0,o.createElementVNode)("img",{class:"avatar",src:e?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,us)]),(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(e?.nick||e?.userID),1)])))),128)),(0,o.createElementVNode)("dl",null,[(0,o.createElementVNode)("dt",{class:"avatar",onClick:t[17]||(t[17]=t=>e.toggleMask("addMute"))},"+")]),(0,o.createElementVNode)("dl",null,[e.member.muteMember.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("dt",{key:0,class:"avatar",onClick:t[18]||(t[18]=t=>e.toggleMask("removeMute"))},"-")):(0,o.createCommentVNode)("",!0)])])])):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("main",Zr,[(0,o.createVNode)(i,{class:"space-top",isAuth:e.isAuth,isH5:e.isH5,data:e.conversation.groupProfile,onUpdate:e.updateProfile},null,8,["isAuth","isH5","data","onUpdate"]),(0,o.createElementVNode)("div",Yr,[(0,o.createElementVNode)("header",{class:"userInfo-header",onClick:t[4]||(t[4]=t=>e.setTab("member"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群成员")),1),(0,o.createElementVNode)("p",null,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.conversation.groupProfile.memberCount)+(0,o.toDisplayString)(e.$t("TUIChat.manage.人")),1),Kr])]),(0,o.createElementVNode)("ol",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.userInfo?.list?.slice(0,e.showUserNum),((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("dl",{key:n},[(0,o.createElementVNode)("dt",{onClick:n=>e.handleMemberProfileShow(t)},[(0,o.createElementVNode)("img",{class:"avatar",src:t?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,qr)],8,Wr),(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(t?.nick||t?.userID),1)])))),128)),e.isShowAddMember?((0,o.openBlock)(),(0,o.createElementBlock)("dl",Xr,[(0,o.createElementVNode)("dt",{class:"avatar",onClick:t[5]||(t[5]=t=>e.toggleMask("add"))},"+")])):(0,o.createCommentVNode)("",!0),"Owner"===e.conversation.groupProfile.selfInfo.role?((0,o.openBlock)(),(0,o.createElementBlock)("dl",Jr,[(0,o.createElementVNode)("dt",{class:"avatar",onClick:t[6]||(t[6]=t=>e.toggleMask("remove"))},"-")])):(0,o.createCommentVNode)("",!0)])]),(0,o.createElementVNode)("ul",{class:"content space-top",onClick:t[10]||(t[10]=t=>e.editLableName="")},[(0,o.createElementVNode)("li",{onClick:t[7]||(t[7]=(0,o.withModifiers)((t=>e.setTab("notification")),["stop"]))},[(0,o.createElementVNode)("aside",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群公告")),1),(0,o.createElementVNode)("article",null,(0,o.toDisplayString)(e.conversation.groupProfile.notification),1)]),Qr]),e.isAdmin&&e.isSetMuteTime?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,onClick:t[8]||(t[8]=(0,o.withModifiers)((t=>e.setTab("admin")),["stop"]))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群管理")),1),es])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群ID")),1),(0,o.createElementVNode)("div",ts,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.conversation.groupProfile.groupID),1),(0,o.createElementVNode)("i",{class:"icon icon-msg-copy",onClick:t[9]||(t[9]=(...t)=>e.handleGroupIDCopy&&e.handleGroupIDCopy(...t)),title:e.$t("TUIChat.复制")},null,8,ns)])]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群头像")),1),(0,o.createElementVNode)("img",{class:"avatar",src:e.conversation?.groupProfile?.avatar||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,os)]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群类型")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t(`TUIChat.manage.${e.typeName[e.conversation.groupProfile.type]}`)),1)]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.加群方式")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t(`TUIChat.manage.${e.typeName[e.conversation.groupProfile.joinOption]}`)),1)])]),(0,o.createElementVNode)("ul",rs,["Owner"===e.conversation.groupProfile.selfInfo.role&&e.userInfo?.list.length>1?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,onClick:t[11]||(t[11]=(0,o.withModifiers)((t=>e.toggleMask("changeOwner")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIChat.manage.转让群组")),1)):(0,o.createCommentVNode)("",!0),e.isDismissGroupAuth?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:1,onClick:t[12]||(t[12]=(0,o.withModifiers)((t=>e.dismiss(e.conversation.groupProfile)),["stop"]))},(0,o.toDisplayString)(e.$t("TUIChat.manage.解散群聊")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:2,onClick:t[13]||(t[13]=(0,o.withModifiers)((t=>e.quit(e.conversation.groupProfile)),["stop"]))},(0,o.toDisplayString)(e.$t("TUIChat.manage.退出群组")),1))])])),(0,o.createVNode)(h,{show:e.mask,"onUpdate:show":t[19]||(t[19]=t=>e.mask=t)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{title:e.$t(`TUIChat.manage.${e.transferTitle}`),list:e.transferList,isSearch:e.isSearch,isRadio:e.isRadio,selectedList:e.selectedList,onSubmit:e.submit,onCancel:e.cancel,onSearch:e.handleSearchMember,isH5:e.isH5},null,8,["title","list","isSearch","isRadio","selectedList","onSubmit","onCancel","onSearch","isH5"])])),_:1},8,["show"]),(0,o.createVNode)(m,{title:e.$t("TUIChat.manage.删除成员"),show:e.delDialogShow,isH5:e.isH5,center:!0,isHeaderShow:!e.isH5,onSubmit:t[20]||(t[20]=t=>e.handleManage(e.userList,"remove")),"onUpdate:show":t[21]||(t[21]=t=>e.delDialogShow=t)},{default:(0,o.withCtx)((()=>[1===e.userList.length?((0,o.openBlock)(),(0,o.createElementBlock)("p",ds,(0,o.toDisplayString)(e.$t("TUIChat.manage.确定从群聊中删除该成员？")),1)):(0,o.createCommentVNode)("",!0),e.userList.length>1?((0,o.openBlock)(),(0,o.createElementBlock)("p",ps,(0,o.toDisplayString)(e.$t("TUIChat.manage.确定从群聊中删除所选成员？")),1)):(0,o.createCommentVNode)("",!0)])),_:1},8,["title","show","isH5","isHeaderShow"])],2)):(0,o.createCommentVNode)("",!0)])}function ms(e,t,n,r,s,a){return e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"mask",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.toggleView&&e.toggleView(...t)),["self"]))},[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])):(0,o.createCommentVNode)("",!0)}var gs=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({show:!1});(0,o.watchEffect)((()=>{n.show=e.show}));const r=()=>{n.show=!n.show,t.emit("update:show",n.show)};return{...(0,o.toRefs)(n),toggleView:r}}});const fs=(0,s.Z)(gs,[["render",ms],["__scopeId","data-v-0ea2c94f"]]);var vs=fs;const ys={key:0,class:"transfer-h5-header"},ks={class:"title"},ws={class:"main"},Is={class:"left"},Es={key:0},bs=["placeholder"],Cs={class:"list"},Ts={class:"all"},Ss=["onClick"],_s=["src"],Ns={class:"name"},Ds={key:0},Us={class:"right"},Ms={key:0},Bs={class:"list"},xs={key:0},Vs=["src"],Ls={key:0},Rs=["onClick"];function As(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["transfer",[e.isH5?"transfer-h5":""]])},[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("header",ys,[(0,o.createElementVNode)("i",{class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))}),(0,o.createElementVNode)("span",ks,(0,o.toDisplayString)(e.title),1)])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("main",ws,[(0,o.createElementVNode)("div",Is,[e.isSearch?((0,o.openBlock)(),(0,o.createElementBlock)("header",Es,[(0,o.createElementVNode)("input",{type:"text",onKeyup:t[1]||(t[1]=(0,o.withKeys)(((...t)=>e.handleInput&&e.handleInput(...t)),["enter"])),placeholder:e.$t("component.请输入userID"),enterkeyhint:"search"},null,40,bs)])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("ul",Cs,[e.optional.length>1&&!e.isRadio?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,class:"list-item",onClick:t[2]||(t[2]=(...t)=>e.selectedAll&&e.selectedAll(...t))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon",[e.selectedList.length===e.optional.length?"icon-selected":"icon-unselected"]])},null,2),(0,o.createElementVNode)("span",Ts,(0,o.toDisplayString)(e.$t("component.全选")),1)])):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.list,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"list-item",key:n,onClick:n=>e.selected(t)},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon",[t?.isDisabled&&"disabled",e.selectedList.indexOf(t)>-1?"icon-selected":"icon-unselected"]])},null,2),e.isCustomItem?(0,o.renderSlot)(e.$slots,"left",{key:1,data:t},void 0,!0):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)("img",{class:"avatar",src:t?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,_s),(0,o.createElementVNode)("span",Ns,(0,o.toDisplayString)(t?.nick||t?.userID),1),t?.isDisabled?((0,o.openBlock)(),(0,o.createElementBlock)("span",Ds,"（"+(0,o.toDisplayString)(e.$t("component.已在群聊中"))+"）",1)):(0,o.createCommentVNode)("",!0)],64))],8,Ss)))),128))])])]),(0,o.createElementVNode)("div",Us,[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("header",Ms,(0,o.toDisplayString)(e.title),1)),(0,o.withDirectives)((0,o.createElementVNode)("ul",Bs,[e.selectedList.length>0&&!e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("p",xs,(0,o.toDisplayString)(e.$t("component.已选中"))+(0,o.toDisplayString)(e.selectedList.length)+(0,o.toDisplayString)(e.$t("component.人")),1)):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.selectedList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"list-item space-between",key:n},[(0,o.createElementVNode)("aside",null,[e.isCustomItem?(0,o.renderSlot)(e.$slots,"right",{key:1,data:t},void 0,!0):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)("img",{class:"avatar",src:t?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Vs),e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("span",Ls,(0,o.toDisplayString)(t.nick||t.userID),1))],64))]),e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-cancel",onClick:n=>e.selected(t)},null,8,Rs))])))),128))],512),[[o.vShow,e.resultShow]]),(0,o.createElementVNode)("footer",null,[(0,o.createElementVNode)("button",{class:"btn btn-cancel",onClick:t[3]||(t[3]=(...t)=>e.cancel&&e.cancel(...t))},(0,o.toDisplayString)(e.$t("component.取消")),1),e.selectedList.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,class:"btn",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("component.完成")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,class:"btn btn-no",onClick:t[5]||(t[5]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("component.完成")),1))])])])],2)}var Ps=(0,o.defineComponent)({props:{list:{type:Array,default:()=>[]},selectedList:{type:Array,default:()=>[]},isSearch:{type:Boolean,default:()=>!0},isRadio:{type:Boolean,default:()=>!1},isCustomItem:{type:Boolean,default:()=>!1},title:{type:String,default:()=>""},type:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},resultShow:{type:Boolean,default:()=>!0}},setup(e,t){const n=(0,o.reactive)({type:"",list:[],selectedList:[],isSearch:!0,isCustomItem:!1,title:""});(0,o.watchEffect)((()=>{if(e.isCustomItem)for(let t=0;t<e.list.length;t++)e.list[t].conversationID.indexOf("@TIM#SYSTEM")>-1&&e.list.splice(t,1),n.list=e.list;else n.list=e.list;n.selectedList=e.selectedList,n.isSearch=e.isSearch,n.isCustomItem=e.isCustomItem,n.title=e.title,n.type=e.type}));const r=(0,o.computed)((()=>n.list.filter((e=>!e.isDisabled)))),s=e=>{t.emit("search",e.target.value)},a=t=>{if(t.isDisabled)return;let o=n.selectedList;const r=o.indexOf(t);if(r>-1)return n.selectedList.splice(r,1);e.isRadio&&(o=[]),o.push(t),n.selectedList=o},i=()=>{n.selectedList.length===r.value.length?n.selectedList=[]:n.selectedList=[...r.value]},l=()=>{t.emit("submit",n.selectedList)},c=()=>{t.emit("cancel")};return{...(0,o.toRefs)(n),optional:r,handleInput:s,selected:a,selectedAll:i,submit:l,cancel:c}}});const Os=(0,s.Z)(Ps,[["render",As],["__scopeId","data-v-88c982be"]]);var Gs=Os;const Hs=e=>((0,o.pushScopeId)("data-v-1adae321"),e=e(),(0,o.popScopeId)(),e),js=Hs((()=>(0,o.createElementVNode)("span",{class:"slider-block"},null,-1))),zs=[js];function Fs(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["slider-box",[e.open&&"slider-open"]]),onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},zs,2)}var $s=(0,o.defineComponent)({props:{open:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({open:!1});(0,o.watchEffect)((()=>{n.open=e.open}));const r=()=>{n.open=!n.open,t.emit("change",n.open)};return{...(0,o.toRefs)(n),toggle:r}}});const Zs=(0,s.Z)($s,[["render",Fs],["__scopeId","data-v-1adae321"]]);var Ys=Zs;const Ks={class:"name"},Ws={key:0,class:"edit-h5-header"},qs={class:"left"},Xs={class:"input-box"},Js={key:1},Qs={key:1,class:"edit-h5-footer"},ea=["disabled"],ta={key:0,class:"icon icon-edit"};function na(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Ks,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.群名称")),1),e.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)([e.isH5?"edit-h5":""]),ref:"dialog"},[(0,o.createElementVNode)("main",null,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("header",Ws,[(0,o.createElementVNode)("aside",qs,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.修改群聊名称")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.manage.修改群聊名称后，将在群内通知其他成员")),1)]),(0,o.createElementVNode)("span",{class:"close",onClick:t[0]||(t[0]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},(0,o.toDisplayString)(e.$t("关闭")),1)])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",Xs,[e.isEdit?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,class:"input","onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),type:"text",onKeyup:t[2]||(t[2]=(0,o.withKeys)(((...t)=>e.updateProfile&&e.updateProfile(...t)),["enter"]))},null,544)),[[o.vModelText,e.input]]):(0,o.createCommentVNode)("",!0),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",Js,(0,o.toDisplayString)(e.$t("TUIChat.manage.仅限中文、字母、数字和下划线，2-20个字")),1)):(0,o.createCommentVNode)("",!0)]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("footer",Qs,[(0,o.createElementVNode)("button",{class:"btn",disabled:!e.input,onClick:t[3]||(t[3]=(...t)=>e.updateProfile&&e.updateProfile(...t))},(0,o.toDisplayString)(e.$t("确认")),9,ea)])):(0,o.createCommentVNode)("",!0)])],2)):(0,o.createCommentVNode)("",!0),!e.isEdit||e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:1,onClick:t[4]||(t[4]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.groupProfile.name),1),e.isAuth?((0,o.openBlock)(),(0,o.createElementBlock)("i",ta)):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)])}const oa=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},isAuth:{type:Boolean,default:!1},isH5:{type:Boolean,default:!1}},setup(e,t){const n=(0,o.reactive)({groupProfile:{},input:"",isEdit:!1});(0,o.watchEffect)((()=>{n.groupProfile=e.data}));const r=(0,o.ref)();(0,uo.i9H)(r,(()=>{n.isEdit=!1}));const s=async()=>{n.input&&n.input!==n.groupProfile.name&&(t.emit("update",{key:"name",value:n.input}),n.groupProfile.name=n.input,n.input=""),a()},a=async()=>{e.isAuth&&(n.isEdit=!n.isEdit),n.isEdit&&(n.input=n.groupProfile.name)};return{...(0,o.toRefs)(n),updateProfile:s,toggleEdit:a,dialog:r}}});var ra=oa;const sa=(0,s.Z)(ra,[["render",na],["__scopeId","data-v-084e755c"]]);var aa=sa;const ia={class:"notification"},la={key:1},ca={key:0},ua={key:1},da={key:2};function pa(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("main",ia,[e.isEdit?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("textarea",{key:0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.input=t),onKeyup:t[1]||(t[1]=(0,o.withKeys)(((...t)=>e.updateProfile&&e.updateProfile(...t)),["enter"]))},null,544)),[[o.vModelText,e.input]]):((0,o.openBlock)(),(0,o.createElementBlock)("section",la,[e.groupProfile.notification?((0,o.openBlock)(),(0,o.createElementBlock)("article",ua,(0,o.toDisplayString)(e.groupProfile.notification),1)):((0,o.openBlock)(),(0,o.createElementBlock)("p",ca,(0,o.toDisplayString)(e.$t("TUIChat.manage.暂无公告")),1))])),e.isAuth?((0,o.openBlock)(),(0,o.createElementBlock)("footer",da,[e.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,class:"btn",onClick:t[2]||(t[2]=(...t)=>e.updateProfile&&e.updateProfile(...t))},(0,o.toDisplayString)(e.$t("TUIChat.manage.发布")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,class:"btn",onClick:t[3]||(t[3]=t=>e.isEdit=!e.isEdit)},(0,o.toDisplayString)(e.$t("TUIChat.manage.编辑")),1))])):(0,o.createCommentVNode)("",!0)])}const ha=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},isAuth:{type:Boolean,default:!1}},setup(e,t){const n=(0,o.reactive)({groupProfile:{},input:"",isEdit:!1});(0,o.watchEffect)((()=>{n.groupProfile=e.data,n.input=n.groupProfile.notification}));const r=async()=>{n.input&&n.input!==n.groupProfile.notification&&(t.emit("update",{key:"notification",value:n.input}),n.groupProfile.notification=n.input,n.input=""),n.isEdit=!n.isEdit};return{...(0,o.toRefs)(n),updateProfile:r}}});var ma=ha;const ga=(0,s.Z)(ma,[["render",pa],["__scopeId","data-v-2e16a46e"]]);var fa=ga;const va={class:"member"},ya={class:"list"},ka=["onClick"],wa=["src"],Ia={class:"name"},Ea=["onClick"];function ba(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("main",va,[(0,o.createElementVNode)("ul",ya,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.list,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"list-item",key:n},[(0,o.createElementVNode)("aside",{onClick:n=>e.handleMemberProfileShow(t)},[(0,o.createElementVNode)("img",{class:"avatar",src:t?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,wa),(0,o.createElementVNode)("span",Ia,(0,o.toDisplayString)(t?.nick||t?.userID),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.handleRoleName(t)),1)],8,ka),"Owner"!==t.role&&e.isShowDel?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-del",onClick:n=>e.submit(t)},null,8,Ea)):(0,o.createCommentVNode)("",!0)])))),128)),e.list.length<e.total?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,class:"list-item",onClick:t[0]||(t[0]=(...t)=>e.getMore&&e.getMore(...t))},(0,o.toDisplayString)(e.$t("TUIChat.manage.查看更多")),1)):(0,o.createCommentVNode)("",!0)])])}var Ca=n(1433),Ta=n.n(Ca);const Sa=(0,o.defineComponent)({components:{},props:{list:{type:Array,default:()=>[]},total:{type:Number,default:()=>0},isShowDel:{type:Boolean,default:()=>!1},self:{type:Object,default:()=>({})}},setup(e,t){const n=Ta().TYPES,r=(0,o.reactive)({total:0,list:[],isShowDel:!1,self:{}});(0,o.watchEffect)((()=>{r.total=e.total,r.isShowDel=e.isShowDel,r.list=e.list,r.self=e.self}));const s=e=>{const{t:t}=window.TUIKitTUICore.config.i18n.useI18n();let o="";switch(e?.role){case n.GRP_MBR_ROLE_ADMIN:o=t("TUIChat.manage.管理员");break;case n.GRP_MBR_ROLE_OWNER:o=t("TUIChat.manage.群主");break}return o&&(o=`(${o})`),e.userID===r.self.userID&&(o+=` (${t("TUIChat.manage.我")})`),o},a=()=>{t.emit("more")},i=e=>{t.emit("del",[e])},l=e=>{t.emit("handleMemberProfileShow",e)};return{...(0,o.toRefs)(r),getMore:a,submit:i,handleRoleName:s,handleMemberProfileShow:l}}});var _a=Sa;const Na=(0,s.Z)(_a,[["render",ba],["__scopeId","data-v-77e92888"]]);var Da=Na;const Ua=e=>((0,o.pushScopeId)("data-v-5bd2293d"),e=e(),(0,o.popScopeId)(),e),Ma={class:"memeber-profile"},Ba={class:"memeber-profile-main"},xa=["src"],Va={class:"list"},La=Ua((()=>(0,o.createElementVNode)("label",null,"ID：",-1))),Ra={class:"memeber-profile-footer"};function Aa(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Ma,[(0,o.createElementVNode)("div",Ba,[(0,o.createElementVNode)("img",{class:"avatar",src:e.userInfo?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,xa),(0,o.createElementVNode)("ul",Va,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.userInfo?.nick||e.userInfo?.userID),1),(0,o.createElementVNode)("li",null,[La,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.userInfo?.userID),1)]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.个性签名"))+"：",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.userInfo?.selfSignature),1)])])]),(0,o.createElementVNode)("div",Ra,[e.showEnter()?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"button",onClick:t[0]||(t[0]=t=>e.enter(e.userInfo?.userID,"C2C"))},(0,o.toDisplayString)(e.$t("TUIContact.发送消息")),1)):(0,o.createCommentVNode)("",!0)])])}const Pa=(0,o.defineComponent)({props:{userInfo:{type:Object,default:()=>({})}},setup(e,t){const n=Ja?.TUIServer,r=(0,o.reactive)({isFriendShip:!1,userInfo:{},self:{}});(0,o.watchEffect)((()=>{r.self=e.self})),(0,o.watch)((()=>e.userInfo),(async(t,o)=>{if(t===o)return;const s=await n.getUserProfile([e?.userInfo?.userID]);r.userInfo=s?.data[0],a()}),{deep:!0,immediate:!0});const s=async(e,t)=>{const o=`${t}${e}`;n.TUICore.TUIServer.TUIConversation.getConversationProfile(o).then((e=>{n.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation)}))},a=async()=>{if(!r.userInfo.userID)return;const e=await n.checkFriend(r.userInfo.userID,K.TYPES.SNS_CHECK_TYPE_BOTH);r.isFriendShip=e===K.TYPES.SNS_TYPE_BOTH_WAY},i=()=>r.isFriendShip||!n?.TUICore?.isOfficial;return{...(0,o.toRefs)(r),enter:s,showEnter:i}}});var Oa=Pa;const Ga=(0,s.Z)(Oa,[["render",Aa],["__scopeId","data-v-5bd2293d"]]);var Ha=Ga;const ja={key:0},za={class:"dialog-main-content"},Fa={key:1};function $a(e,t,n,r,s,a){return e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["dialog",[e.isH5?"dialog-h5":"",e.center?"center":""]]),onClick:t[3]||(t[3]=(0,o.withModifiers)(((...t)=>e.toggleView&&e.toggleView(...t)),["self"]))},[(0,o.createElementVNode)("main",{class:"dialog-main",style:(0,o.normalizeStyle)(!e.background&&{background:"none"})},[e.isHeaderShow?((0,o.openBlock)(),(0,o.createElementBlock)("header",ja,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.title),1),(0,o.createElementVNode)("i",{class:"icon icon-close",onClick:t[0]||(t[0]=(...t)=>e.toggleView&&e.toggleView(...t))})])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",za,[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)]),e.isFooterShow?((0,o.openBlock)(),(0,o.createElementBlock)("footer",Fa,[(0,o.createElementVNode)("button",{class:"btn btn-cancel",onClick:t[1]||(t[1]=(...t)=>e.toggleView&&e.toggleView(...t))},(0,o.toDisplayString)(e.$t("component.取消")),1),(0,o.createElementVNode)("button",{class:"btn btn-default",onClick:t[2]||(t[2]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("component.确定")),1)])):(0,o.createCommentVNode)("",!0)],4)],2)):(0,o.createCommentVNode)("",!0)}var Za=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isHeaderShow:{type:Boolean,default:()=>!0},isFooterShow:{type:Boolean,default:()=>!0},background:{type:Boolean,default:()=>!0},title:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},center:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({show:!1,isHeaderShow:!0,isFooterShow:!0,background:!0,title:""});(0,o.watchEffect)((()=>{n.show=e.show,n.title=e.title,n.isHeaderShow=e.isHeaderShow,n.isFooterShow=e.isFooterShow,n.background=e.background}));const r=()=>{n.show=!n.show,t.emit("update:show",n.show)},s=()=>{t.emit("submit"),r()};return{...(0,o.toRefs)(n),toggleView:r,submit:s}}});const Ya=(0,s.Z)(Za,[["render",$a],["__scopeId","data-v-087d9968"]]);var Ka=Ya;const Wa=(0,o.defineComponent)({components:{Mask:vs,Transfer:Gs,Slider:Ys,ManageName:aa,ManageNotification:fa,ManageMember:Da,MemeberProfile:Ha,Dialog:Ka},props:{userInfo:{type:Object,default:()=>({isGroup:!1,list:[]})},conversation:{type:Object,default:()=>({})},show:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=Wa.TUIServer.TUICore.TIM.TYPES,{GroupServer:r}=Wa,{t:s}=Wa.TUIServer.TUICore.config.i18n.useI18n(),a=(0,o.reactive)({conversation:{},userInfo:{isGroup:!1,list:[]},isShowMuteTimeInput:!1,editLableName:"",mask:!1,currentTab:"",transferType:"",isSearch:!1,isRadio:!1,transferList:[],selectedList:[],isMuteTime:!1,show:!1,typeName:{[n.GRP_WORK]:"好友工作群",[n.GRP_PUBLIC]:"陌生人社交群",[n.GRP_MEETING]:"临时会议群",[n.GRP_AVCHATROOM]:"直播群",[n.JOIN_OPTIONS_FREE_ACCESS]:"自由加入",[n.JOIN_OPTIONS_NEED_PERMISSION]:"需要验证",[n.JOIN_OPTIONS_DISABLE_APPLY]:"禁止加群"},delDialogShow:!1,userList:[],transferTitle:"",member:{admin:[],member:[],muteMember:[]},currentMember:{}}),i=(0,o.ref)();(0,o.watchEffect)((()=>{a.conversation=e.conversation,a.userInfo=e.userInfo,a.show=e.show}));const l=Kn.ZP?.useStore(),c=(0,o.computed)((()=>{let e="";switch(a.currentTab){case"notification":e="群公告";break;case"member":e="群成员";break;case"profile":e="群成员";break;default:e="群管理";break}return e}));(0,o.watch)((()=>a.userInfo.list),((e,t)=>{a.member={admin:[],member:[],muteMember:[]},e.map((e=>{switch(e?.role){case n.GRP_MBR_ROLE_ADMIN:a.member.admin.push(e);break;case n.GRP_MBR_ROLE_MEMBER:a.member.member.push(e);break;default:break}return e}));const o=(new Date).getTime();a.member.muteMember=e.filter((e=>1e3*e?.muteUntil-o>0))}),{deep:!0});const u=(0,o.computed)((()=>{const{conversation:e}=a,t=e?.groupProfile?.selfInfo.role,o=e?.groupProfile?.type,r=t===n.GRP_MBR_ROLE_OWNER,s=o===n.GRP_WORK;return r&&!s})),d=(0,o.computed)((()=>{const{conversation:e}=a,t=e?.groupProfile?.type,o=t===n.GRP_WORK;return!!o})),p=(0,o.computed)((()=>{let e=3;return d.value||(e+=1),"Owner"!==a.conversation.groupProfile.selfInfo.role&&(e+=1),e})),h=(0,o.computed)((()=>{const{conversation:e}=a,t=e?.groupProfile?.selfInfo.role,o=t===n.GRP_MBR_ROLE_OWNER,r=t===n.GRP_MBR_ROLE_ADMIN;return o||r})),m=(0,o.computed)((()=>{const{conversation:e}=a,t=e?.groupProfile?.type,o=e?.groupProfile?.selfInfo.role,r=o===n.GRP_MBR_ROLE_OWNER,s=t===n.GRP_WORK,i=t===n.GRP_AVCHATROOM;return!(s||i||!r)})),g=(0,o.computed)((()=>{const{conversation:e}=a,t=e?.groupProfile?.type,o=t===n.GRP_WORK;return!(o||!h.value)})),f=e=>{const{conversation:t}=a,n={groupID:t?.groupProfile?.groupID,count:100,offset:e&&"more"===e?a.userInfo.list.length:0};r.getGroupMemberList(n).then((t=>{a.userInfo.list=e&&"more"===e?[...a.userInfo.list,...t.data.memberList]:t.data.memberList}))},v=async e=>{const{conversation:t}=a,n={groupID:t.groupProfile.groupID,userIDList:e};await r.addGroupMember(n),f("More")},y=e=>{const{conversation:t}=a,n={groupID:t.groupProfile.groupID,userIDList:[e.userID]};r.deleteGroupMember(n)},k=async e=>{const t={groupID:a.conversation.groupProfile.groupID,newOwnerID:e},n=await r.changeGroupOwner(t);a.conversation.groupProfile={},a.conversation.groupProfile=n.data.group},w=async e=>{await r.quitGroup(e.groupID),Wa.TUIServer.store.conversation={}},I=async e=>{await r.dismissGroup(e.groupID),Wa.TUIServer.store.conversation={},window?.TUIKitTUICore?.isOfficial&&l?.commit("handleTask",5)},E=async e=>{const{conversation:t}=a;let o="";switch(e.role){case n.GRP_MBR_ROLE_ADMIN:o=n.GRP_MBR_ROLE_MEMBER;break;case n.GRP_MBR_ROLE_MEMBER:o=n.GRP_MBR_ROLE_ADMIN;break}const s={groupID:t.groupProfile.groupID,userID:e.userID,role:o};await r.setGroupMemberRole(s),f()},b=async(e,t)=>{const{conversation:n}=a,o={groupID:n.groupProfile.groupID,userID:e,muteTime:"add"===t?2592e3:0};await r.setGroupMemberMuteTime(o),"add"===t&&window?.TUIKitTUICore?.isOfficial&&l?.commit("handleTask",4),f()},C=async e=>{const{conversation:t}=a,n={groupID:t.groupProfile.groupID,userIDList:e,reason:""};await r.deleteGroupMember(n),f()},T=e=>{a.editLableName=e},S=async e=>{const{key:t,value:n}=e,o={groupID:a.conversation.groupProfile.groupID,[t]:n},s=await r.updateGroupProfile(o),{conversation:i}=Wa.TUIServer.store;i.groupProfile=s.data.group,Wa.TUIServer.store.conversation={},Wa.TUIServer.store.conversation=i,a.editLableName=""},_=e=>{a.currentTab=e,a.editLableName="","member"===a.currentTab&&(a.transferType="remove"),a.currentTab||(a.transferType="")},N=async t=>{let n={},o={};const i={groupID:a.conversation.groupProfile.groupID,userIDList:[t]};switch(a.transferType){case"add":try{o=await r.getGroupMemberProfile(i),a.transferList=a.transferList.filter((e=>e.userID!==n.data[0]?.userID)),a.transferList=[...a.transferList,...n.data],o?.data?.memberList.length>0&&(a.transferList=a.transferList.map((e=>(e.userID===o?.data?.memberList[0].userID&&(e.isDisabled=!0),e))))}catch(l){const t=s("TUIChat.manage.该用户不存在");Do(t,e)}break;case"remove":try{if(n=await r.getGroupMemberProfile(i),0===n.data.memberList.length){const t=s("TUIChat.manage.该用户不在群组内");return Do(t,e)}a.transferList=a.transferList.filter((e=>e.userID!==n?.data?.memberList[0]?.userID)),a.transferList=[...a.transferList,...n?.data?.memberList]}catch(l){const t=s("TUIChat.manage.该用户不存在");Do(t,e)}break;default:break}},D=e=>{"remove"===a.transferType?(a.userList=e,a.delDialogShow=!a.delDialogShow):L(e,a.transferType),a.mask=!1},U=async()=>{const e=await Wa.TUIServer.getFriendList(),t=e.data.map((e=>e?.profile));return t.filter((e=>!a.userInfo.list.some((t=>t.userID===e.userID))))},M=()=>{B()},B=async e=>{switch(a.selectedList=[],e){case"add":a.isRadio=!1,a.transferList=await U(),a.transferTitle="添加成员";break;case"remove":a.isRadio=!1,a.transferList=a.userInfo.list.filter((e=>e.userID!==a.conversation?.groupProfile?.selfInfo.userID)),a.transferTitle="删除成员";break;case"addAdmin":a.isRadio=!0,a.transferList=a.member.member,a.transferTitle="新增管理员";break;case"removeAdmin":a.isRadio=!0,a.transferList=a.member.admin,a.transferTitle="移除管理员";break;case"changeOwner":a.isRadio=!0,a.transferList=[...a.member.admin,...a.member.member],a.transferTitle="转让群组";break;case"addMute":a.isRadio=!0,a.transferList=a.member.member,"Owner"===a.conversation.groupProfile.selfInfo.role&&(a.transferList=[...a.member.admin,...a.member.member]),a.transferTitle="新增禁言用户";break;case"removeMute":a.isRadio=!0,a.transferList=a.member.muteMember,a.transferTitle="移除禁言用户";break;default:break}a.transferType=e,a.mask=!a.mask};(0,uo.i9H)(i,(()=>{a.show=!1}));const x=()=>{if(!r){const t=s("TUIChat.manage.请先注册 TUIGroup 模块");return Do(t,e)}a.show=!a.show,a.show||(a.currentTab=""),a.show&&(f(),Yn.getInstance().reportEvent({name:"showGroupManage",ext1:"showGroupManage"}))},V=e=>{S({key:"muteAllMembers",value:e}),window?.TUIKitTUICore?.isOfficial&&l?.commit("handleTask",4)},L=(e,t)=>{const n=[];switch(e.map((e=>(n.push(e.userID),e))),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupOptions"}),t){case"add":v(n),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddMember"});break;case"remove":C(n),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveMember"});break;case"addAdmin":E(e[0]),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddAdmin"});break;case"removeAdmin":E(e[0]),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveAdmin"});break;case"changeOwner":k(n[0]),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupChangeOwner"});break;case"addMute":b(n[0],"add"),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupAddMute"});break;case"removeMute":b(n[0],"remove"),Yn.getInstance().reportEvent({name:"groupOptions",ext1:"groupRemoveMute"});break;default:break}},R=async()=>{try{const{toClipboard:e}=(0,Or.Z)();await e(a?.conversation?.groupProfile?.groupID)}catch(e){Do(e,a.env)}},A=e=>{a.currentMember=e,_("profile")};return{...(0,o.toRefs)(a),isDismissGroupAuth:u,isShowAddMember:d,isSetMuteTime:g,isAdmin:m,isAuth:h,addMember:v,deleteMember:y,changeOwner:k,quit:w,dismiss:I,handleAdmin:E,setMemberMuteTime:b,kickedOut:C,edit:T,updateProfile:S,setTab:_,TabName:c,getMember:f,handleSearchMember:N,submit:D,cancel:M,toggleMask:B,toggleShow:x,setAllMuteTime:V,handleManage:L,showUserNum:p,dialog:i,handleGroupIDCopy:R,handleMemberProfileShow:A}}});var qa=Wa;const Xa=(0,s.Z)(qa,[["render",hs],["__scopeId","data-v-32b36a5d"]]);var Ja=Xa;const Qa={product:{label:"产品文档",url:"https://cloud.tencent.com/document/product/269/1499#.E7.BE.A4.E7.BB.84.E5.8A.9F.E8.83.BD"},customMessage:{label:"自定义消息",url:"https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#createCustomMessage"},complaint:{label:"点此投诉",url:"https://cloud.tencent.com/apply/p/xc3oaubi98g"},implement:{label:"集成TUICallKit",url:"https://cloud.tencent.com/document/product/269/79861"},purchase:{label:"开通腾讯实时音视频服务",url:"https://cloud.tencent.com/document/product/1640/79968"}};var ei=Qa;const ti=(0,o.defineComponent)({name:"TUIChat",components:{MessageText:yt,MessageImage:Lt,MessageVideo:Zt,MessageAudio:Xt,MessageFile:ln,MessageFace:mn,MessageLocation:In,MessageMerger:Un,MessageCustom:Xn,MessageBubble:dr,MessageTip:no,MessageRevoked:yr,MessageSystem:Dr,Manage:Ja,MessageTool:jr,MessageEmojiReact:ir},props:{isMsgNeedReadReceipt:{type:Boolean,default:!1},isNeedTyping:{type:Boolean,default:!0},isNeedEmojiReact:{type:Boolean,default:!0}},setup(e){const{TUIServer:t}=ti,n=t?.TUICore?.TUIServer?.TUIGroup,r=t?.TUICore?.TUIServer?.TUIProfile,s=Kn.oR&&(0,Kn.oR)(),{t:a}=window.TUIKitTUICore.config.i18n.useI18n(),i=(0,o.reactive)({messageList:[],conversation:{},text:"",atText:"",types:t.TUICore.TIM.TYPES,currentMessage:{},dialogID:"",forwardStatus:!1,receiptDialogStatus:!1,repliesDialogStatus:!1,showImagePreview:!1,currentImagePreview:{},isCompleted:!1,userInfoView:!1,userInfo:{isGroup:!1,list:[]},selfInfo:{},messageComponents:uu("message"),isShow:!1,muteText:"您已被管理员禁言",isFirstSend:!0,isFirstRender:!0,showGroupMemberList:!1,reference:{message:{},content:"",type:0,show:""},historyReference:!1,referenceID:"",allMemberList:[],atType:[],atAllText:"",atOneText:[],allMember:[{allText:"所有人",type:t.TUICore.TIM.TYPES.MSG_AT_ALL}],env:t.TUICore.TUIEnv,showResend:!1,resendMessage:{},inputBlur:!1,inputComposition:!1,inputCompositionCont:"",needTyping:e.isNeedTyping,needReadReceipt:!1,peerNeedReceipt:!1,needToBottom:!1,toBottomTipCont:"",messageInView:[],readSet:new Set,isUserAction:!1,scroll:{scrollTop:0,scrollHeight:0,scrollTopMin:1/0,scrollTopMax:0},isMsgNeedReadReceipt:!1,isNeedEmojiReact:!1,dropDownRef:null}),l=!!(0,o.useSlots)().default,c=async e=>{e&&await(t?.TUICore?.TUIServer?.TUIConversation?.setMessageRead(e))},u=async e=>{const n=e.filter((e=>"in"===e?.flow&&e?.needReadReceipt&&!i.readSet.has(e?.ID)));n.length&&await(t?.sendMessageReadReceipt(n).then((()=>{n.forEach((e=>i.readSet.add(e?.ID)))}))),await c(i?.conversation?.conversationID)},d=[];Object.keys(uu("send")).forEach((e=>{d.push(e)})),Ja.TUIServer=t,Ja.GroupServer=t?.TUICore?.TUIServer?.TUIGroup;const p=(0,o.ref)(),h=(0,o.ref)(),m=(0,o.ref)(),g=(0,o.ref)();t.bind(i);const f={list:[],handleAvatar:X,handleName:J},v=(0,o.ref)();(0,uo.i9H)(v,(()=>{i.showGroupMemberList=!1}));const y=(0,o.computed)((()=>{const{conversation:e}=i;return e?.conversationID?e?.type===t.TUICore.TIM.TYPES.CONV_SYSTEM?"system":"chat":""})),k=(0,o.computed)((()=>{const{conversation:e}=i;if(e?.type===t.TUICore.TIM.TYPES.CONV_GROUP){const n=e?.groupProfile?.selfInfo.role,o=n===t.TUICore.TIM.TYPES.GRP_MBR_ROLE_MEMBER;if(o&&e?.groupProfile?.muteAllMembers)return!0;const r=(new Date).getTime();if(1e3*i.selfInfo?.muteUntil-r>0)return!0}return!1}));(0,o.watchEffect)((()=>{i.isMsgNeedReadReceipt=e.isMsgNeedReadReceipt,i.needReadReceipt=i.isMsgNeedReadReceipt,i.needTyping=e.isNeedTyping,i.isNeedEmojiReact=e.isNeedEmojiReact})),(0,o.watch)((()=>i?.conversation?.conversationID),((e,t)=>{e!==t&&(i.scroll.scrollTop=0,i.scroll.scrollHeight=0,i.scroll.scrollTopMin=1/0,i.scroll.scrollTopMax=0,i.text="",i.atText="",i.reference={message:{},content:"",type:0,show:""})}),{deep:!0}),(0,o.watch)(k,((e,n)=>{const{conversation:o}=i;if(e&&o?.type===t.TUICore.TIM.TYPES.CONV_GROUP){const e=o?.groupProfile?.selfInfo.role,n=e===t.TUICore.TIM.TYPES.GRP_MBR_ROLE_MEMBER;n&&o?.groupProfile?.muteAllMembers&&(i.muteText="管理员开启全员禁言");const r=(new Date).getTime();1e3*i.selfInfo?.muteUntil-r>0&&(i.muteText="您已被管理员禁言")}}));const w=(0,o.computed)((()=>{const{conversation:e}=i;return J(e)})),I=(0,o.computed)((()=>i.messageList.filter((e=>!e.isDeleted&&!we(e))))),E=(0,o.computed)((()=>I?.value?.filter((e=>!e.isRevoked&&e.type===i.types.MSG_IMAGE)))),b=(0,o.computed)((()=>{const{conversation:e,needReadReceipt:n}=i;return!(e?.type!==t.TUICore.TIM.TYPES.CONV_C2C&&!n)}));(0,o.watch)(I,((e,t)=>{if((0,o.nextTick)((()=>{const n=e[e.length-1]?.ID===t[t.length-1]?.ID;0===e.length||n||Z()})),i.currentMessage){const t=i.currentMessage?.ID,n=e.find((e=>e.ID===t));n&&(i.currentMessage=Ie(n))}if(i.historyReference){for(let e=0;e<I.value.length;e++)I?.value[e]?.ID===i?.referenceID&&(Y("target",m.value[e]),m.value[e].getElementsByClassName("content")[0].classList.add("reference-content"));i.historyReference=!1}}),{deep:!0}),(0,o.watch)((()=>i.scroll.scrollTop),(e=>{setTimeout((()=>{e===p?.value?.scrollTop&&(i.scroll.scrollTopMin!==1/0&&0!==i.scroll.scrollTopMax&&Q("scroll"),i.scroll.scrollTopMin=1/0,i.scroll.scrollTopMax=0)}),20)}),{deep:!0}),(0,o.onMounted)((()=>{(0,o.watch)((()=>p?.value),(()=>{p?.value&&p.value.addEventListener("scroll",K)}),{deep:!0})}));const C=e=>{i.text+=e.name,i.env.isH5||h.value.focus()},T=async e=>{if(13===e.keyCode&&e.ctrlKey)return;if(i.inputComposition||i.inputCompositionCont)return;const n=i.text.trimEnd(),o={};if(i.text="",me(i.text,!0),i.needTyping&&(o.messageFeature={needTyping:1,version:1}),i?.reference?.show){if(o.messageReply={messageAbstract:i.reference.content,messageSender:i.reference.message.nick||i.reference.message.from,messageID:i.reference.message.ID,messageType:i.reference.type,version:1},"reply"===i.reference?.show)try{if(o.messageReply.messageRootID=i?.reference.message?.ID,i?.reference.message?.cloudCustomData){const e=ke(i?.reference.message?.cloudCustomData);o.messageReply.messageRootID=e?.messageReply?.messageRootID||i?.reference.message?.ID}}catch(r){console.warn(r)}try{const e=await t.sendTextMessage(JSON.parse(JSON.stringify(n)),o);"reply"===i.reference?.show&&await t.replyMessage(e?.data?.message)}catch(r){Do(r,i.env)}}if(n&&0===i.atType.length&&!i.reference?.show)try{i.needTyping?await t.sendTextMessage(JSON.parse(JSON.stringify(n)),o):await t.sendTextMessage(JSON.parse(JSON.stringify(n))),i.reference.show="",Yn.getInstance().reportEvent({name:"messageType",ext1:"typeText"})}catch(r){Do(r,i.env)}if(i.atType.length>0){const e={to:i?.conversation?.groupProfile?.groupID,conversationType:t.TUICore.TIM.TYPES.CONV_GROUP,payload:{text:n,atUserList:i.atType}};try{await t.sendTextAtMessage({text:e.payload.text,atUserList:e.payload.atUserList}),i.showGroupMemberList=!1}catch(r){console.log(r)}}return i.isFirstSend&&(Yn.getInstance().reportEvent({name:"sendMessage",ext1:"sendMessage-success"}),i.isFirstSend=!1),i.reference.show="",t.TUICore.isOfficial&&s?.commit("handleTask",0),i.atType=[]},S=e=>{i.currentMessage=e,i.dialogID=e.ID},_=e=>{i.env.isH5?(i.showResend=!0,i.resendMessage=e):(t.resendMessage(e).catch((e=>{Do(e,i.env)})),Yn.getInstance().reportEvent({name:"messageOptions",ext1:"messageResend"}))},N=e=>{i.currentMessage=e,f.list=t.TUICore.getStore().TUIConversation.conversationList,i.forwardStatus=!0},D=(e,t)=>{let n=ee(e);i.reference={message:e,content:n?.referenceMessageForShow,type:n?.referenceMessageType,show:t}},U=()=>{t.resendMessage(i.resendMessage).then((()=>{i.showResend=!1})).catch((e=>{Do(e,i.env),i.showResend=!1})),Yn.getInstance().reportEvent({name:"messageOptions",ext1:"messageResend"})},M=e=>{i.text=e.payload.text},B=e=>{t.handleGroupApplication(e)},x=e=>{13===e.keyCode&&(e.preventDefault(),e.ctrlKey&&(e.target.value+="\n",i.text+="\n",me(i.text)))},V=e=>{if(i.inputComposition&&(i.inputCompositionCont=e?.data?e.data:""),e.data===q.at&&i?.conversation?.type===q.group){const e={groupID:i?.conversation?.groupProfile?.groupID,count:100,offset:0};i.showGroupMemberList=!0,n.getGroupMemberList(e).then((e=>{e.data.memberList=e.data.memberList.filter((e=>e.userID!==r.currentStore.profile.userID)),i.allMemberList=e.data.memberList}))}" "===e.data&&-1!==i.text.indexOf(q.at)&&(i.showGroupMemberList=!1),me(i.text)},L=e=>{e.clipboardData.files[0]&&t.sendImageMessage(e.clipboardData.files[0])},R=async()=>{await t.getHistoryMessageList().then((()=>{Y("target",p?.value?.firstElementChild)}))},A=async(e,n)=>{let o="";switch(e){case"allMember":i.atText=q.all,i.text=`${i.text}${q.all}`,h.value.focus(),i.showGroupMemberList=!1,i.atType.push(t.TUICore.TIM.TYPES.MSG_AT_ALL),i.atOneText.push({name:q.all,userID:t.TUICore.TIM.TYPES.MSG_AT_ALL});break;case"oneMember":o=n.nameCard||n.nick||n.userID,i.text+=`${n.nameCard||n.nick||n.userID}`,i.atOneText.push({name:o,userID:n.userID}),h.value.focus(),i.showGroupMemberList=!1,i.atType.push(n.userID);break}},P=e=>{const t=i.atOneText;for(let n=0;n<t.length;n++){const e=`${q.at}${t[n].name}`;if(-1===i.text.indexOf(e)){const{userID:e}=t[n];i.atType.splice(i.atType.indexOf(e),1),i.atOneText=[]}}return i.atType},O=e=>{i.referenceID=e;const n=[];for(let t=0;t<I.value.length;t++)n.push(I?.value[t]?.ID),-1!==n.indexOf(e)&&I.value[t]?.ID===e&&(Y("target",m.value[t]),m.value[t].getElementsByClassName("content")[0].classList.remove("reference-content"),(0,o.nextTick)((()=>{m.value[t].getElementsByClassName("content")[0].classList.add("reference-content")})));-1===n.indexOf(e)&&t.getHistoryMessageList().then((()=>{i.historyReference=!0}))},G=()=>{i.showGroupMemberList=!i.showGroupMemberList},H=()=>{t.TUICore.TUIServer.TUIConversation.handleCurrentConversation()},j=e=>{window.open(e.url),Yn.getInstance().reportEvent({name:"openLink",ext1:e.label})},z=()=>{i.inputComposition=!1,i.inputCompositionCont=""},F=async(e,n)=>{if(e?.ID&&n)switch(n){case"receipt":if(e.conversationType!==t.TUICore.TIM.TYPES.CONV_GROUP||0===e.readReceiptInfo?.unreadCount)return;i.currentMessage=e,i.receiptDialogStatus=!0;break;case"replies":i.currentMessage=e,i.repliesDialogStatus=!0;break;default:break}},$=async e=>{if(e)switch(e){case"receipt":i.currentMessage={},i.receiptDialogStatus=!1;break;case"replies":i.currentMessage={},i.repliesDialogStatus=!1;break;default:break}},Z=()=>{if(i.isFirstRender)return i.needToBottom=!1,Y("bottom"),void(i.isFirstRender=!1);if(p.value){const{scrollHeight:e,scrollTop:t,clientHeight:n}=p.value;e-(t+n)<=n||"out"===I.value[I.value.length-1]?.flow?Y("bottom"):W(!0)}},Y=(e,t)=>{switch(p.value.removeEventListener("scroll",K),i.isUserAction=!0,e){case q.scrollType.toBottom:i.needToBottom=!1,(0,o.nextTick)((()=>{p?.value?.lastElementChild?.scrollIntoView(!1),ge(p?.value,"message-img",(async()=>{p?.value?.lastElementChild?.scrollIntoView(!1),p.value.addEventListener("scroll",K),await Q("page")}))}));break;case q.scrollType.toTarget:(0,o.nextTick)((()=>{t?.scrollIntoView(!1),ge(p?.value,"message-img",(async()=>{t?.scrollIntoView(!1),p.value.addEventListener("scroll",K),await Q("page")}))}));break;default:break}},K=()=>{const{scrollHeight:e,scrollTop:t,clientHeight:n}=p.value;b.value&&(i.scroll.scrollHeight=e,i.scroll.scrollTop=t,i.scroll.scrollTopMin=i.isUserAction?i.scroll.scrollTopMin:Math.min(i.scroll.scrollTopMin,i.scroll.scrollTop),i.scroll.scrollTopMax=i.isUserAction?i.scroll.scrollTopMax:Math.max(i.scroll.scrollTopMax,i.scroll.scrollTop)),W(e-(t+n)>n),i.isUserAction=!1},W=e=>{switch(e){case!0:i.needToBottom=!0,i.toBottomTipCont=i?.conversation?.unreadCount&&i?.conversation?.unreadCount>0?`${i?.conversation?.unreadCount} ${a("TUIChat.条新消息")}`:a("TUIChat.回到最新位置");break;case!1:i.needToBottom=!1;break;default:i.needToBottom=!1;break}},Q=async e=>{if(!b.value)return void c(i?.conversation?.conversationID);i.messageInView.length&&(i.messageInView=[]);let t=0,n=0;switch(e){case q.inViewType.page:t=i.scroll.scrollTop,n=i.scroll.scrollTop+p?.value?.clientHeight;break;case q.inViewType.scroll:t=i.scroll.scrollTopMin,n=i.scroll.scrollTopMax+p?.value?.clientHeight;break;default:break}for(let o=0;o<m?.value?.length;o++)if(te(e,m?.value[o],t,n)){const e=I.value[o];i.messageInView.push(e)}await u(i.messageInView)},te=(e,t,n,o)=>{const r=p.value.getBoundingClientRect().top,s=p.value.getBoundingClientRect().bottom,{top:a,bottom:i}=t.getBoundingClientRect(),{offsetTop:l,clientHeight:c}=t;switch(e){case q.inViewType.page:return Math.round(a)>=Math.round(r)&&Math.round(i)<=Math.round(s);case q.inViewType.scroll:return Math.round(l)>=Math.round(n)&&Math.round(l+c)<=Math.round(o);default:return!1}},oe=e=>{i.dropDownRef&&i.dropDownRef.removeChild(i.dropDownRef.children[0]),i.dropDownRef=e},pe=()=>{i.reference.show=""},me=(e,t=!1)=>{let n=0;const o=h.value;t?o.style.height="":(o.style.height="auto",n=Math.max(i?.env?.isH5?18*e.split(/\r*\n/)?.length+14:20*e.split(/\r*\n/)?.length+4,o?.scrollHeight),o.style.height=`${Math.min(n,i?.env?.isH5?86:80)}px`,o.scrollTop=o.scrollHeight)},fe=()=>{Y("bottom")},ve=e=>{i.showImagePreview=!i.showImagePreview,i.currentImagePreview=e};return{...(0,o.toRefs)(i),conversationType:y,messages:I,messageEle:p,inputEle:h,messageAimID:m,conversationData:f,conversationName:w,constant:q,sendMseeage:T,deleteAt:P,handleItem:S,handleEdit:M,getHistoryMessageList:R,handleApplication:B,handleTextMessageShowContext:re,handleImageMessageShowContext:ie,handleVideoMessageShowContext:le,handleAudioMessageShowContext:ce,handleFileMessageShowContext:ue,handleFaceMessageShowContext:se,handleLocationMessageShowContext:ae,handleMergerMessageShowContext:de,handleTipMessageShowContext:ne,handleCustomMessageShowContext:he,pluginComponentList:d,handleSend:C,closeDialog:$,isMute:k,geeks:x,pasting:L,setMessageRead:c,sendMessageReadReceipt:u,selectAt:A,inputChange:V,dialog:v,jumpID:O,back:H,slotDefault:l,toggleshowGroupMemberList:G,resendMessage:_,submit:U,Link:ei,openLink:j,compositionEnd:z,readReceiptDialog:g,scrollToTarget:Y,needGroupReceipt:b,handleDropDownOpen:oe,isMessageTip:Ee,showDialog:F,closeReferenceInEdit:pe,forwardMessage:N,referOrReplyMessage:D,handleUploadingImageOrVideo:fe,handleImagePreview:ve,imageList:E}}});var ni=ti;const oi=(0,s.Z)(ni,[["render",pt],["__scopeId","data-v-5e6c012e"]]);var ri=oi;const si=e=>((0,o.pushScopeId)("data-v-1a48c693"),e=e(),(0,o.popScopeId)(),e),ai={class:"face",id:"face"},ii=["onClick"],li=["src"],ci=["src"],ui={class:"face-tab"},di=si((()=>(0,o.createElementVNode)("i",{class:"icon icon-face"},null,-1))),pi=[di],hi=["onClick"],mi=["src"];function gi(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",ai,[(0,o.createElementVNode)("i",{class:"icon icon-face",title:"表情",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),(0,o.withDirectives)((0,o.createElementVNode)("main",{class:(0,o.normalizeClass)(["face-main",[e.isH5&&"face-H5-main"]]),ref:"dialog"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.list,((t,n)=>(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("ul",{class:"face-list",key:n},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t,((t,r)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"face-list-item",key:r,onClick:n=>e.select(t,r)},[0===n?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,src:e.emojiUrl+e.emojiMap[t]},null,8,li)):((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:1,class:"face-img",src:e.faceUrl+t+"@2x.png"},null,8,ci))],8,ii)))),128))])),[[o.vShow,e.currentIndex===n]]))),128)),(0,o.createElementVNode)("ul",ui,[(0,o.createElementVNode)("li",{class:"face-tab-item",onClick:t[1]||(t[1]=t=>e.selectFace(0))},pi),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.bigEmojiList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"face-tab-item",key:n,onClick:t=>e.selectFace(n+1)},[(0,o.createElementVNode)("img",{src:e.faceUrl+t.list[0]+"@2x.png"},null,8,mi)],8,hi)))),128))])],2),[[o.vShow,e.show]])])}const fi=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1},parentID:{type:String,default:()=>""}},setup(e,t){const n=(0,o.reactive)({emojiUrl:G,emojiMap:H,emojiName:j,faceUrl:z,bigEmojiList:F,show:!1,currentIndex:0,isMute:!1,transDom:!1}),r=(0,o.ref)();(0,o.watchEffect)((()=>{n.show=e.show,n.isMute=e.isMute}));const s=()=>{const e=document.getElementsByClassName("face-main")[0];n.isMute||(e.style.display="none"===e.style.display?"flex":"none"),"none"===e.style.display&&c(0),a()},a=()=>{const t=document.getElementById(e.parentID),n=document.getElementsByClassName("face-H5-main")[0];e.isH5&&t?.appendChild(n)};(0,uo.i9H)(r,(()=>{const e=document.getElementsByClassName("face-main")[0];e&&(e.style.display="none")}));const i=async(o,r)=>{const a={name:o};if(0===n.currentIndex)return a.type="emo",a.url=G+H[o],a.template=`<img src="${G+H[o]}">`,e.isH5||s(),t.emit("send",a);try{await fi.TUIServer.sendFaceMessage({index:n.bigEmojiList[n.currentIndex-1].icon,data:n.bigEmojiList[n.currentIndex-1].list[r]}),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeFace"})}catch(i){Do(i,e)}e.isH5||s()},l=(0,o.computed)((()=>{const e=[n.emojiName];for(let t=0;t<n.bigEmojiList.length;t++)e.push(n.bigEmojiList[t].list);return e})),c=e=>{n.currentIndex=e};return{...(0,o.toRefs)(n),toggleShow:s,select:i,selectFace:c,list:l,dialog:r}}});var vi=fi;const yi=(0,s.Z)(vi,[["render",gi],["__scopeId","data-v-1a48c693"]]);var ki=yi,wi=ki;const Ii={class:"upload-btn icon icon-image"};function Ei(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("span",Ii,[e.isMute?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,title:"图片",type:"file","data-type":"image",accept:"image/*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])}const bi=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({isMute:!1});(0,o.watchEffect)((()=>{n.isMute=e.isMute}));const r=async t=>{if(t.target.files.length>0)try{await bi.TUIServer.sendImageMessage(t.target),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeImage"})}catch(n){Do(n,e)}t.target.value=""};return{...(0,o.toRefs)(n),sendUploadMessage:r}}});var Ci=bi;const Ti=(0,s.Z)(Ci,[["render",Ei],["__scopeId","data-v-414a8c06"]]);var Si=Ti,_i=Si;const Ni={class:"upload-btn icon icon-video"};function Di(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("span",Ni,[e.isMute?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,title:"视频",type:"file","data-type":"video",accept:"video/*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])}const Ui=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({isMute:!1});(0,o.watchEffect)((()=>{n.isMute=e.isMute}));const r=async t=>{if(t.target.files.length>0)try{await Ui.TUIServer.sendVideoMessage(t.target),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeVideo"})}catch(n){Do(n,e)}t.target.value=""};return{...(0,o.toRefs)(n),sendUploadMessage:r}}});var Mi=Ui;const Bi=(0,s.Z)(Mi,[["render",Di],["__scopeId","data-v-57a6d512"]]);var xi=Bi,Vi=xi;const Li={class:"upload-btn icon icon-files"};function Ri(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("span",Li,[e.isMute?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,title:"文件",type:"file","data-type":"file",accept:"*",onChange:t[0]||(t[0]=(...t)=>e.sendUploadMessage&&e.sendUploadMessage(...t))},null,32)),(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])}const Ai=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({isMute:!1});(0,o.watchEffect)((()=>{n.isMute=e.isMute}));const r=async t=>{if(t.target.files.length>0)try{await Ai.TUIServer.sendFileMessage(t.target),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeFile"})}catch(n){Do(n,e)}t.target.value=""};return{...(0,o.toRefs)(n),sendUploadMessage:r}}});var Pi=Ai;const Oi=(0,s.Z)(Pi,[["render",Ri],["__scopeId","data-v-70588dc8"]]);var Gi=Oi,Hi=Gi;function ji(e,t,n,r,s,a){const i=(0,o.resolveComponent)("Transfer");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["forward",[e.isH5?"forward-h5":""]]),ref:"dialog"},[(0,o.createVNode)(i,{title:"转发",list:e.list,isSearch:!1,isH5:e.isH5,isCustomItem:!0,resultShow:!0,onSubmit:e.handleForWordMessage,onCancel:e.toggleShow},{left:(0,o.withCtx)((({data:t})=>[(0,o.renderSlot)(e.$slots,"left",{data:t},void 0,!0)])),right:(0,o.withCtx)((({data:t})=>[(0,o.renderSlot)(e.$slots,"right",{data:t},void 0,!0)])),_:3},8,["list","isH5","onSubmit","onCancel"])],2)):(0,o.createCommentVNode)("",!0)])}const zi=(0,o.defineComponent)({components:{Transfer:Gs},name:"转发",props:{list:{type:Array,default:()=>[]},message:{type:Object,default:()=>({})},show:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({list:[],show:!1,to:-1}),r=(0,o.ref)();(0,o.watchEffect)((()=>{n.list=e.list,n.show=e.show}));const s=()=>{n.show=!n.show,n.show||(t.emit("update:show",n.show),n.to=-1)};(0,uo.i9H)(r,(()=>{n.show=!1,t.emit("update:show",n.show),n.to=-1}));const a=async t=>{t.map((async t=>{try{await zi.TUIServer.forwardMessage(e.message,t)}catch(n){Do(n,e)}})),s()};return{...(0,o.toRefs)(n),toggleShow:s,handleForWordMessage:a,dialog:r}}});var Fi=zi;const $i=(0,s.Z)(Fi,[["render",ji],["__scopeId","data-v-799abfc4"]]);var Zi=$i,Yi=Zi;const Ki={class:"words-main-content",ref:"dialog"},Wi={class:"words-list"},qi=["onClick"];function Xi(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["words",[e.isH5?"words-H5":""]])},[(0,o.createElementVNode)("i",{class:"icon icon-words",title:"快速回复",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))}),(0,o.withDirectives)((0,o.createElementVNode)("main",{class:(0,o.normalizeClass)(["words-main",[e.isH5?"words-H5-main":""]])},[(0,o.createElementVNode)("div",Ki,[(0,o.createElementVNode)("header",null,[(0,o.createElementVNode)("aside",null,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("Words.常用语-快捷回复工具")),1)]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:"close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))},"关闭")):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("ul",Wi,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.list,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"words-list-item",key:n,onClick:n=>e.select(t)},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(t.value),1)],8,qi)))),128))])],512)],2),[[o.vShow,e.show&&!e.isMute]])],2)}var Ji=n(865);const Qi=(0,o.defineComponent)({type:"custom",props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),r=[{value:"在吗？在吗？在吗？重要的话说三遍。"},{value:"好久没聊天了，快来和我说说话～"},{value:"好的，就这么说定了。"},{value:"感恩的心，感谢有你。"},{value:"糟糕！是心动的感觉！"},{value:"心疼地抱抱自己，我太难了！"},{value:"没关系，别在意，事情过去就过去了。"},{value:"早上好，今天也是让人期待的一天呢！"},{value:"熬夜有什么用，又没人陪你聊天，早点休息吧。"}],s=(0,o.reactive)({list:[],show:!1,isMute:!1,locale:(0,Ji.T)()}),a=(0,o.ref)();(0,o.watch)((()=>s.locale),((e,t)=>{s.list=r.map((e=>({value:n(`Words.${e.value}`)})))})),(0,o.watchEffect)((()=>{s.show=e.show,s.isMute=e.isMute}));const i=()=>{s.show=!s.show,s.show&&(s.list=r.map((e=>({value:n(`Words.${e.value}`)}))))};(0,uo.i9H)(a,(()=>{s.show=!1}));const l=(e,t)=>{const n=e.value;i(),Qi.TUIServer.sendTextMessage(n)};return{...(0,o.toRefs)(s),toggleShow:i,select:l,dialog:a}}});var el=Qi;const tl=(0,s.Z)(el,[["render",Xi],["__scopeId","data-v-dfa99d56"]]);var nl=tl,ol=nl;const rl={key:0,class:"evaluate-main"},sl={class:"evaluate-main-content",ref:"dialog"},al={key:0},il={class:"evaluate-content"},ll={class:"evaluate-list"},cl=["onClick"],ul={key:0,class:"icon icon-star-light"},dl={key:1,class:"icon icon-star"},pl={class:"evaluate-main-footer"},hl={key:0};function ml(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["evaluate",[e.isH5&&"evaluate-H5"]])},[(0,o.createElementVNode)("i",{class:"icon icon-evaluate",title:"服务评价",onClick:t[0]||(t[0]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["stop"]))}),e.show&&!e.isMute?((0,o.openBlock)(),(0,o.createElementBlock)("main",rl,[(0,o.createElementVNode)("div",sl,[(0,o.createElementVNode)("header",null,[(0,o.createElementVNode)("aside",null,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("Evaluate.请对本次服务进行评价")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("p",al,[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("Evaluate.服务评价工具"))+"（"+(0,o.toDisplayString)(e.$t("Evaluate.使用")),1),(0,o.createElementVNode)("a",{onClick:t[1]||(t[1]=t=>e.openLink(e.Link.customMessage))},(0,o.toDisplayString)(e.$t(`Evaluate.${e.Link.customMessage.label}`)),1),(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("Evaluate.搭建"))+"） ",1)])):(0,o.createCommentVNode)("",!0)]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:"close",onClick:t[2]||(t[2]=(0,o.withModifiers)(((...t)=>e.toggleShow&&e.toggleShow(...t)),["stop"]))},"关闭")):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",il,[(0,o.createElementVNode)("ul",ll,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.list,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["evaluate-list-item",[n<e.num&&"small-padding",e.isH5&&"evaluate-item"]]),key:n,onClick:(0,o.withModifiers)((o=>e.select(t,n)),["stop"])},[n<e.num?((0,o.openBlock)(),(0,o.createElementBlock)("i",ul)):((0,o.openBlock)(),(0,o.createElementBlock)("i",dl))],10,cl)))),128))]),(0,o.withDirectives)((0,o.createElementVNode)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.options.data.comment=t)},null,512),[[o.vModelText,e.options.data.comment]]),(0,o.createElementVNode)("div",pl,[(0,o.createElementVNode)("button",{class:"btn",onClick:t[4]||(t[4]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("Evaluate.提交评价")),1)])]),e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("footer",hl,[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("Evaluate.服务评价工具"))+"（"+(0,o.toDisplayString)(e.$t("Evaluate.使用")),1),(0,o.createElementVNode)("a",{onClick:t[5]||(t[5]=t=>e.openLink(e.Link.customMessage))},(0,o.toDisplayString)(e.$t(`Evaluate.${e.Link.customMessage.label}`)),1),(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("Evaluate.搭建"))+"） ",1)]))],512)])):(0,o.createCommentVNode)("",!0)],2)}const gl=(0,o.defineComponent)({type:"custom",props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({link:"https://web.sdk.qcloud.com/im/doc/zh-cn//SDK.html#createCustomMessage",list:5,show:!1,isMute:!1,options:{data:{businessID:q.typeEvaluate,version:1,score:"",comment:""},description:"对本次的服务评价",extension:"对本次的服务评价"},num:0}),r=(0,o.ref)();(0,uo.i9H)(r,(()=>{n.show=!1})),(0,o.watchEffect)((()=>{n.show=e.show,n.isMute=e.isMute}));const s=()=>{n.show=!n.show,n.show&&(n.options={data:{...ve(q.typeEvaluate,1,{score:"",comment:""})},description:"对本次的服务评价",extension:"对本次的服务评价"},n.num=0)},a=(e,t)=>{n.num=t+1,n.options.data.score=`${n.num}`},i=()=>{gl.TUIServer.sendCustomMessage(n.options),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeCustom"}),s()},l=e=>{window.open(e.url),Yn.getInstance().reportEvent({name:"openLink",ext1:e.label})};return{...(0,o.toRefs)(n),toggleShow:s,select:a,submit:i,dialog:r,Link:ei,openLink:l}}});var fl=gl;const vl=(0,s.Z)(fl,[["render",ml],["__scopeId","data-v-5e2a1c9e"]]);var yl=vl,kl=yl;function wl(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("h1",null,(0,o.toDisplayString)("对方正在输入"===e.title?e.$t("TUIChat.对方正在输入"):e.title),1)}const Il=(0,o.defineComponent)({props:{needTyping:{type:Boolean,default:!1},conversation:{type:Object,default:()=>({})},messageList:{type:Array,default:()=>[]},inputText:{type:String,default:""},inputBlur:{type:Boolean,default:!0},inputCompositionCont:{type:String,default:""}},setup(e,t){const n=(0,o.reactive)({messageList:[],conversation:{},inputText:"",inputBlur:!0,inputCompositionCont:"",title:"",timeValid:0,myTypingStatus:0,otherTypingStatus:0,needTyping:!1,lastOtherMessageTime:0,lastMyTypingTime:0,lastOtherTypingTime:0,options:{data:{businessID:q.typeUserTyping,typingStatus:0,version:1,userAction:0,actionParam:q.typeInputStatusEnd},description:"",extension:""}});(0,o.watchEffect)((()=>{n.messageList=e.messageList,n.conversation=e.conversation,n.inputText=e.inputText,n.inputBlur=e.inputBlur,n.inputCompositionCont=e.inputCompositionCont,n.needTyping=e.needTyping}));const r=(0,o.computed)((()=>{const{conversation:e}=n;return e?.conversationID?e.conversationID:""})),s=(0,o.computed)((()=>{const{conversation:e}=n;return J(e)})),a=(0,o.computed)((()=>{const{conversation:e}=n;return e?.type?e?.type:""})),i=(0,o.computed)((()=>n.needTyping&&n.otherTypingStatus?"对方正在输入":s?.value)),l=(0,o.computed)((()=>({inputText:n.inputText,inputBlur:n.inputBlur,inputCompositionCont:n.inputCompositionCont})));(0,o.watch)(l,((e,t)=>{if(e&&n.needTyping&&"C2C"===a.value&&((new Date).getTime()/1e3-n.lastOtherMessageTime<30&&(n.timeValid=1),n.timeValid&&e.inputText!==`${t.inputText}\n`))if(!e.inputText&&!e.inputCompositionCont||e.inputBlur)n.myTypingStatus=0,n.lastMyTypingTime=0,u(n.myTypingStatus);else{n.myTypingStatus=1;const e=(new Date).getTime();e-n.lastMyTypingTime>4e3&&(n.lastMyTypingTime=e,u(n.myTypingStatus))}}),{deep:!0}),(0,o.watch)(r,((e,t)=>{e!==t&&(n.needTyping=!1,n.timeValid=0)})),(0,o.watch)((()=>n.needTyping),((e,t)=>{e||(n.myTypingStatus=0,n.otherTypingStatus=0,n.lastOtherMessageTime=0)})),(0,o.watch)((()=>n.messageList),((e,t)=>{(0,o.nextTick)((()=>{0!==e.length&&"C2C"===a.value&&(n.lastOtherMessageTime=d(e),"in"===e[e.length-1]?.flow&&(we(e[e.length-1])?(n.otherTypingStatus=c(e[e.length-1]),h()):(n.lastOtherMessageTime=e[e.length-1]?.time,n.otherTypingStatus=0)))}))}),{deep:!0});const c=e=>{try{const{typingStatus:t,actionParam:n}=ke(e?.payload?.data);return 1===t&&n===q.typeInputStatusIng?1:0}catch{return 0}},u=e=>{n.options={data:{businessID:q.typeUserTyping,typingStatus:e?1:0,version:1,userAction:e?14:0,actionParam:e?q.typeInputStatusIng:q.typeInputStatusEnd},description:"",extension:""},Il.TUIServer.sendTypingMessage(n.options),Yn.getInstance().reportEvent({name:"messageType",ext1:"typeCustom"})},d=e=>{if(!e)return 0;for(let t=e.length-1;t>=0;t--)if(!we(e[t])&&"in"===e[t].flow)return e[t].time;return 0},p=(e,t=2e3)=>{let n;return function(){n&&clearTimeout(n),n=setTimeout(e,t)}},h=p((()=>{n.otherTypingStatus=0}),5e3);return{...(0,o.toRefs)(n),conversationID:r,conversationName:s,conversationType:a,title:i,isTypingMessage:we,sendTypingMessage:u,handleTypingMessageStatus:c,getLastOtherMessageTime:d,debounce:p,waitTypingEnd:h}}});var El=Il;const bl=(0,s.Z)(El,[["render",wl],["__scopeId","data-v-264a457e"]]);var Cl=bl,Tl=Cl;const Sl={class:"header"},_l={class:"header-back"},Nl={class:"header-title"},Dl={class:"header-close"},Ul={class:"body"},Ml={key:0,class:"body-message"},Bl={class:"message"},xl={class:"message-info"},Vl={class:"message-cont"},Ll=["src"],Rl={key:1},Al={class:"body-tab"},Pl=["onClick"],Ol={class:"tab-item-title"},Gl={class:"tab-item-count"},Hl={class:"body-list"},jl=["src"],zl={class:"name"};function Fl(e,t,n,r,s,a){return e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["read-receipt",[e.isH5?"read-receipt-H5":"",e.isMenuOpen?"read-receipt-menu-open":""]]),ref:"dialog"},[(0,o.createElementVNode)("div",Sl,[(0,o.createElementVNode)("div",_l,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",Nl,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.消息详情")),1)]),(0,o.createElementVNode)("div",Dl,[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),(0,o.createElementVNode)("div",Ul,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ml,[(0,o.createElementVNode)("div",Bl,[(0,o.createElementVNode)("div",xl,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.message.from),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.caculateTimeago(1e3*e.message.time)),1)]),(0,o.createElementVNode)("div",Vl,[e.messageInfo.isImg?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,class:"message-cont-img",src:e.messageInfo.content},null,8,Ll)):((0,o.openBlock)(),(0,o.createElementBlock)("p",Rl,(0,o.toDisplayString)(e.messageInfo.content),1))])])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",Al,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.readReceiptList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[t.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["tab-item",n===e.showListNow&&"tab-item-now"]),key:n,onClick:t=>e.showListNow=n},[(0,o.createElementVNode)("div",Ol,(0,o.toDisplayString)(t?.label),1),(0,o.createElementVNode)("div",Gl,(0,o.toDisplayString)(t?.count),1)],10,Pl)):(0,o.createCommentVNode)("",!0)],64)))),256))]),(0,o.createElementVNode)("div",Hl,[(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.readReceiptList[e.showListNow].userList,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:t,class:"body-list-item"},[(0,o.createElementVNode)("img",{class:"avatar",src:e?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,jl),(0,o.createElementVNode)("div",zl,(0,o.toDisplayString)(e?.nick||e?.userID),1)])))),128))]),e.readReceiptList[e.showListNow].isCompleted?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"more",onClick:t[2]||(t[2]=(...t)=>e.getMoreList&&e.getMoreList(...t))},"查看更多"))])])],2)):(0,o.createCommentVNode)("",!0)}const $l=(0,o.defineComponent)({type:"custom",props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},show:{type:Boolean,default:()=>!1}},setup(e,t){const{t:n}=window.TUIKitTUICore.config.i18n.useI18n(),r=(0,o.reactive)({message:{},isGroup:!1,show:!1,isH5:!1,messageInfo:{isImg:!1,content:""},readReceiptList:[{label:e.isH5?n("TUIChat.人已读"):n("TUIChat.已读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人未读"):n("TUIChat.未读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人关闭阅读状态"):n("TUIChat.关闭阅读状态"),count:0,userList:[],isCompleted:!0,cursor:"",show:!1}],showListNow:0,isMenuOpen:!0,env:(0,A.kK)()}),s=(0,o.ref)();(0,o.watchEffect)((()=>{r.show=e.show,r.isH5=e.isH5})),(0,o.watch)((()=>{e.message,r.show}),(async()=>{r.show&&(m(),r.message=e.message,u(),h(),r.readReceiptList[0].count=r.message?.readReceiptInfo?.readCount||r.readReceiptList[0].count,r.readReceiptList[1].count=r.message?.readReceiptInfo?.unreadCount||r.readReceiptList[1].count,i(),l())}),{deep:!0});const a=()=>{r.show=!r.show,r.show||(t.emit("closeDialog","receipt"),p())};(0,uo.i9H)(s,(()=>{r.show=!1,t.emit("closeDialog","receipt"),p()}));const i=async(e=!1)=>{if(r.isGroup&&r.message&&0!==Object.keys(r.message).length)try{const t=await $l.TUIServer.getGroupReadMemberList(r.message,e?r.readReceiptList[0].cursor:"");r.readReceiptList[0].isCompleted=t?.data?.isCompleted,r.readReceiptList[0].cursor=t?.data?.cursor||"";const n=t.data.readUserIDList,o=await c(n);r.readReceiptList[0].userList=e?[...r.readReceiptList[0].userList,...o]:o}catch(t){if(t&&10062===t?.code){const e=n("TUIChat.您当前购买使用的套餐包暂未开通群消息已读回执功能");Do(e,r.env),console.warn(e)}}},l=async(e=!1)=>{if(!r.isGroup||!r.message||0===Object.keys(r.message).length)return;const t=await $l.TUIServer.getGroupUnreadMemberList(r.message,e?r.readReceiptList[1].cursor:"");r.readReceiptList[1].isCompleted=t?.data.isCompleted,r.readReceiptList[1].cursor=t?.data?.cursor||"";const n=t.data.unreadUserIDList,o=await c(n);r.readReceiptList[1].userList=e?[...r.readReceiptList[1].userList,...o]:o},c=async e=>{const t=[];if(e.length&&r.isGroup){const n=await $l.TUIServer.getUserProfile(e),o=n.data;o.forEach((e=>{t.push({nick:e?.nick,avatar:e?.avatar,userID:e?.userID})}))}return t},u=()=>{r.message?.conversationType===$l.TUIServer.TUICore.TIM.TYPES.CONV_GROUP?r.isGroup=!0:r.isGroup=!1},d=()=>{switch(r.showListNow){case 0:i(!0);break;case 1:l(!0);break;default:break}},p=()=>{r.message={},r.readReceiptList=[{label:e.isH5?n("TUIChat.人已读"):n("TUIChat.已读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人未读"):n("TUIChat.未读"),count:0,userList:[],isCompleted:!0,cursor:"",show:!0},{label:e.isH5?n("TUIChat.人关闭阅读状态"):n("TUIChat.关闭阅读状态"),count:0,userList:[],isCompleted:!0,cursor:"",show:!1}],r.showListNow=0,r.messageInfo={isImg:!1,content:""}},h=()=>{if(r.message&&r.isH5)switch(r.message.type){case $l.TUIServer.TUICore.TIM.TYPES.MSG_TEXT:r.messageInfo.content=r.message?.payload?.text,r.messageInfo.isImg=!1;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_CUSTOM:r.messageInfo.content=n("TUIChat.自定义"),r.messageInfo.isImg=!1;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_IMAGE:r.messageInfo.content=ie(r.message)?.url,r.messageInfo.isImg=!0;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_AUDIO:r.messageInfo.content=n("TUIChat.语音"),r.messageInfo.isImg=!1;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_VIDEO:r.messageInfo.content=le(r.message)?.snapshotUrl,r.messageInfo.isImg=!0;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_FILE:r.messageInfo.content=n("TUIChat.文件")+r.message?.payload?.fileName,r.messageInfo.isImg=!1;break;case $l.TUIServer.TUICore.TIM.TYPES.MSG_FACE:r.messageInfo.content=se(r.message)?.url,r.messageInfo.isImg=!0;break}},m=()=>{r.isMenuOpen=!!document?.getElementsByClassName("home-menu")?.length};return{...(0,o.toRefs)(r),dialog:s,toggleShow:a,getReadList:i,getUnreadList:l,isGroup:u,handleAvatarAndName:c,close:p,getMoreList:d,showMessage:h,caculateTimeago:_o,handleDialogPosition:m}}});var Zl=$l;const Yl=(0,s.Z)(Zl,[["render",Fl],["__scopeId","data-v-103b5294"]]);var Kl=Yl,Wl=Kl;const ql={class:"header"},Xl={class:"header-back"},Jl={class:"header-title"},Ql={class:"header-close"},ec={class:"body"},tc={class:"body-message"},nc={class:"body-list"};function oc(e,t,n,r,s,a){const i=(0,o.resolveComponent)("RepliesItem");return e.show?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["replies",[e.isH5?"replies-H5":"",e.isMenuOpen?"replies-menu-open":""]]),ref:"dialog"},[(0,o.createElementVNode)("div",ql,[(0,o.createElementVNode)("div",Xl,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.toggleShow&&e.toggleShow(...t))})):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",Jl,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.$t("TUIChat.回复详情")),1)]),(0,o.createElementVNode)("div",Ql,[e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-close",onClick:t[1]||(t[1]=(...t)=>e.toggleShow&&e.toggleShow(...t))}))])]),(0,o.createElementVNode)("div",ec,[(0,o.createElementVNode)("div",tc,[(0,o.createVNode)(i,{message:e.message,isH5:e.isH5,isRoot:!0},null,8,["message","isH5"])]),(0,o.createElementVNode)("div",nc,[(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.replies,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:n,class:"body-list-item"},[(0,o.createVNode)(i,{message:t,isH5:e.isH5,isRoot:!1},null,8,["message","isH5"])])))),128))])])])],2)):(0,o.createCommentVNode)("",!0)}const rc=e=>((0,o.pushScopeId)("data-v-c1a2ea1e"),e=e(),(0,o.popScopeId)(),e),sc={class:"message-bubble",ref:"htmlRefHook"},ac=["src"],ic={class:"message-area"},lc={class:"message-area-title"},cc={class:"name"},uc={class:"time"},dc={class:"content content-in"},pc={key:1},hc=["src"],mc=rc((()=>(0,o.createElementVNode)("i",{class:"icon icon-voice"},null,-1))),gc={key:4,class:"message-video-cover"},fc=["src"],vc=["src"],yc={key:6,class:"message-file"},kc=rc((()=>(0,o.createElementVNode)("i",{class:"icon icon-files"},null,-1))),wc={class:"message-file-content"};function Ic(e,t,n,r,s,a){const i=(0,o.resolveComponent)("MessageText"),l=(0,o.resolveComponent)("MessageEmojiReact");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["replies-item",e.isRoot?"":"replies-item-normal"])},[(0,o.createElementVNode)("div",sc,[(0,o.createElementVNode)("img",{class:"avatar",src:e.message?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,ac),(0,o.createElementVNode)("main",ic,[(0,o.createElementVNode)("div",lc,[(0,o.createElementVNode)("label",cc,(0,o.toDisplayString)(e.isRoot?e.message.nameCard||e.message.nick||e.message.from:e.message.messageSender),1),(0,o.createElementVNode)("label",uc,(0,o.toDisplayString)(e.caculateTimeago(1e3*(e.isRoot?e.message?.time:e.message?.messageTime))),1)]),(0,o.createElementVNode)("div",dc,[e.message.messageType!==e.constant.typeText&&e.message.type!==e.TIM.TYPES.MSG_TEXT&&e.isRoot?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(i,{key:0,data:e.handleTextMessageShowContext(e.isRoot?e.message:{payload:{text:e.message?.messageAbstract}})},null,8,["data"])),e.message.messageType===e.constant.typeCustom||e.message.type===e.TIM.TYPES.MSG_CUSTOM?((0,o.openBlock)(),(0,o.createElementBlock)("span",pc,(0,o.toDisplayString)(e.handleCustomMessageShowContext(e.message)?.custom),1)):(0,o.createCommentVNode)("",!0),e.message.messageType===e.constant.typeImage||e.message.type===e.TIM.TYPES.MSG_IMAGE?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:2,class:"message-img",src:e.message?.payload?.imageInfoArray[1].url},null,8,hc)):(0,o.createCommentVNode)("",!0),e.message.messageType===e.constant.typeAudio||e.message.type===e.TIM.TYPES.MSG_AUDIO?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:3,class:"message-audio",style:(0,o.normalizeStyle)(`width: ${10*e.message?.payload?.second+40}px`)},[mc,(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.message?.payload?.second)+"s",1)],4)):(0,o.createCommentVNode)("",!0),e.message.messageType===e.constant.typeVideo||e.message.type===e.TIM.TYPES.MSG_VIDEO?((0,o.openBlock)(),(0,o.createElementBlock)("div",gc,[(0,o.createElementVNode)("img",{class:"message-videoimg",src:e.message?.payload?.snapshotUrl||e.message?.payload?.thumbUrl},null,8,fc)])):(0,o.createCommentVNode)("",!0),e.message.messageType===e.constant.typeFace||e.message.type===e.TIM.TYPES.MSG_FACE?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:5,class:"message-img",src:e.url},null,8,vc)):(0,o.createCommentVNode)("",!0),e.message.messageType===e.constant.typeFile||e.message.type===e.TIM.TYPES.MSG_FILE?((0,o.openBlock)(),(0,o.createElementBlock)("div",yc,[kc,(0,o.createElementVNode)("div",wc,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.message?.payload?.fileName),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.handleFileMessageShowContext(e.message)?.size||e.message?.payload?.fileSize),1)])])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(l,{message:e.message,type:"content"},null,8,["message"])])])],512)],2)}const Ec=(0,o.defineComponent)({props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},isRoot:{type:Boolean,default:!1}},components:{MessageText:yt,MessageEmojiReact:ir},setup(e,t){const n=(0,o.reactive)({message:{},isH5:!1,url:"",isRoot:!1,constant:q,TIM:K});return(0,o.watchEffect)((()=>{n.message=e.message,n.isH5=e.isH5,n.isRoot=e.isRoot,n.message.type===K.TYPES.MSG_FACE&&(n.url=`https://web.sdk.qcloud.com/im/assets/face-elem/${n.message?.payload?.data}@2x.png`)})),{...(0,o.toRefs)(n),handleTextMessageShowContext:re,handleCustomMessageShowContext:he,handleFileMessageShowContext:ue,caculateTimeago:_o}}});var bc=Ec;const Cc=(0,s.Z)(bc,[["render",Ic],["__scopeId","data-v-c1a2ea1e"]]);var Tc=Cc;const Sc=(0,o.defineComponent)({type:"custom",components:{RepliesItem:Tc},props:{message:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1},show:{type:Boolean,default:()=>!1},url:{type:String,default:""},messageList:{type:Array,default:()=>[]}},setup(e,t){const n=(0,o.reactive)({message:{},isGroup:!1,show:!1,isH5:!1,url:"",showListNow:0,isMenuOpen:!0,replies:[],messageList:[],TIM:K}),r=(0,o.ref)();(0,o.watchEffect)((()=>{n.message=e.message,n.show=e.show,n.isH5=e.isH5,n.url=e.url,n.messageList=e.messageList})),(0,o.watch)((()=>{n.message,n.messageList}),(()=>{n.message=e.message,n.messageList=e.messageList,a(n.message)}),{deep:!0});const s=()=>{n.show=!n.show,n.show||(t.emit("closeDialog","replies"),i())};(0,uo.i9H)(r,(()=>{n.show=!1,t.emit("closeDialog","replies"),i()}));const a=e=>{try{const{cloudCustomData:t}=e;if(!t)return;const o=ke(t);n.replies=o?.messageReplies?.replies,n?.replies?.forEach((e=>{const{messageID:t,messageSender:o}=e,r=n.messageList.find((e=>e.ID===t||e.from===o));e.avatar=r?r?.avatar:""}))}catch(t){console.log(t)}},i=()=>{n.message={}},l=()=>{n.isMenuOpen=!!document?.getElementsByClassName("home-menu")?.length};return{...(0,o.toRefs)(n),dialog:r,toggleShow:s,close:i,caculateTimeago:_o,handleDialogPosition:l}}});var _c=Sc;const Nc=(0,s.Z)(_c,[["render",oc],["__scopeId","data-v-43000c27"]]);var Dc=Nc,Uc=Dc;const Mc=e=>((0,o.pushScopeId)("data-v-7cf577d0"),e=e(),(0,o.popScopeId)(),e),Bc={key:0,class:"call",id:"call"},xc=Mc((()=>(0,o.createElementVNode)("i",{class:"icon icon-call",title:"通话"},null,-1))),Vc=Mc((()=>(0,o.createElementVNode)("i",{class:"icon icon-down-arrow",title:"通话"},null,-1))),Lc=[xc,Vc],Rc={class:"call-main-content",ref:"dialog"},Ac={key:0,class:"icon icon-call-voice"},Pc={key:0,class:"icon icon-call-video"},Oc={class:"uncall-dialog-body"};function Gc(e,t,n,r,s,a){const i=(0,o.resolveComponent)("Transfer"),l=(0,o.resolveComponent)("Dialog");return e.handleShowCallIcon(e.conversation,e.isH5)?((0,o.openBlock)(),(0,o.createElementBlock)("div",Bc,[(0,o.createElementVNode)("div",{class:"call-icon",onClick:t[0]||(t[0]=(...t)=>e.toggleShowSelectDialog&&e.toggleShowSelectDialog(...t))},Lc),(0,o.withDirectives)((0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["call-main",[e.isH5&&"call-main-h5"]])},[(0,o.createElementVNode)("div",Rc,[(0,o.createElementVNode)("div",{class:"call-main-voice",onClick:t[1]||(t[1]=t=>e.onClickCall(1))},[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Ac)):(0,o.createCommentVNode)("",!0),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$t("TUIChat.语音通话")),1)]),(0,o.createElementVNode)("div",{class:"call-main-video",onClick:t[2]||(t[2]=t=>e.onClickCall(2))},[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Pc)):(0,o.createCommentVNode)("",!0),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$t("TUIChat.视频通话")),1)]),(0,o.createElementVNode)("footer",null,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:"close",onClick:t[3]||(t[3]=(0,o.withModifiers)((t=>e.showSelectDialog=!1),["stop"]))},(0,o.toDisplayString)(e.$t("TUIChat.取消")),1)):(0,o.createCommentVNode)("",!0)])],512)],2),[[o.vShow,e.showSelectDialog]]),(0,o.createVNode)(l,{show:e.showGroupUserDialog,isH5:e.isH5,isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":t[4]||(t[4]=t=>e.showGroupUserDialog=t)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{isSearch:!0,title:e.showTitle,list:e.searchUserList,isH5:e.isH5,isRadio:"isC2C"===e.conversation?.type,onSearch:e.handleSearch,onSubmit:e.submit,onCancel:e.cancle},null,8,["title","list","isH5","isRadio","onSearch","onSubmit","onCancel"])])),_:1},8,["show","isH5"]),(0,o.createVNode)(l,{show:e.showUnsupportDialog,isH5:e.isH5,isHeaderShow:!0,isFooterShow:!0,background:!0,title:e.$t("TUIChat.欢迎使用TUICallKit"),"onUpdate:show":t[6]||(t[6]=t=>e.showUnsupportDialog=t)},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("div",Oc,[(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.errorContent),1),(0,o.withDirectives)((0,o.createElementVNode)("p",null,[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("TUIChat.请点击"))+" ",1),(0,o.createElementVNode)("a",{onClick:t[5]||(t[5]=t=>e.openLink(e.errorLink?.url))},(0,o.toDisplayString)(e.$t(`TUIChat.${e.errorLink?.label}`)),1),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$t("TUIChat.进行体验")),1)],512),[[o.vShow,Object.keys(e.errorLink).length>0]])])])])),_:1},8,["show","isH5","title"])])):(0,o.createCommentVNode)("",!0)}var Hc=Ka,jc=Gs;const zc=(0,o.defineComponent)({props:{show:{type:Boolean,default:()=>!1},isMute:{type:Boolean,default:()=>!1},isH5:{type:Boolean,default:()=>!1},conversation:{type:Object,default:()=>({})}},components:{Dialog:Hc,Transfer:jc},setup(e,t){const{t:n}=zc.TUIServer.TUICore.config.i18n.useI18n(),r=Kn.oR&&(0,Kn.oR)(),s=(0,o.reactive)({showSelectDialog:!1,showCall:!1,showGroupUserDialog:!1,isH5:!1,isMute:!1,isHomeMenuOpen:!1,conversation:{},showTitle:"",searchUserList:[],memberList:[],mediaType:0,showUnsupportDialog:!1,errorContent:"",errorLink:{}}),a=(0,o.ref)();(0,o.watchEffect)((()=>{s.showSelectDialog=e.show,s.isMute=e.isMute,s.isH5=e.isH5,s.conversation=e.conversation})),(0,o.watch)((()=>s.showCall),((e,t)=>{e!==t&&s.showCall&&l()}));const i=()=>{s.isMute||(s.showSelectDialog=!0)};(0,uo.i9H)(a,(()=>{s.showSelectDialog=!1}));const l=()=>{s.isHomeMenuOpen=!!document?.getElementsByClassName("home-menu")?.length},c=e=>{if(s.showSelectDialog=!1,s.mediaType=e,!zc?.TUIServer?.TUICore?.TUIServer?.TUICallKit)return v(),void Yn.getInstance().reportEvent({name:"callOptions",ext1:"call-uninstall"});switch(Yn.getInstance().reportEvent({name:"callOptions",ext1:"clickCall-success"}),window?.TUIKitTUICore?.isOfficial&&r?.commit("handleTask",6),s.conversation?.type){case zc.TUIServer.TUICore.TIM.TYPES.CONV_C2C:u(s.conversation,e),Yn.getInstance().reportEvent({name:"callOptions",ext1:"call-c2c"});break;case zc.TUIServer.TUICore.TIM.TYPES.CONV_GROUP:p(e),Yn.getInstance().reportEvent({name:"callOptions",ext1:"call-group"});break;default:break}},u=async(e,t,n=[])=>{const o=e.type;switch(o){case zc.TUIServer.TUICore.TIM.TYPES.CONV_C2C:try{await zc.TUIServer.TUICore.TUIServer.TUICallKit.call({userID:e?.userProfile?.userID,type:t})}catch(r){v(r)}break;case zc.TUIServer.TUICore.TIM.TYPES.CONV_GROUP:try{await zc.TUIServer.TUICore.TUIServer.TUICallKit.groupCall({userIDList:n,groupID:e?.groupProfile?.groupID,type:t})}catch(r){v(r)}break;default:break}},d=(e,t)=>(e.type!==zc.TUIServer.TUICore.TIM.TYPES.CONV_C2C||e?.userProfile?.userID!==zc?.TUIServer?.TUICore?.TUIServer?.TUIProfile?.currentStore?.profile?.userID)&&(Yn.getInstance().reportEvent({name:"callOptions",ext1:"clickCall"}),!0),p=e=>{s.showGroupUserDialog=!0,s.showTitle=n(1===e?"TUIChat.发起群语音":"TUIChat.发起群视频");const t={groupID:s?.conversation?.groupProfile?.groupID,count:100,offset:0};zc?.TUIServer?.TUICore?.TUIServer?.TUIGroup?.getGroupMemberList(t)?.then((e=>{const t=s.conversation?.groupProfile?.selfInfo?.userID;let n=[];if(s?.conversation?.groupProfile?.muteAllMembers)n=[];else{const o=(new Date).getTime();n=e.data.memberList.filter((e=>e?.userID!==t&&(!(1e3*e?.muteUntil-o>0)&&e)))}s?.conversation?.groupProfile?.muteAllMembers&&(n=[]),s.memberList=n,s.searchUserList=n}))},h=async e=>{const t=s.memberList?.filter((t=>t?.userID===e));s.searchUserList=t?.length?t:s.memberList},m=e=>{s.searchUserList=s.memberList,s.showGroupUserDialog=!1;const t=e?.map((e=>e?.userID));u(s.conversation,s.mediaType,t)},g=()=>{s.showGroupUserDialog=!1,s.mediaType=0},f=e=>{e&&(window.open(e),Yn.getInstance().reportEvent({name:"openLink",ext1:"callkit-doc"}))},v=e=>{e?e?.message?.indexOf("The package you purchased does not support this ability.")>=0?(s.showUnsupportDialog=!0,s.errorContent=n("TUIChat.您当前购买使用的套餐包暂未开通此功能"),s.errorLink=ei.purchase):(s.errorContent=e?.message||e,s.showUnsupportDialog=!1,s.errorLink={}):(s.showUnsupportDialog=!0,s.errorContent=n("TUIChat.检测到您暂未集成TUICallKit，无法体验音视频通话功能"),s.errorLink=ei.implement)};return{...(0,o.toRefs)(s),toggleShowSelectDialog:i,dialog:a,onClickCall:c,handleCallDialogPosition:l,handleCall:u,handleGroupDialog:p,handleSearch:h,submit:m,cancle:g,handleShowCallIcon:d,openLink:f,handleUnsupportDialog:v}}});var Fc=zc;const $c=(0,s.Z)(Fc,[["render",Gc],["__scopeId","data-v-7cf577d0"]]);var Zc=$c,Yc=Zc,Kc=n(6365);const Wc=e=>((0,o.pushScopeId)("data-v-5e44e628"),e=e(),(0,o.popScopeId)(),e),qc=["src"],Xc=Wc((()=>(0,o.createElementVNode)("i",{class:"icon icon-left-arrow"},null,-1))),Jc=[Xc],Qc=Wc((()=>(0,o.createElementVNode)("i",{class:"icon icon-right-arrow"},null,-1))),eu=[Qc],tu={class:"actions-bar"},nu={class:"image-counter"};var ou=(0,o.defineComponent)({__name:"imagePreviewer",props:{imageList:{type:Array,default:()=>[]},currentImage:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,r=(0,o.ref)(1),s=(0,o.ref)(0),a=(0,o.ref)(.1),i=(0,o.ref)(0),l=(0,o.ref)(),c=(0,o.ref)(),{isH5:u}=(0,Kc.Z)();let d=0,p={},h=!1,m=!1,g=null;(0,o.watchEffect)((()=>{i.value=n.imageList.findIndex((e=>e.ID===n.currentImage.ID))}));const f=e=>{e.preventDefault(),I(e),E(e)},v=e=>{e.preventDefault(),h=!0,e.touches&&2===e.touches.length&&(m=!0,b(e))},y=e=>{e.preventDefault();let t=0,n=0;if(m)g||(m=!1,delete p.pageX2,delete p.pageY2,g=setTimeout((()=>{g=null}),200));else if(null===g){switch(h){case!0:t=e?.changedTouches[0]?.pageX,n=t-d,n>100?M():n<-100&&U();break;case!1:_();break}g=setTimeout((()=>{g=null}),200)}},k=e=>{m=!1,delete p.pageX1,delete p.pageY1},w=e=>{if(e.preventDefault(),0!==Math.abs(e.deltaX)&&0!==Math.abs(e.deltaY))return;let t=r.value;t+=e.deltaY*(e.ctrlKey?-.01:.002),t=Math.min(Math.max(.125,t),4),r.value=t},I=e=>{d=e?.changedTouches[0]?.pageX,h=!1},E=e=>{let t=e?.touches[0],n=e?.touches[1];p.pageX1=t?.pageX,p.pageY1=t?.pageY,n&&(p.pageX2=n?.pageX,p.pageY2=n?.pageY)},b=e=>{let t=e?.touches[0],n=e?.touches[1];n&&((0,go.hj)(p.pageX2)||(p.pageX2=n.pageX),(0,go.hj)(p.pageY2)||(p.pageY2=n.pageY));const o=(e,t,n,o)=>Math.hypot(n-e,o-t);if(!(0,go.hj)(p.pageX1)||!(0,go.hj)(p.pageY1)||!(0,go.hj)(p.pageX2)||!(0,go.hj)(p.pageY2))return;let s=o(t.pageX,t.pageY,n.pageX,n.pageY)/o(p.pageX1,p.pageY1,p.pageX2,p.pageY2);r.value=Math.min(Math.max(.5,r.value*s),4)};(0,o.onMounted)((()=>{l?.value?.addEventListener("touchstart",f),l?.value?.addEventListener("touchmove",v),l?.value?.addEventListener("touchend",y),l?.value?.addEventListener("touchcancel;",k),l?.value?.addEventListener("wheel",w),document?.addEventListener("keydown",C)}));const C=e=>{e.preventDefault(),27===e?.keyCode&&_()},T=()=>{r.value+=.1},S=()=>{r.value=r.value-.1>a.value?r.value-.1:a.value},_=()=>{t("close")},N=()=>{s.value-=90},D=()=>{s.value+=90},U=()=>{c.value.style.transition="0.5s",i.value<n.imageList.length-1&&i.value++,B()},M=()=>{c.value.style.transition="0.5s",i.value>0&&i.value--,B()},B=()=>{r.value=1,s.value=0};return(0,o.onUnmounted)((()=>{l?.value?.removeEventListener("touchstart",f),l?.value?.removeEventListener("touchmove",v),l?.value?.removeEventListener("touchend",y),l?.value?.removeEventListener("touchcancel;",k),l?.value?.removeEventListener("wheel",w),document?.removeEventListener("keydown",C)})),(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["image-previewer",[(0,o.unref)(u)&&"image-previewer-h5"]])},[(0,o.createElementVNode)("div",{class:"image-wrapper",ref_key:"image",ref:l},[(0,o.createElementVNode)("ul",{class:"image-list",style:(0,o.normalizeStyle)({width:100*e.imageList.length+"%",transform:`translateX(-${100*i.value/e.imageList.length}%)`}),ref_key:"ul",ref:c},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.imageList,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"image-item",key:t},[(0,o.createElementVNode)("img",{class:"image-preview",style:(0,o.normalizeStyle)({transform:`scale(${r.value}) rotate(${s.value}deg)`}),src:e?.payload?.imageInfoArray[0]?.url},null,12,qc)])))),128))],4)],512),(0,o.withDirectives)((0,o.createElementVNode)("i",{class:"icon icon-close",onClick:_},null,512),[[o.vShow,!(0,o.unref)(u)]]),(0,o.withDirectives)((0,o.createElementVNode)("div",{class:"image-button image-button-left",onClick:M},Jc,512),[[o.vShow,!(0,o.unref)(u)&&i.value>0]]),(0,o.withDirectives)((0,o.createElementVNode)("div",{class:"image-button image-button-right",onClick:U},eu,512),[[o.vShow,!(0,o.unref)(u)&&i.value<e.imageList?.length-1]]),(0,o.createElementVNode)("div",tu,[(0,o.createElementVNode)("i",{class:"icon icon-zoom-in",onClick:T}),(0,o.createElementVNode)("i",{class:"icon icon-zoom-out",onClick:S}),(0,o.createElementVNode)("i",{class:"icon icon-refresh-left",onClick:N}),(0,o.createElementVNode)("i",{class:"icon icon-refresh-right",onClick:D}),(0,o.createElementVNode)("span",nu,(0,o.toDisplayString)(i.value+1)+" / "+(0,o.toDisplayString)(e.imageList.length),1)])],2))}});const ru=(0,s.Z)(ou,[["__scopeId","data-v-5e44e628"]]);var su=ru,au=su;let iu={Face:wi,Image:_i,Video:Vi,File:Hi,Evaluate:kl,Words:ol,Call:Yc};const lu={Forward:Yi},cu={TypingHeader:Tl,ReadReceiptDialog:Wl,Replies:Uc,ImagePreviewer:au};function uu(e){let t={};switch(e){case"send":t=iu;break;case"message":t=lu;break;case"other":t=cu;break;default:break}return t}const du=e=>{const t={...iu,...lu,...cu};Object.keys(t).forEach((e=>{t[e].TUIServer=gu.server})),ri.TUIServer=gu.server,ri.components={...ri.components,...t},e.component(gu.name,ri)},pu=e=>(gu.server=new Ce(e),e.component(gu.name,gu),gu),hu=e=>{iu={...iu,...e}},mu=e=>{e.map((e=>(delete iu[e],e)))},gu={name:"TUIChat",component:ri,server:Ce,sendComponents:iu,messageComponents:lu,otherComponents:cu,install:du,plugin:pu,setPluginComponents:hu,removePluginComponents:mu};var fu=gu;class vu extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),(0,R.Z)(this,"storeCallback",void 0),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIConversation",{},this.updateStore.bind(this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this?.currentStore?.conversationData&&(this.currentStore.conversationData.list=e.conversationList,e?.conversationList?.filter((e=>{e?.userProfile?.userID&&this.currentStore.userIDList.add(e?.userProfile?.userID)})),this.currentStore.userStatusList=this.TUICore.TUIServer.TUIContact.currentStore?.userStatusList)}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUIConversation",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.NET_STATE_CHANGE,this.handleNetStateChange,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate),this.TUICore.tim.off(this.TUICore.TIM.EVENT.NET_STATE_CHANGE,this.handleNetStateChange)}handleConversationListUpdate(e){this.handleFilterSystem(e.data)}handleNetStateChange(e){this.currentStore.netWork=e?.data?.state||""}handleFilterSystem(e){const t={allConversationList:e,conversationList:[]},n=e.filter((e=>e?.conversationID===this?.currentStore?.currentConversationID));return 0===n.length&&this.handleCurrentConversation({}),t.conversationList=e.filter((e=>e.type!==this.TUICore.TIM.TYPES.CONV_SYSTEM)),this.store.allConversationList=t.allConversationList,this.store.conversationList=t.conversationList,t}async setMessageRead(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setMessageRead({conversationID:e});t(n)}catch(o){n(o)}}))}async deleteConversation(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.deleteConversation(e);t(n)}catch(o){n(o)}}))}async pinConversation(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.pinConversation(e);t(n)}catch(o){n(o)}}))}async muteConversation(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setMessageRemindType(e);t(n)}catch(o){n(o)}}))}async getConversationProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getConversationProfile(e);t(n)}catch(o){n(o)}}))}async getConversationList(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getConversationList();this.handleFilterSystem(t.data.conversationList),e(t)}catch(n){t(n)}}))}async getUserProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}}))}async bind(e){return this.currentStore=e,await this.getConversationList(),this.currentStore.userStatusList=this.TUICore.TUIServer.TUIContact.currentStore?.userStatusList,this.currentStore}handleCurrentConversation(e){this.TUICore.getStore().TUIChat.conversation=e||{},e?.conversationID?(this.currentStore.currentConversationID===e?.conversationID&&(this.currentStore.currentConversationID=""),this.currentStore.currentConversationID&&this.setMessageRead(this.currentStore.currentConversationID),this.currentStore.currentConversationID=e?.conversationID,this.setMessageRead(e.conversationID)):this.currentStore.currentConversationID=""}}const yu=e=>((0,o.pushScopeId)("data-v-3c01af5d"),e=e(),(0,o.popScopeId)(),e),ku={class:"TUI-conversation"},wu={key:0,class:"network"},Iu=yu((()=>(0,o.createElementVNode)("i",{class:"icon icon-error"},"!",-1))),Eu={class:"TUI-conversation-list"};function bu(e,t,n,r,s,a){const i=(0,o.resolveComponent)("TUIConversationList");return(0,o.openBlock)(),(0,o.createElementBlock)("div",ku,[e.isNetwork?((0,o.openBlock)(),(0,o.createElementBlock)("div",wu,[Iu,(0,o.createElementVNode)("p",null,"️"+(0,o.toDisplayString)(e.$t("TUIConversation.网络异常，请您检查网络设置")),1)])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("main",Eu,[(0,o.createVNode)(i,{currentID:e.currentConversationID,data:e.conversationData,onHandleItem:e.handleCurrentConversation,isH5:e.env.isH5,displayOnlineStatus:e.displayOnlineStatus,userStatusList:e.userStatusList},null,8,["currentID","data","onHandleItem","isH5","displayOnlineStatus","userStatusList"])])])}function Cu(e,t,n,r,s,a){const i=(0,o.resolveComponent)("LiteItem");return(0,o.openBlock)(),(0,o.createElementBlock)("ul",{class:(0,o.normalizeClass)(["TUI-conversation-list",[e.isH5?"list-h5":""]]),ref:"list",onMousewheel:t[0]||(t[0]=(...t)=>e.scrollChange&&e.scrollChange(...t)),onScroll:t[1]||(t[1]=(...t)=>e.scrollChange&&e.scrollChange(...t))},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.data.list,((t,n)=>((0,o.openBlock)(),(0,o.createBlock)(i,{isH5:e.isH5,key:n,currentID:e.currentID,conversation:t,toggleID:e.toggleID,handleConversation:{avator:e.data.handleItemAvator,name:e.data.handleItemName,showAt:e.data.handleShowAt,showMessage:e.data.handleShowMessage,time:e.data.handleItemTime,userID:e.data.handleItemUserID},displayOnlineStatus:e.displayOnlineStatus,userStatusList:e.userStatusList,onToggle:e.handleToggleListItem,onOpen:e.handleListItem,onHandle:e.handleItem,types:e.types},null,8,["isH5","currentID","conversation","toggleID","handleConversation","displayOnlineStatus","userStatusList","onToggle","onOpen","onHandle","types"])))),128))],34)}var Tu=n.p+"img/mute.5f61ea4c.svg";const Su=e=>((0,o.pushScopeId)("data-v-dd15d494"),e=e(),(0,o.popScopeId)(),e),_u=["id"],Nu={class:"left"},Du=["src"],Uu={key:1,class:"num"},Mu={key:2,class:"num-notify"},Bu={class:"content"},xu={class:"content-header"},Vu={class:"name"},Lu={class:"middle-box"},Ru={key:0,class:"middle-box-at"},Au={class:"content-footer"},Pu={class:"time"},Ou={key:0,class:"mute-icon",src:Tu},Gu=Su((()=>(0,o.createElementVNode)("i",null,null,-1))),Hu={key:0,class:"dialog dialog-item",ref:"dialog"};function ju(e,t,n,r,s,a){const i=(0,o.resolveDirective)("TUILongPress");return(0,o.openBlock)(),(0,o.createElementBlock)("li",{ref:"content",class:(0,o.normalizeClass)(["TUI-conversation-content",[e.currentID===e.conversation.conversationID&&"selected",e.conversation.isPinned&&"pinned",e.isH5?"list-item-h5":""]]),id:e.conversation.conversationID},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"TUI-conversation-item",onClick:t[0]||(t[0]=(0,o.withModifiers)((t=>e.handleListItem(e.conversation)),["prevent","stop"])),onContextmenu:t[1]||(t[1]=(0,o.withModifiers)(((...t)=>e.toggleDialog&&e.toggleDialog(...t)),["prevent","right"]))},[(0,o.createElementVNode)("aside",Nu,[(0,o.createElementVNode)("img",{class:"avatar",src:e.handleConversation?.avator(e.conversation)},null,8,Du),e.showUserOnlineStatus()?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["online-status",1===e.userStatusList?.get(e.conversation?.userProfile?.userID)?.statusType?"online-status-online":"online-status-offline"])},null,2)):(0,o.createCommentVNode)("",!0),e.conversation.unreadCount>0&&"AcceptNotNotify"!==e.conversation.messageRemindType?((0,o.openBlock)(),(0,o.createElementBlock)("span",Uu,(0,o.toDisplayString)(e.conversation.unreadCount>99?"99+":e.conversation.unreadCount),1)):(0,o.createCommentVNode)("",!0),e.conversation.unreadCount>0&&"AcceptNotNotify"===e.conversation.messageRemindType?((0,o.openBlock)(),(0,o.createElementBlock)("span",Mu)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",Bu,[(0,o.createElementVNode)("div",xu,[(0,o.createElementVNode)("label",null,[(0,o.createElementVNode)("p",Vu,(0,o.toDisplayString)(e.handleConversation?.name(e.conversation)),1)]),(0,o.createElementVNode)("div",Lu,["GROUP"===e.conversation.type&&e.conversation.groupAtInfoList.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("span",Ru,(0,o.toDisplayString)(e.handleConversation?.showAt(e.conversation)),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.handleConversation?.showMessage(e.conversation)),1)])]),(0,o.createElementVNode)("div",Au,[(0,o.createElementVNode)("span",Pu,(0,o.toDisplayString)(e.handleConversation?.time(e.conversation.lastMessage.lastTime)),1),"AcceptNotNotify"===e.conversation.messageRemindType?((0,o.openBlock)(),(0,o.createElementBlock)("img",Ou)):(0,o.createCommentVNode)("",!0),Gu])])],32)),[[i,e.toggleDialog,void 0,{self:!0}]]),e.toggle?((0,o.openBlock)(),(0,o.createElementBlock)("div",Hu,[(0,o.createElementVNode)("p",{class:"conversation-options",onClick:t[2]||(t[2]=(0,o.withModifiers)((t=>e.handleItem("delete")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIConversation.删除会话")),1),e.conversation.isPinned?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:0,class:"conversation-options",onClick:t[3]||(t[3]=(0,o.withModifiers)((t=>e.handleItem("ispinned")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIConversation.置顶会话")),1)),e.conversation.isPinned?((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:1,class:"conversation-options",onClick:t[4]||(t[4]=(0,o.withModifiers)((t=>e.handleItem("dispinned")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIConversation.取消置顶")),1)):(0,o.createCommentVNode)("",!0),""===e.conversation.messageRemindType||"AcceptAndNotify"===e.conversation.messageRemindType?((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:2,class:"conversation-options",onClick:t[5]||(t[5]=(0,o.withModifiers)((t=>e.handleItem("mute")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIConversation.消息免打扰")),1)):(0,o.createCommentVNode)("",!0),"AcceptNotNotify"===e.conversation.messageRemindType?((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:3,class:"conversation-options",onClick:t[6]||(t[6]=(0,o.withModifiers)((t=>e.handleItem("notMute")),["stop"]))},(0,o.toDisplayString)(e.$t("TUIConversation.取消免打扰")),1)):(0,o.createCommentVNode)("",!0)],512)):(0,o.createCommentVNode)("",!0)],10,_u)}const zu=(0,o.defineComponent)({props:{conversation:{type:Object,default:()=>({})},handleConversation:{type:Object,default:()=>({})},currentID:{type:String,default:()=>""},toggleID:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},displayOnlineStatus:{type:Boolean,default:()=>!1},userStatusList:{type:Map,default:()=>new Map},types:{type:Object,default:()=>({})}},setup(e,t){const n=(0,o.reactive)({conversation:{},currentID:"",currentConversation:{},toggle:!1,currentuserID:"",conversationType:"",loop:0,displayOnlineStatus:!1,userStatusList:new Map}),r=(0,o.ref)(),s=(0,o.ref)();(0,uo.i9H)(s,(()=>{!0===n.toggle&&t.emit("toggle","")})),(0,o.watchEffect)((()=>{n.conversation=e.conversation,n.currentID=e.currentID,n.toggle=!1,n.displayOnlineStatus=e.displayOnlineStatus,n.userStatusList=e.userStatusList,e.toggleID===e.conversation.conversationID&&(n.toggle=!0)})),(0,o.watch)((()=>n.toggle),(e=>{e&&(0,o.nextTick)((()=>{const e=(0,uo.rBN)(r),t=s?.value?.offsetParent,n=(0,uo.rBN)(t);e.top.value-n.top.value-e.height.value-30>0&&(r.value.style.top="auto",r.value.style.bottom="30px")}))}));const a=e=>{t.emit("open",e),t.emit("toggle","")},i=e=>{e?.target?.oncontextmenu&&(e.target.oncontextmenu=function(){return!1}),t.emit("toggle",n.conversation.conversationID)},l=e=>{t.emit("handle",{name:e,conversation:n.conversation}),t.emit("toggle","")},c=()=>!(!n.displayOnlineStatus||n.conversation?.type!==e.types.CONV_C2C);return{...(0,o.toRefs)(n),handleListItem:a,handleItem:l,dialog:r,content:s,toggleDialog:i,showUserOnlineStatus:c}}});var Fu=zu;const $u=(0,s.Z)(Fu,[["render",ju],["__scopeId","data-v-dd15d494"]]);var Zu=$u,Yu=Zu;const Ku=(0,o.defineComponent)({props:{data:{type:Object,default:()=>({})},currentID:{type:String,default:()=>""},isH5:{type:Boolean,default:()=>!1},displayOnlineStatus:{type:Boolean,default:()=>!1},userStatusList:{type:Map,default:()=>new Map}},components:{LiteItem:Yu},setup(e,t){const n=Ku?.TUIServer,r=(0,o.reactive)({data:{},currentID:"",toggleID:"",displayOnlineStatus:!1,userStatusList:new Map,types:n.TUICore.TIM.TYPES}),s=(0,o.ref)();(0,o.watchEffect)((()=>{r.data=e.data,r.currentID=e.currentID,r.displayOnlineStatus=e.displayOnlineStatus,r.userStatusList=e.userStatusList})),(0,o.watch)((()=>e.userStatusList),(()=>{r.userStatusList=e.userStatusList}),{deep:!0});const a=e=>{t.emit("handleItem",e)},i=e=>{const{name:t,conversation:n}=e;switch(Yn.getInstance().reportEvent({name:"conversationOptions",ext1:"conversationOptions"}),t){case"delete":l(n);break;case"ispinned":c(t,n);break;case"dispinned":c(t,n);break;case"mute":u(t,n);break;case"notMute":u(t,n);break}},l=e=>{n.deleteConversation(e.conversationID).then((e=>{Yn.getInstance().reportEvent({name:"conversationOptions",ext1:"conversationDelete"});const{conversationID:t}=e.data,{conversation:o}=n.TUICore.getStore().TUIChat;o.conversationID===t&&(n.TUICore.getStore().TUIChat.conversation={conversationID:""})}))},c=(e,t)=>{const o={conversationID:t.conversationID,isPinned:!0};"dispinned"===e&&(o.isPinned=!1),console.log("dispinned",o),n.pinConversation(o)},u=(e,t)=>{const o={messageRemindType:n.TUICore.TIM.TYPES.MSG_REMIND_ACPT_NOT_NOTE};t.type===n.TUICore.TIM.TYPES.CONV_C2C?o.userIDList=[t.userProfile.userID]:t.type===n.TUICore.TIM.TYPES.CONV_GROUP&&(o.groupID=t.groupProfile.groupID),"notMute"===e&&(o.messageRemindType=n.TUICore.TIM.TYPES.MSG_REMIND_ACPT_AND_NOTE),n.muteConversation(o)},d=e=>{r.toggleID=e},p=()=>{r.toggleID&&(r.toggleID="")};return{...(0,o.toRefs)(r),handleListItem:a,handleItem:i,handleToggleListItem:d,list:s,scrollChange:p}}});var Wu=Ku;const qu=(0,s.Z)(Wu,[["render",Cu],["__scopeId","data-v-78caf4f3"]]);var Xu=qu,Ju=Xu;const Qu=(0,o.defineComponent)({name:"TUIConversation",components:{TUIConversationList:Ju},props:{displayOnlineStatus:{type:Boolean,default:!1}},setup(e,t){const n=Qu?.TUIServer,r=(0,o.reactive)({currentConversationID:"",conversationData:{list:[],handleItemAvator:e=>X(e),handleItemName:e=>J(e),handleShowAt:e=>Q(e),handleShowMessage:e=>te(e),handleItemTime:e=>e>0?_o(1e3*e):""},userIDList:new Set,netWork:"",env:n.TUICore.TUIEnv,displayOnlineStatus:!1,userStatusList:n.TUICore.TUIServer.TUIContact?.currentStore?.userStatusList});n.bind(r),Ju.TUIServer=n,(0,o.watch)((()=>r.currentConversationID),(e=>{t.emit("current",e)}),{deep:!0}),(0,o.watch)((()=>e.displayOnlineStatus),(async(e,t)=>{e!==t&&(r.displayOnlineStatus=e,n.TUICore.TUIServer.TUIContact.handleUserStatus(r.displayOnlineStatus,[...r.userIDList]),r.userStatusList=n.TUICore.TUIServer.TUIContact?.currentStore?.userStatusList)}),{immediate:!0}),(0,o.watch)((()=>[...r.userIDList]),(async(e,t)=>{Mo(e,t)||n.TUICore.TUIServer.TUIContact.handleUserStatus(r.displayOnlineStatus,[...r.userIDList])}),{deep:!0});const s=(0,o.computed)((()=>{const e=r.netWork===n.TUICore.TIM.TYPES.NET_STATE_DISCONNECTED,t=r.netWork===n.TUICore.TIM.TYPES.NET_STATE_CONNECTING;return e||t})),a=e=>{n.handleCurrentConversation(e)};return{...(0,o.toRefs)(r),handleCurrentConversation:a,isNetwork:s}}});var ed=Qu;const td=(0,s.Z)(ed,[["render",bu],["__scopeId","data-v-3c01af5d"]]);var nd=td;const od=e=>{nd.TUIServer=sd.server,e.component(sd.name,nd)},rd=e=>(sd.server=new vu(e),e.component(sd.name,sd),sd),sd={name:"TUIConversation",component:nd,server:vu,install:od,plugin:rd};var ad=sd;const id={profile:{}};class ld extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIProfile",id,this.updateStore.bind(this)),this.getMyProfile()}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.profile=JSON.parse(JSON.stringify(e.profile))}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.PROFILE_UPDATED,this.handleProfileUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.PROFILE_UPDATED,this.handleProfileUpdated)}handleProfileUpdated(e){e.data.map((e=>(e.userID===this.store.profile.userID&&(this.store.profile={},this.store.profile=e),e)))}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUIProfile",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}async getMyProfile(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getMyProfile();this.store.profile=t.data,this.currentStore.profile=JSON.parse(JSON.stringify(this.store.profile)),e(t)}catch(n){t(n)}}))}async getUserProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}}))}async updateMyProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.updateMyProfile(e);this.store.profile=n.data,t(n)}catch(o){n(o)}}))}async bind(e){return this.currentStore=e,this.getMyProfile(),this.currentStore}setEdit(e){return this.currentStore.isEdit=e,this.currentStore.isEdit}}const cd={class:"profile-header"},ud={class:"profile-avatar"},dd=["src"],pd={class:"profile-main"},hd={class:"profile-main-item"},md={class:"profile-main-name"},gd={key:0,class:"gender"},fd={class:"profile-main-item"},vd={class:"profile-main-label"},yd={key:0,class:"profile-main-item"},kd={class:"profile-main-label"},wd={key:0,class:"profile-main"},Id={class:"profile-main-item"},Ed={class:"profile-main-label"},bd={class:"profile-main-item"},Cd={class:"profile-main-label"},Td={key:1,class:"icon icon-right"};function Sd(e,t,n,r,s,a){const i=(0,o.resolveComponent)("TUIProfileEdit");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["TUI-profile",[e.env.isH5?"TUI-profile-h5":""]])},[e.isEdit?((0,o.openBlock)(),(0,o.createBlock)(i,{key:1,userInfo:e.profile,isH5:e.env.isH5,onSubmit:e.submit,onCancel:e.cancel},null,8,["userInfo","isH5","onSubmit","onCancel"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"profile",onClick:t[0]||(t[0]=(...t)=>e.toggleEdit&&e.toggleEdit(...t))},[(0,o.createElementVNode)("header",cd,[(0,o.createElementVNode)("aside",ud,[(0,o.createElementVNode)("img",{class:"avatar",src:e.profile.avatar?e.profile.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,dd)]),(0,o.createElementVNode)("ul",pd,[(0,o.createElementVNode)("li",hd,[(0,o.createElementVNode)("h1",md,(0,o.toDisplayString)(e.profile.nick||"-"),1),e.env.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("p",gd,(0,o.toDisplayString)(e.profile.gender?e.$t(`TUIProfile.${e.genderLabel[e.profile.gender]}`):""),1))]),(0,o.createElementVNode)("li",fd,[(0,o.createElementVNode)("label",vd,(0,o.toDisplayString)(e.$t("TUIProfile.用户ID"))+":",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.profile.userID),1)]),e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("li",yd,[(0,o.createElementVNode)("label",kd,(0,o.toDisplayString)(e.$t("TUIProfile.个性签名"))+":",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.profile.selfSignature||e.$t("TUIProfile.暂未设置")),1)])):(0,o.createCommentVNode)("",!0)])]),e.env.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("ul",wd,[(0,o.createElementVNode)("li",Id,[(0,o.createElementVNode)("label",Ed,(0,o.toDisplayString)(e.$t("TUIProfile.个性签名")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.profile.selfSignature||e.$t("TUIProfile.暂未设置")),1)]),(0,o.createElementVNode)("li",bd,[(0,o.createElementVNode)("label",Cd,(0,o.toDisplayString)(e.$t("TUIProfile.出生年月")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.profile.birthday?e.profile.birthday:e.$t("TUIProfile.暂未设置")),1)])])),e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Td)):(0,o.createCommentVNode)("",!0)]))],2)}const _d={class:"edit-header"},Nd={class:"edit-header-title"},Dd={class:"edit-list"},Ud={class:"edit-list-item space-top"},Md={key:0},Bd=["src"],xd={key:1,class:"avatar-list"},Vd=["onClick"],Ld=["src"],Rd={key:0,class:"icon icon-right"},Ad={class:"edit-list-item space-top"},Pd={key:0},Od={key:0,class:"icon icon-right"},Gd={class:"edit-list-item"},Hd={class:"edit-list-item-content"},jd={class:"edit-list-item space-top"},zd={key:0},Fd={key:0,class:"icon icon-right"},$d={class:"edit-list-item"},Zd={key:0},Yd={key:1,class:"gender-list"},Kd=["onClick"],Wd={class:"name"},qd={key:0,class:"icon icon-right"},Xd={class:"edit-list-item"},Jd={key:0},Qd={key:0,class:"icon icon-right"},ep={key:0,class:"edit-footer"},tp={class:"mask-main"},np={class:"edit-h5-header"},op={class:"edit-h5-main"},rp={key:0,class:"list"},sp=["onClick"],ap=["src"],ip={key:1,class:"input"},lp=["placeholder"],cp=["type","placeholder"],up={key:2},dp={class:"edit-h5-footer"},pp=["disabled"];function hp(e,t,n,r,s,a){const i=(0,o.resolveComponent)("Datepicker");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["edit",[e.isH5?"edit-h5":""]])},[(0,o.createElementVNode)("header",_d,[e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-back",onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("h1",Nd,(0,o.toDisplayString)(e.$t("TUIProfile.资料设置")),1)]),(0,o.createElementVNode)("ul",Dd,[(0,o.createElementVNode)("li",Ud,[(0,o.createElementVNode)("main",{class:"edit-list-item-content",onClick:t[1]||(t[1]=t=>e.setProfile("avatar"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.头像")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",Md,[(0,o.createElementVNode)("img",{src:e.profile.avatar?e.profile.avatar:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Bd)])):((0,o.openBlock)(),(0,o.createElementBlock)("ul",xd,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.avatarList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"avatar-list-item",key:n,onClick:n=>e.chooseAvatar(t)},[(0,o.createElementVNode)("img",{class:(0,o.normalizeClass)([e.profile.avatar===t.avatar&&"selected"]),src:t.avatar},null,10,Ld)],8,Vd)))),128))]))]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Rd)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("li",Ad,[(0,o.createElementVNode)("main",{class:"edit-list-item-content",onClick:t[3]||(t[3]=t=>e.setProfile("nick"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.昵称")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",Pd,(0,o.toDisplayString)(e.profile.nick),1)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.profile.nick=t)},null,512)),[[o.vModelText,e.profile.nick]])]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Od)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("li",Gd,[(0,o.createElementVNode)("main",Hd,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.账号")),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.profile.userID),1)])]),(0,o.createElementVNode)("li",jd,[(0,o.createElementVNode)("main",{class:"edit-list-item-content",onClick:t[5]||(t[5]=t=>e.setProfile("selfSignature"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.个性签名")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",zd,(0,o.toDisplayString)(e.profile.selfSignature),1)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.profile.selfSignature=t)},null,512)),[[o.vModelText,e.profile.selfSignature]])]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Fd)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("li",$d,[(0,o.createElementVNode)("main",{class:"edit-list-item-content",onClick:t[6]||(t[6]=t=>e.setProfile("gender"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.性别")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",Zd,(0,o.toDisplayString)(e.profile.gender?e.$t(`TUIProfile.${e.genderLabel[e.profile.gender]}`):""),1)):((0,o.openBlock)(),(0,o.createElementBlock)("ul",Yd,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.type,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"gender-list-item",key:n,onClick:n=>e.showChooseGender(t)},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["gender",[e.profile.gender===t.type&&"gender-selected"]])},null,2),(0,o.createElementVNode)("p",Wd,(0,o.toDisplayString)(e.$t(`TUIProfile.${t.label}`)),1)],8,Kd)))),128))]))]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",qd)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("li",Xd,[(0,o.createElementVNode)("main",{class:"edit-list-item-content",onClick:t[7]||(t[7]=t=>e.setProfile("birthday"))},[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIProfile.出生年月")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",Jd,(0,o.toDisplayString)(e.profile.birthday),1)):((0,o.openBlock)(),(0,o.createBlock)(i,{key:1,placeholder:e.$t("TUIProfile.请选择出生日期"),enableTimePicker:!1,format:e.format,previewFormat:e.format,modelValue:e.birthday,"onUpdate:modelValue":e.showBirthday},null,8,["placeholder","format","previewFormat","modelValue","onUpdate:modelValue"]))]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",Qd)):(0,o.createCommentVNode)("",!0)])]),e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("footer",ep,[(0,o.createElementVNode)("button",{class:"btn-default",onClick:t[8]||(t[8]=(...t)=>e.cancel&&e.cancel(...t))},(0,o.toDisplayString)(e.$t("TUIProfile.取消")),1),(0,o.createElementVNode)("button",{class:"btn-submit",onClick:t[9]||(t[9]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("TUIProfile.保存")),1)])),e.setName&&e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:1,class:"mask",onClick:t[14]||(t[14]=(0,o.withModifiers)(((...t)=>e.closeMask&&e.closeMask(...t)),["self"]))},[(0,o.createElementVNode)("div",tp,[(0,o.createElementVNode)("header",np,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t(`TUIProfile.${e.editConfig.title}`)),1),(0,o.createElementVNode)("span",{class:"close",onClick:t[10]||(t[10]=(...t)=>e.closeMask&&e.closeMask(...t))},(0,o.toDisplayString)(e.$t("关闭")),1)]),(0,o.createElementVNode)("main",op,["select"===e.editConfig.type?((0,o.openBlock)(),(0,o.createElementBlock)("ul",rp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.editConfig.list,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:"list-item",key:n,onClick:n=>e.choose(t)},[t?.avatar?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,class:(0,o.normalizeClass)([e.editConfig.value===t.avatar&&"selected"]),src:t.avatar},null,10,ap)):((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:(0,o.normalizeClass)([e.editConfig.value===t.type&&"selected"])},(0,o.toDisplayString)(e.$t(`TUIProfile.${t.label}`)),3))],8,sp)))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)("div",ip,["textarea"===e.editConfig.type?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("textarea",{key:0,placeholder:e.editConfig.placeholder,"onUpdate:modelValue":t[11]||(t[11]=t=>e.editConfig.value=t)},null,8,lp)),[[o.vModelText,e.editConfig.value]]):"date"===e.editConfig.type?((0,o.openBlock)(),(0,o.createBlock)(i,{key:1,class:"datePicker",placeholder:e.$t("TUIProfile.请选择出生日期"),enableTimePicker:!1,format:e.format,previewFormat:e.format,modelValue:e.birthday,"onUpdate:modelValue":e.showBirthday},null,8,["placeholder","format","previewFormat","modelValue","onUpdate:modelValue"])):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:2,type:e.editConfig.type,placeholder:e.$t(`TUIProfile.${e.editConfig.placeholder}`),"onUpdate:modelValue":t[12]||(t[12]=t=>e.editConfig.value=t)},null,8,cp)),[[o.vModelDynamic,e.editConfig.value]])])),e.editConfig.subText?((0,o.openBlock)(),(0,o.createElementBlock)("sub",up,(0,o.toDisplayString)(e.$t(`TUIProfile.${e.editConfig.subText}`)),1)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("footer",dp,[(0,o.createElementVNode)("button",{class:"btn btn-submit",disabled:!e.editConfig.value,onClick:t[13]||(t[13]=(...t)=>e.submit&&e.submit(...t))},(0,o.toDisplayString)(e.$t("确定")),9,pp)])])])):(0,o.createCommentVNode)("",!0)],2)}var mp=n(5916);const gp=(0,o.defineComponent)({props:{userInfo:{type:Object,default:()=>({})},isH5:{type:Boolean,default:()=>!1}},components:{Datepicker:mp.Z},setup(e,t){const n=gp?.TUIServer,r=(0,o.reactive)({profile:{},isEdit:!1,avatarList:[{name:"avatar_01",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_1.png"},{name:"avatar_02",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_2.png"},{name:"avatar_03",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_3.png"},{name:"avatar_04",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_4.png"},{name:"avatar_05",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_5.png"},{name:"avatar_06",avatar:" https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_6.png"}],type:[{label:"男",type:n.TUICore.TIM.TYPES.GENDER_MALE},{label:"女",type:n.TUICore.TIM.TYPES.GENDER_FEMALE}],genderLabel:{[n.TUICore.TIM.TYPES.GENDER_MALE]:"男",[n.TUICore.TIM.TYPES.GENDER_FEMALE]:"女",[n.TUICore.TIM.TYPES.GENDER_UNKNOWN]:"不显示"},setName:"",editConfig:{title:"",list:[],type:"",subText:"",placeholder:"",value:""}}),s=e=>{const t=e.getDate()>9?e.getDate():`0${e.getDate()}`,n=e.getMonth()>8?e.getMonth()+1:`0${e.getMonth()+1}`,o=e.getFullYear();return`${o}${n}${t}`};(0,o.watchEffect)((()=>{r.profile=JSON.parse(JSON.stringify(e.userInfo))}));const a=(0,o.computed)((()=>{let t=r.profile.birthday;return"birthday"===r.setName&&e.isH5&&(t=r.editConfig.value),i(t)})),i=e=>{const t=`${e}`;if(8===t.length){const e=t.slice(0,4),n=t.slice(4,6),o=t.slice(-2);return`${e}-${n}-${o}`}return""},l=e=>{r.profile.gender=e.type},c=e=>{r.profile.avatar=e.avatar},u=t=>{e.isH5?r.editConfig.value=t?Number(s(t)):0:r.profile.birthday=t?Number(s(t)):0},d=()=>{e.isH5&&(r.profile[r.setName]=r.editConfig.value,g()),t.emit("submit",r.profile)},p=()=>{t.emit("cancel",r.profile)},h=e=>{switch(r.editConfig.value=`${r.profile[e]}`,r.setName=e,e){case"avatar":r.editConfig.title="选择头像",r.editConfig.list=r.avatarList,r.editConfig.type="select";break;case"nick":r.editConfig.title="设置昵称",r.editConfig.subText="仅限中文、字母、数字和下划线，2-20个字",r.editConfig.placeholder="请输入昵称",r.editConfig.type="text";break;case"gender":r.editConfig.title="性别选择",r.editConfig.list=r.type,r.editConfig.type="select";break;case"selfSignature":r.editConfig.title="个性签名",r.editConfig.type="textarea",r.editConfig.placeholder="请输入内容";break;case"birthday":r.editConfig.title="出生年月",r.editConfig.type="date",r.editConfig.placeholder="请选择出生日期";break;default:break}},m=e=>{r.editConfig.value=e?.avatar||e?.type},g=()=>{r.setName="",r.editConfig={title:"",list:[],type:"",subText:"",placeholder:"",value:""}};return{...(0,o.toRefs)(r),showChooseGender:l,chooseAvatar:c,showBirthday:u,birthday:a,submit:d,cancel:p,setProfile:h,choose:m,closeMask:g,format:s}}});var fp=gp;const vp=(0,s.Z)(fp,[["render",hp],["__scopeId","data-v-25fbecd0"]]);var yp=vp,kp=yp;const wp=(0,o.defineComponent)({name:"TUIProfile",components:{TUIProfileEdit:kp},setup(e,t){const n=wp?.TUIServer,r=(0,o.reactive)({profile:{},isEdit:!1,genderLabel:{[n.TUICore.TIM.TYPES.GENDER_MALE]:"男",[n.TUICore.TIM.TYPES.GENDER_FEMALE]:"女",[n.TUICore.TIM.TYPES.GENDER_UNKNOWN]:"不显示"},env:n.TUICore.TUIEnv});kp.TUIServer=n,n.bind(r);const s=Kn.oR&&(0,Kn.oR)(),a=async e=>{const t={nick:e.nick,avatar:e.avatar,gender:e.gender||n.TUICore.TIM.TYPES.GENDER_UNKNOWN,selfSignature:e.selfSignature,birthday:e.birthday};n.TUICore.getStore().TUIProfile.profile.nick!==e.nick&&window?.TUIKitTUICore?.isOfficial&&s?.commit("handleTask",2);try{await n.updateMyProfile(t),Yn.getInstance().reportEvent({name:"changeProfile",ext1:"changeProfile"})}catch(o){console.log(o)}r.env.isH5||i()},i=()=>{r.env.isH5?r.isEdit=!1:l()},l=()=>{t.emit("changeStatus")},c=()=>{r.env.isH5&&(r.isEdit=!0)};return{...(0,o.toRefs)(r),submit:a,cancel:i,changeStatus:l,toggleEdit:c}}});var Ip=wp;const Ep=(0,s.Z)(Ip,[["render",Sd],["__scopeId","data-v-51283954"]]);var bp=Ep;const Cp=e=>{bp.TUIServer=Sp.server,e.component(Sp.name,bp)},Tp=e=>(Sp.server=new ld(e),e.component(Sp.name,Sp),Sp),Sp={name:"TUIProfile",component:bp,server:ld,install:Cp,plugin:Tp};var _p=Sp;const Np={};class Dp extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),(0,R.Z)(this,"storeCallback",void 0),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIGroup",Np,this.updateStore.bind(this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.groupList=e.groupList,this.currentStore.searchGroup=e.searchGroup}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated)}handleGroupListUpdated(e){this.store.groupList=e.data}handleGroupAttributesUpdated(e){const{groupID:t,groupAttributes:n}=e.data;console.log(t,n)}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUIGroup",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}async getGroupList(e){return this.handlePromiseCallback((async(t,n)=>{try{let n={};n=e?await this.TUICore.tim.getGroupList(e):await this.TUICore.tim.getGroupList(),this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}}))}getGroupProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}}))}createGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.createGroup(e);t(n)}catch(o){n(o)}}))}dismissGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.dismissGroup(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}}))}updateGroupProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.updateGroupProfile(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}}))}joinGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.joinGroup(e);t(n)}catch(o){n(o)}}))}quitGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.quitGroup(e);t(n)}catch(o){n(o)}}))}searchGroupByID(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.searchGroupByID(e);this.store.searchGroup=n.data.group,t(n)}catch(o){n(o)}}))}getGroupOnlineMemberCount(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupOnlineMemberCount(e);t(n)}catch(o){n(o)}}))}changeGroupOwner(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.changeGroupOwner(e);t(n)}catch(o){n(o)}}))}handleGroupApplication(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}}))}initGroupAttributes(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.initGroupAttributes(e);t(n)}catch(o){n(o)}}))}setGroupAttributes(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setGroupAttributes(e);t(n)}catch(o){n(o)}}))}deleteGroupAttributes(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.deleteGroupAttributes(e);t(n)}catch(o){n(o)}}))}getGroupAttributes(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupAttributes(e);t(n)}catch(o){n(o)}}))}getGroupMemberList(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberList(e);t(n)}catch(o){n(o)}}))}addGroupMember(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.addGroupMember(e);t(n)}catch(o){n(o)}}))}deleteGroupMember(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.deleteGroupMember(e);t(n)}catch(o){n(o)}}))}setGroupMemberMuteTime(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberMuteTime(e);t(n)}catch(o){n(o)}}))}setGroupMemberRole(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberRole(e);t(n)}catch(o){n(o)}}))}setGroupMemberNameCard(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.setGroupMemberNameCard(e);t(n)}catch(o){n(o)}}))}getGroupMemberProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupMemberProfile(e);t(n)}catch(o){n(o)}}))}async bind(e){return this.currentStore=e,await this.getGroupList(),this.currentStore}}const Up={class:"TUI-group"};function Mp(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",Up,"TUIGroup")}const Bp=(0,o.defineComponent)({name:"TUIGroup",components:{},setup(e){const t=Bp.TUIServer,n=(0,o.reactive)({groupList:[],searchGroup:[],searchID:"",currentGroup:null});return t.bind(n),{...(0,o.toRefs)(n)}}});var xp=Bp;const Vp=(0,s.Z)(xp,[["render",Mp],["__scopeId","data-v-f2d329c8"]]);var Lp=Vp;const Rp=e=>{Lp.TUIServer=Pp.server,e.component(Pp.name,Lp)},Ap=e=>(Pp.server=new Dp(e),e.component(Pp.name,Pp),Pp),Pp={name:"TUIGroup",component:Lp,server:Dp,install:Rp,plugin:Ap};var Op=Pp;const Gp={};class Hp extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),(0,R.Z)(this,"storeCallback",void 0),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUIContact",Gp,this.updateStore.bind(this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this.currentStore.groupList=e.groupList,this.currentStore.searchGroup=e.searchGroup,this.currentStore.systemConversation=e.systemConversation,this.currentStore.systemMessageList=e.systemMessageList}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated,this),this.TUICore.tim.on(this.TUICore.TIM.EVENT.USER_STATUS_UPDATED,this.handleUserStatusUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_LIST_UPDATED,this.handleGroupListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.GROUP_ATTRIBUTES_UPDATED,this.handleGroupAttributesUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.handleConversationListUpdate),this.TUICore.tim.off(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated),this.TUICore.tim.off(this.TUICore.TIM.EVENT.USER_STATUS_UPDATED,this.handleUserStatusUpdated)}handleGroupListUpdated(e){this.store.groupList=e.data}handleGroupAttributesUpdated(e){const{groupID:t,groupAttributes:n}=e.data;console.log(t,n)}handleConversationListUpdate(e){this.handleFilterSystem(e.data)}handleFriendListUpdated(e){this.currentStore.friendList=e.data,this.currentStore.userIDList=this.currentStore.friendList.map((e=>e.userID))}handleUserStatusUpdated(e){const t=e.data;t.forEach((e=>{const{userID:t,statusType:n,customStatus:o}=e;this.currentStore?.userStatusList?.set(t,{statusType:n,customStatus:o})}))}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUIContact",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}handleFilterSystem(e){const t={allConversationList:e,systemConversationList:[]};t.systemConversationList=e.filter((e=>e.type===this.TUICore.TIM.TYPES.CONV_SYSTEM)),this.store.allConversationList=t.allConversationList,this.store.systemConversationList=t.systemConversationList;const[n]=t.systemConversationList;return this.store.systemConversation=n,t}async getConversationList(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getConversationList();this.handleFilterSystem(t.data.conversationList),e(t)}catch(n){t(n)}}))}async getSystemMessageList(){const e={conversationID:this.store.systemConversation.conversationID,count:15};return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getMessageList(e);this.store.systemMessageList=n.data.messageList,t(n)}catch(o){n(o)}}))}async setMessageRead(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.setMessageRead({conversationID:this.store.systemConversation.conversationID});e(t)}catch(n){t(n)}}))}async getGroupList(e){return this.handlePromiseCallback((async(t,n)=>{try{let n={};n=e?await this.TUICore.tim.getGroupList(e):await this.TUICore.tim.getGroupList(),this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}}))}getGroupProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getGroupProfile(e);this.store.groupList=n.data.groupList,t(n)}catch(o){n(o)}}))}dismissGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.dismissGroup(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}}))}updateGroupProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.updateGroupProfile(e);this.store.groupProfile=n.data.group,t(n)}catch(o){n(o)}}))}joinGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.joinGroup(e);t(n)}catch(o){n(o)}}))}quitGroup(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.quitGroup(e);t(n)}catch(o){n(o)}}))}searchGroupByID(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.searchGroupByID(e);this.store.searchGroup=n.data.group,t(n)}catch(o){this.store.searchGroup={},n(o)}}))}handleGroupApplication(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.handleGroupApplication(e);t(n)}catch(o){n(o)}}))}async getFriendList(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getFriendList();this.currentStore.friendList=t.data,this.currentStore.userIDList=this.currentStore.friendList.map((e=>e.userID))||[],e(t)}catch(n){t(n)}}))}async getUserStatus(e){return this.handlePromiseCallback((async(t,n)=>{try{if(!e.length)return;const n=await this.TUICore.tim.getUserStatus({userIDList:e});n?.data?.successUserList?.forEach((e=>{e&&e?.userID&&this.currentStore?.userStatusList?.set(e?.userID,{statusType:e?.statusType,customStatus:e?.customStatus})})),t(n)}catch(o){n(o)}}))}async subscribeUserStatus(e){return this.handlePromiseCallback((async(t,n)=>{try{if(!e.length)return;const n=await this.TUICore.tim.subscribeUserStatus({userIDList:e});t(n)}catch(o){n(o)}}))}async unsubscribeUserStatus(e){return this.handlePromiseCallback((async(t,n)=>{try{if(e&&!e.length)return;const n=await this.TUICore.tim.unsubscribeUserStatus({userIDList:e});this.currentStore?.userStatusList?.clear(),t(n)}catch(o){n(o)}}))}async handleUserStatus(e,t){return this.handlePromiseCallback((async(n,o)=>{try{setTimeout((async()=>{e?(await this.subscribeUserStatus(t),await this.getUserStatus(t)):await this.unsubscribeUserStatus(t)}),1e3)}catch(r){o(r)}}))}async bind(e){return this.currentStore=e,await this.getGroupList(),await this.getConversationList(),await this.getFriendList(),this.currentStore}}const jp=e=>((0,o.pushScopeId)("data-v-5f069d6a"),e=e(),(0,o.popScopeId)(),e),zp={class:"TUI-contact-left"},Fp={class:"TUI-contact-left-header"},$p={class:"search"},Zp=jp((()=>(0,o.createElementVNode)("i",{class:"plus"},null,-1))),Yp={key:1,class:"search-box"},Kp={class:"input-box"},Wp=["placeholder"],qp={key:0,class:"TUI-contact-column"},Xp={class:"TUI-contact-column-item"},Jp={key:0,class:"num"},Qp={key:0,class:"TUI-contact-list"},eh={class:"TUI-contact-list-item selected not-aside"},th={key:0,class:"num"},nh={class:"TUI-contact-column-item"},oh={class:"TUI-contact-list"},rh=["onClick"],sh={class:"left"},ah=["src"],ih={class:"content"},lh={class:"name"},ch={class:"ID"},uh=jp((()=>(0,o.createElementVNode)("label",null,"ID：",-1))),dh={class:"type"},ph={class:"TUI-contact-column-item"},hh={class:"TUI-contact-list"},mh=["onClick"],gh={class:"left"},fh=["src"],vh={class:"content"},yh={class:"name"},kh={key:1,class:"TUI-contact-list"},wh={class:"left"},Ih=["src"],Eh={class:"content"},bh={class:"name"},Ch={class:"ID"},Th=jp((()=>(0,o.createElementVNode)("label",null,"ID：",-1))),Sh={class:"type"},_h={class:"TUI-contact-main"},Nh={key:0,class:"TUI-contact-main-h5-title"},Dh={key:1,class:"TUI-contact-main-info"},Uh={class:"TUI-contact-main-info-header"},Mh={class:"list"},Bh=["src"],xh={key:0,class:"TUI-contact-main-info-main"},Vh=["disabled"],Lh={class:"TUI-contact-main-info-footer"},Rh={key:0},Ah={key:1},Ph={key:2,class:"TUI-contact-main-info"},Oh={class:"TUI-contact-main-info-header"},Gh={class:"list"},Hh=jp((()=>(0,o.createElementVNode)("label",null,"ID：",-1))),jh=["src"],zh={class:"TUI-contact-main-info-footer"},Fh={key:3,class:"TUI-contact-system"},$h={key:0,class:"TUI-contact-system-header"};function Zh(e,t,n,r,s,a){const i=(0,o.resolveComponent)("MessageSystem");return(0,o.openBlock)(),(0,o.createBlock)(o.Transition,{onBeforeLeave:e.init},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["TUI-contact",[e.env.isH5?"TUI-contact-H5":""]])},[(0,o.createElementVNode)("aside",zp,[(0,o.createElementVNode)("header",Fp,[(0,o.createElementVNode)("div",$p,[e.isSearch?((0,o.openBlock)(),(0,o.createElementBlock)("div",Yp,[(0,o.createElementVNode)("div",Kp,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchID=t),placeholder:e.$t("TUIContact.输入群ID，按回车搜索"),onKeyup:t[2]||(t[2]=(0,o.withKeys)(((...t)=>e.handleSearchGroup&&e.handleSearchGroup(...t)),["enter"])),enterkeyhint:"search"},null,40,Wp),[[o.vModelText,e.searchID]]),e.searchID?((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:"icon icon-cancel",onClick:t[3]||(t[3]=t=>e.searchID="")})):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("span",{class:"search-cancel",onClick:t[4]||(t[4]=(...t)=>e.toggleSearch&&e.toggleSearch(...t))},(0,o.toDisplayString)(e.$t("取消")),1)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"search-box",onClick:t[0]||(t[0]=(...t)=>e.toggleSearch&&e.toggleSearch(...t))},[Zp,(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("TUIContact.添加群聊")),1)]))])]),e.isSearch?((0,o.openBlock)(),(0,o.createElementBlock)("ul",kh,[e.searchGroup?.groupID?((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:0,class:(0,o.normalizeClass)(["TUI-contact-list-item",[e.currentGroup?.groupID===e.searchGroup?.groupID&&"selected"]]),onClick:t[8]||(t[8]=t=>e.handleListItem(e.searchGroup))},[(0,o.createElementVNode)("aside",wh,[(0,o.createElementVNode)("img",{class:"avatar",src:e.searchGroup?.avatar||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,Ih)]),(0,o.createElementVNode)("main",Eh,[(0,o.createElementVNode)("ul",null,[(0,o.createElementVNode)("li",bh,(0,o.toDisplayString)(e.searchGroup?.name),1),(0,o.createElementVNode)("li",Ch,[Th,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.searchGroup?.groupID),1)])]),(0,o.createElementVNode)("span",Sh,(0,o.toDisplayString)(e.searchGroup?.type),1)])],2)):(0,o.createCommentVNode)("",!0)])):((0,o.openBlock)(),(0,o.createElementBlock)("ul",qp,[(0,o.createElementVNode)("li",Xp,[(0,o.createElementVNode)("header",{onClick:t[5]||(t[5]=t=>e.select("system"))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon icon-right",["system"===e.columnName&&"icon-down"]])},null,2),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.群聊通知")),1),e.systemConversation&&e.systemConversation.unreadCount>0?((0,o.openBlock)(),(0,o.createElementBlock)("span",Jp,(0,o.toDisplayString)(e.systemConversation.unreadCount),1)):(0,o.createCommentVNode)("",!0)])]),"system"===e.columnName?((0,o.openBlock)(),(0,o.createElementBlock)("ul",Qp,[(0,o.createElementVNode)("li",eh,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.系统通知")),1),e.systemConversation&&e.systemConversation.unreadCount>0?((0,o.openBlock)(),(0,o.createElementBlock)("span",th,(0,o.toDisplayString)(e.systemConversation.unreadCount),1)):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("li",nh,[(0,o.createElementVNode)("header",{onClick:t[6]||(t[6]=t=>e.select("group"))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon icon-right",["group"===e.columnName&&"icon-down"]])},null,2),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.我的群聊")),1)])]),(0,o.withDirectives)((0,o.createElementVNode)("ul",oh,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.groupList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["TUI-contact-list-item",[e.currentGroup?.groupID===t?.groupID&&"selected"]]),key:n,onClick:n=>e.handleListItem(t)},[(0,o.createElementVNode)("aside",sh,[(0,o.createElementVNode)("img",{class:"avatar",src:t?.avatar||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,ah)]),(0,o.createElementVNode)("main",ih,[(0,o.createElementVNode)("ul",null,[(0,o.createElementVNode)("li",lh,(0,o.toDisplayString)(t?.name),1),(0,o.createElementVNode)("li",ch,[uh,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(t?.groupID),1)])]),(0,o.createElementVNode)("span",dh,(0,o.toDisplayString)(t?.type),1)])],10,rh)))),128))],512),[[o.vShow,"group"===e.columnName]])]),(0,o.createElementVNode)("li",ph,[(0,o.createElementVNode)("header",{onClick:t[7]||(t[7]=t=>e.select("friend"))},[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon icon-right",["friend"===e.columnName&&"icon-down"]])},null,2),(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.我的好友")),1)])]),(0,o.withDirectives)((0,o.createElementVNode)("ul",hh,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.friendList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["TUI-contact-list-item",[e.currentFriend?.userID===t?.userID&&"selected"]]),key:n,onClick:n=>e.handleListItem(t)},[(0,o.createElementVNode)("aside",gh,[(0,o.createElementVNode)("img",{class:"avatar",src:t?.profile?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,fh),e.displayOnlineStatus?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["online-status",1===e.userStatusList.get(t?.userID)?.statusType?"online-status-online":"online-status-offline"])},null,2)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("main",vh,[(0,o.createElementVNode)("ul",null,[(0,o.createElementVNode)("li",yh,(0,o.toDisplayString)(t?.profile?.nick||t?.userID),1)])])],10,mh)))),128))],512),[[o.vShow,"friend"===e.columnName]])])]))]),(0,o.withDirectives)((0,o.createElementVNode)("main",_h,[e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("header",Nh,[(0,o.createElementVNode)("i",{class:"icon icon-back",onClick:t[9]||(t[9]=(...t)=>e.back&&e.back(...t))}),(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.currentGroup?.name||e.$t("TUIContact.系统通知")),1)])):(0,o.createCommentVNode)("",!0),e.currentGroup?.groupID?((0,o.openBlock)(),(0,o.createElementBlock)("div",Dh,[(0,o.createElementVNode)("header",Uh,[(0,o.createElementVNode)("ul",Mh,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.currentGroup?.name),1),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.群ID"))+"：",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.currentGroup?.groupID),1)]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.群类型"))+"：",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.currentGroup?.type),1)])]),(0,o.createElementVNode)("img",{class:"avatar",src:e.currentGroup?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/group_avatar.png",onerror:"this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,Bh)]),e.isNeedPermission?((0,o.openBlock)(),(0,o.createElementBlock)("main",xh,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.请填写验证信息")),1),(0,o.withDirectives)((0,o.createElementVNode)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.currentGroup.applyMessage=t),disabled:e.currentGroup.apply},null,8,Vh),[[o.vModelText,e.currentGroup.applyMessage]])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("footer",Lh,[e.currentGroup.apply&&"AVChatRoom"===e.currentGroup.type?((0,o.openBlock)(),(0,o.createElementBlock)("p",Rh,(0,o.toDisplayString)(e.$t("TUIContact.已加入")),1)):e.currentGroup.apply?((0,o.openBlock)(),(0,o.createElementBlock)("p",Ah,(0,o.toDisplayString)(e.$t("TUIContact.已申请")),1)):e.isNeedPermission?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:2,class:"btn btn-default",onClick:t[11]||(t[11]=t=>e.join(e.currentGroup))},(0,o.toDisplayString)(e.$t("TUIContact.申请加入")),1)):e.currentGroup.selfInfo.userID?e.currentGroup.selfInfo.userID&&"Owner"===e.currentGroup.selfInfo.role&&"Private"!==e.currentGroup.type?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:4,class:"btn btn-cancel",onClick:t[13]||(t[13]=t=>e.dismiss(e.currentGroup))},(0,o.toDisplayString)(e.$t("TUIContact.解散群聊")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:5,class:"btn btn-cancel",onClick:t[14]||(t[14]=t=>e.quit(e.currentGroup))},(0,o.toDisplayString)(e.$t("TUIContact.退出群聊")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:3,class:"btn btn-default",onClick:t[12]||(t[12]=t=>e.join(e.currentGroup))},(0,o.toDisplayString)(e.$t("TUIContact.加入群聊")),1)),e.currentGroup.selfInfo.userID?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:6,class:"btn btn-default",onClick:t[15]||(t[15]=t=>e.enter(e.currentGroup.groupID,"GROUP"))},(0,o.toDisplayString)(e.$t("TUIContact.进入群聊")),1)):(0,o.createCommentVNode)("",!0)])])):e.currentFriend?.userID&&"friend"===e.columnName?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ph,[(0,o.createElementVNode)("header",Oh,[(0,o.createElementVNode)("ul",Gh,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.currentFriend?.profile?.nick||e.currentFriend?.userID),1),(0,o.createElementVNode)("li",null,[Hh,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.currentFriend?.profile?.userID),1)]),(0,o.createElementVNode)("li",null,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUIContact.个性签名"))+"：",1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.currentFriend?.profile?.selfSignature),1)])]),(0,o.createElementVNode)("img",{class:"avatar",src:e.currentFriend?.profile?.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,jh)]),(0,o.createElementVNode)("footer",zh,[(0,o.createElementVNode)("button",{class:"btn btn-default",onClick:t[16]||(t[16]=t=>e.enter(e.currentFriend.userID,"C2C"))},(0,o.toDisplayString)(e.$t("TUIContact.发送消息")),1)])])):"system"===e.columnName?((0,o.openBlock)(),(0,o.createElementBlock)("div",Fh,[e.env.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("header",$h,[(0,o.createElementVNode)("h1",null,(0,o.toDisplayString)(e.$t("TUIContact.系统通知")),1)])),(0,o.createVNode)(i,{isH5:e.env.isH5,data:e.systemMessageList,types:e.types,onApplication:e.handleGroupApplication},null,8,["isH5","data","types","onApplication"])])):(0,o.renderSlot)(e.$slots,"default",{key:4},void 0,!0)],512),[[o.vShow,!!e.currentGroup?.groupID||!!e.currentFriend?.userID||"system"===e.columnName]])],2)])),_:3},8,["onBeforeLeave"])}const Yh=e=>((0,o.pushScopeId)("data-v-4cbbc4fe"),e=e(),(0,o.popScopeId)(),e),Kh={class:"list"},Wh=Yh((()=>(0,o.createElementVNode)("i",{class:"icon icon-system"},null,-1))),qh={key:0,class:"btn-box"},Xh=["onClick"],Jh=["onClick"],Qh={key:2};function em(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["message-system",[e.isH5?"message-system-h5":""]])},[(0,o.createElementVNode)("ul",Kh,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.messageList,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{key:n},[t.type===e.types.MSG_GRP_TIP||t.type===e.types.MSG_GRP_SYS_NOTICE?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[Wh,(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.translateGroupSystemNotice(t)),1),1===t?.payload?.operationType?((0,o.openBlock)(),(0,o.createElementBlock)("div",qh,[t.isHandle?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,class:"btn btn-default",onClick:n=>e.handleApplication("Agree",t)},(0,o.toDisplayString)(e.$t("TUIContact.接受")),9,Xh)),t.isHandle?((0,o.openBlock)(),(0,o.createElementBlock)("span",Qh,(0,o.toDisplayString)(e.$t("TUIContact.已处理")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,class:"btn btn-cancel",onClick:n=>e.handleApplication("Reject",t)},(0,o.toDisplayString)(e.$t("TUIContact.拒绝")),9,Jh))])):(0,o.createCommentVNode)("",!0)],64)):(0,o.createCommentVNode)("",!0)])))),128))])],2)}var tm=(0,o.defineComponent)({props:{data:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})},isH5:{type:Boolean,default:!1}},setup(e,t){const n=(0,o.reactive)({messageList:[],types:{},isHandle:!1});(0,o.watchEffect)((()=>{n.messageList=e.data,n.types=e.types}));const r=(e,n)=>{const o={handleAction:e,message:n};t.emit("application",o),n.isHandle=!0};return{...(0,o.toRefs)(n),translateGroupSystemNotice:No,handleApplication:r}}});const nm=(0,s.Z)(tm,[["render",em],["__scopeId","data-v-4cbbc4fe"]]);var om=nm;const rm=(0,o.defineComponent)({name:"TUIContact",components:{MessageSystem:om},props:{displayOnlineStatus:{type:Boolean,default:!1}},setup(e,t){const n=rm.TUIServer,{t:r}=n.TUICore.config.i18n.useI18n(),s=(0,o.reactive)({groupList:[],searchGroup:{},searchID:"",currentGroup:null,systemConversation:{unreadCount:0},systemMessageList:[],columnName:"",types:n.TUICore.TIM.TYPES,isSearch:!1,env:n.TUICore.TUIEnv,friendList:[],userIDList:[],currentFriend:{},displayOnlineStatus:!1,onlineStatus:!1,userStatusList:new Map});n.bind(s),(0,o.watch)((()=>e.displayOnlineStatus),(async(e,t)=>{e!==t&&(s.displayOnlineStatus=e,n.handleUserStatus(s.displayOnlineStatus,s.userIDList))}),{immediate:!0}),(0,o.watch)((()=>s.userIDList),((e,t)=>{Mo(e,t)||n.handleUserStatus(s.displayOnlineStatus,s.userIDList)}));const a=(0,o.computed)((()=>{const e=s.currentGroup.selfInfo.userID,t=s.currentGroup.joinOption===n.TUICore.TIM.TYPES.JOIN_OPTIONS_NEED_PERMISSION;return!e&&t})),i=async e=>{switch(s.columnName){case"group":s.currentGroup=e;break;case"friend":s.currentFriend=e;break}s.isSearch&&(s.currentGroup=e)},l=async e=>{if(s.currentGroup=null,s.searchID.trim())try{await n.searchGroupByID(s.searchID.trim())}catch(t){const e=r("TUIContact.该群组不存在");Do(e,s.env)}},c=async e=>{const t={groupID:e.groupID,applyMessage:e.applyMessage||r("TUIContact.加群"),type:e?.type};await n.joinGroup(t),s.currentGroup.apply=!0},u=async e=>{await n.quitGroup(e.groupID),s.currentGroup=null},d=async(e,t)=>{const o=`${t}${e}`;n.TUICore.TUIServer.TUIConversation.getConversationProfile(o).then((e=>{n.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation),v()}))},p=e=>{n.dismissGroup(e.groupID),s.currentGroup=null},h=async e=>{"system"!==s.columnName&&"system"===e&&s.systemConversation?.conversationID&&(await n.getSystemMessageList(),await n.setMessageRead()),s.currentGroup={},"group"===s.columnName||"group"!==e||s.env.isH5?s.currentGroup={}:s.currentGroup=s.groupList[0],s.searchID="",s.columnName=s.columnName===e?"":e},m=()=>{s.isSearch=!s.isSearch,s.columnName="",s.searchID="",s.searchGroup={},s.currentGroup={}},g=()=>{s.isSearch=!1,s.columnName="",s.searchID="",s.searchGroup={},s.currentGroup={}},f=e=>{n.handleGroupApplication(e)},v=()=>{s.currentGroup={},s.currentFriend={},s.columnName=""},y=e=>{n.TUICore.getUserStatusList(e)};return{...(0,o.toRefs)(s),handleListItem:i,handleSearchGroup:l,join:c,quit:u,dismiss:p,isNeedPermission:a,select:h,handleGroupApplication:f,toggleSearch:m,init:g,back:v,enter:d,getUserStatusList:y}}});var sm=rm;const am=(0,s.Z)(sm,[["render",Zh],["__scopeId","data-v-5f069d6a"]]);var im=am;const lm=e=>{im.TUIServer=um.server,e.component(um.name,im)},cm=e=>(um.server=new Hp(e),e.component(um.name,um),um),um={name:"TUIContact",component:im,server:Hp,install:lm,plugin:cm};var dm=um;class pm extends P{constructor(e){super(),(0,R.Z)(this,"TUICore",void 0),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"currentStore",{}),(0,R.Z)(this,"storeCallback",void 0),this.TUICore=e,this.bindTIMEvent(),this.store=e.setComponentStore("TUISearch",{},this.updateStore.bind(this))}destroyed(){this.unbindTIMEvent()}updateStore(e,t){this?.currentStore?.conversationData?.list&&(this.currentStore.conversationData.list=e.conversationList)}handlePromiseCallback(e){return new Promise(((t,n)=>{const o={TUIName:"TUISearch",callback:()=>{e&&e(t,n)}};this.TUICore.setAwaitFunc(o.TUIName,o.callback)}))}bindTIMEvent(){this.TUICore.tim.on(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated,this)}unbindTIMEvent(){this.TUICore.tim.off(this.TUICore.TIM.EVENT.FRIEND_LIST_UPDATED,this.handleFriendListUpdated)}handleFriendListUpdated(e){this.currentStore.searchUserList=e.data.map((e=>e?.profile)),this.currentStore.allUserList=e.data.map((e=>e?.profile))}async getConversationProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getConversationProfile(e);t(n)}catch(o){n(o)}}))}async getUserProfile(e){return this.handlePromiseCallback((async(t,n)=>{try{const n=await this.TUICore.tim.getUserProfile({userIDList:e});t(n)}catch(o){n(o)}}))}async getFriendList(){return this.handlePromiseCallback((async(e,t)=>{try{const t=await this.TUICore.tim.getFriendList();this.currentStore.searchUserList=t.data.map((e=>e?.profile)),this.currentStore.allUserList=t.data.map((e=>e?.profile)),e(t)}catch(n){t(n)}}))}async bind(e){return this.currentStore=e,await this.getFriendList(),this.currentStore}}const hm=e=>((0,o.pushScopeId)("data-v-3e18d70e"),e=e(),(0,o.popScopeId)(),e),mm=hm((()=>(0,o.createElementVNode)("i",{class:"plus"},null,-1))),gm={key:0},fm={key:0,class:"icon icon-c2c"},vm=hm((()=>(0,o.createElementVNode)("i",{class:"icon icon-group"},null,-1)));function ym(e,t,n,r,s,a){const i=(0,o.resolveComponent)("Transfer"),l=(0,o.resolveComponent)("CreateGroup"),c=(0,o.resolveComponent)("Dialog");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["TUI-search",[e.env.isH5?"TUI-search-H5":""]]),ref:"dialog"},[(0,o.createElementVNode)("header",{onClick:t[2]||(t[2]=(...t)=>e.toggleOptionalShow&&e.toggleOptionalShow(...t))},[mm,e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("h1",gm,(0,o.toDisplayString)(e.$t("TUISearch.发起会话")),1)):(0,o.createCommentVNode)("",!0),(0,o.withDirectives)((0,o.createElementVNode)("ul",null,[(0,o.createElementVNode)("li",null,[e.env.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("i",fm)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("h1",{onClick:t[0]||(t[0]=t=>e.showOpen("isC2C"))},(0,o.toDisplayString)(e.$t("TUISearch.发起单聊")),1)]),(0,o.createElementVNode)("li",null,[vm,(0,o.createElementVNode)("h1",{onClick:t[1]||(t[1]=t=>e.showOpen("isGroup"))},(0,o.toDisplayString)(e.$t("TUISearch.发起群聊")),1)])],512),[[o.vShow,e.optionalShow]])]),(0,o.createVNode)(c,{show:e.open,isH5:e.env.isH5,isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":t[3]||(t[3]=t=>e.open=t)},{default:(0,o.withCtx)((()=>[1===e.step?((0,o.openBlock)(),(0,o.createBlock)(i,{key:0,isSearch:e.needSearch,title:e.showTitle,list:e.searchUserList,isH5:e.env.isH5,isRadio:"isC2C"===e.createConversationType,onSearch:e.handleSearch,onSubmit:e.submit,onCancel:e.toggleOpen},null,8,["isSearch","title","list","isH5","isRadio","onSearch","onSubmit","onCancel"])):((0,o.openBlock)(),(0,o.createBlock)(l,{key:1,onSubmit:e.create,onCancel:e.toggleOpen,isH5:e.env.isH5},null,8,["onSubmit","onCancel","isH5"]))])),_:1},8,["show","isH5"])],2)}const km=e=>((0,o.pushScopeId)("data-v-279f8f91"),e=e(),(0,o.popScopeId)(),e),wm={class:"group-box"},Im={key:0},Em={key:1},bm={key:0,class:"group-list"},Cm={class:"group-list-item"},Tm=["src"],Sm={class:"group-list-item"},_m={class:"content"},Nm=km((()=>(0,o.createElementVNode)("i",{class:"icon icon-right"},null,-1))),Dm={class:"group-list-item"},Um={class:"content"},Mm=km((()=>(0,o.createElementVNode)("i",{class:"icon icon-right"},null,-1))),Bm={class:"group-list-introduction"},xm={class:"group-list-item"},Vm={key:0,class:"select"},Lm=["onClick"],Rm={class:"select-item-header"},Am={class:"left"},Pm=["src"],Om={class:"select-item-label"},Gm={key:0,class:"icon icon-selected"},Hm={class:"select-item-detail"},jm=["href"],zm={class:"content"},Fm=km((()=>(0,o.createElementVNode)("i",{class:"icon icon-right"},null,-1))),$m={key:0,class:"group-h5-list-item-introduction"},Zm={class:"introduction-name"},Ym={class:"introduction-detail"},Km=["href"],Wm={key:1,class:"group-list group-list-edit"},qm=["placeholder"],Xm={key:1,class:"select"},Jm=["onClick"],Qm={class:"select-item-header"},eg={class:"left"},tg=["src"],ng={class:"select-item-label"},og={key:0,class:"icon icon-selected"},rg={class:"select-item-detail"},sg=["href"],ag={class:"group-profile-footer"},ig=["disabled"];function lg(e,t,n,r,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["group",[e.isH5?"group-h5":""]])},[(0,o.createElementVNode)("div",wm,[(0,o.createElementVNode)("header",null,[e.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("h1",Em,(0,o.toDisplayString)(e.$t(`TUISearch.${e.editConfig.title}`)),1)):((0,o.openBlock)(),(0,o.createElementBlock)("h1",Im,(0,o.toDisplayString)(e.$t("TUISearch.发起群聊")),1)),(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)(["icon",[e.isH5?"icon-back":"icon-close"]]),onClick:t[0]||(t[0]=(...t)=>e.cancel&&e.cancel(...t))},null,2)]),e.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("div",Wm,["input"===e.editConfig.type?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,type:"text","onUpdate:modelValue":t[6]||(t[6]=t=>e.editConfig.value=t),placeholder:e.$t(`TUISearch.${e.editConfig.placeholder}`)},null,8,qm)),[[o.vModelText,e.editConfig.value]]):((0,o.openBlock)(),(0,o.createElementBlock)("ul",Xm,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.type,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["select-item",[e.editConfig.value===t.type&&"selected"]]),key:n,onClick:n=>e.selectedEdit(t)},[(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("div",Qm,[(0,o.createElementVNode)("aside",eg,[(0,o.createElementVNode)("img",{class:"icon",src:t.icon},null,8,tg),(0,o.createElementVNode)("span",ng,(0,o.toDisplayString)(t.label),1)]),e.editConfig.value===t.type?((0,o.openBlock)(),(0,o.createElementBlock)("i",og)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("span",rg,(0,o.toDisplayString)(e.$t(`TUISearch.${t.detail}`)),1),(0,o.createElementVNode)("a",{href:e.Link.product.url,target:"view_window"},(0,o.toDisplayString)(e.$t(`TUISearch.${t.src}`)),9,sg)])],10,Jm)))),128))]))])):((0,o.openBlock)(),(0,o.createElementBlock)("ul",bm,[(0,o.createElementVNode)("li",Cm,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUISearch.群头像")),1),(0,o.createElementVNode)("img",{class:"icon",src:e.profile.avatar},null,8,Tm)]),(0,o.createElementVNode)("ul",null,[(0,o.createElementVNode)("li",Sm,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUISearch.群名称")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:"group-h5-list-item-content",onClick:t[2]||(t[2]=t=>e.edit("name"))},[(0,o.createElementVNode)("p",_m,(0,o.toDisplayString)(e.profile.name),1),Nm])):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.profile.name=t),placeholder:"请输入群名称"},null,512)),[[o.vModelText,e.profile.name]])]),(0,o.createElementVNode)("li",Dm,[(0,o.createElementVNode)("label",null,[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("TUISearch.群ID")),1),(0,o.createElementVNode)("text",null,"("+(0,o.toDisplayString)(e.$t("TUISearch.选填"))+")",1)]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:"group-h5-list-item-content",onClick:t[4]||(t[4]=t=>e.edit("groupID"))},[(0,o.createElementVNode)("p",Um,(0,o.toDisplayString)(e.profile.groupID),1),Mm])):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.profile.groupID=t)},null,512)),[[o.vModelText,e.profile.groupID]])]),(0,o.createElementVNode)("li",Bm,[(0,o.createElementVNode)("div",xm,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.$t("TUISearch.群类型")),1),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:1,class:"group-h5-list-item-content",onClick:t[5]||(t[5]=t=>e.edit("type"))},[(0,o.createElementVNode)("p",zm,(0,o.toDisplayString)(e.groupTypeDetail.label),1),Fm])):((0,o.openBlock)(),(0,o.createElementBlock)("ul",Vm,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.type,((t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["select-item",[e.profile.type===t.type&&"selected"]]),key:n,onClick:n=>e.selected(t)},[(0,o.createElementVNode)("main",null,[(0,o.createElementVNode)("div",Rm,[(0,o.createElementVNode)("aside",Am,[(0,o.createElementVNode)("img",{class:"icon",src:t.icon},null,8,Pm),(0,o.createElementVNode)("span",Om,(0,o.toDisplayString)(t.label),1)]),e.profile.type===t.type?((0,o.openBlock)(),(0,o.createElementBlock)("i",Gm)):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("span",Hm,(0,o.toDisplayString)(e.$t(`TUISearch.${t.detail}`)),1),(0,o.createElementVNode)("a",{href:e.Link.product.url,target:"view_window"},(0,o.toDisplayString)(e.$t(`TUISearch.${t.src}`)),9,jm)])],10,Lm)))),128))]))]),e.isH5?((0,o.openBlock)(),(0,o.createElementBlock)("article",$m,[(0,o.createElementVNode)("label",Zm,(0,o.toDisplayString)(e.groupTypeDetail.label)+"：",1),(0,o.createElementVNode)("span",Ym,(0,o.toDisplayString)(e.$t(`TUISearch.${e.groupTypeDetail.detail}`)),1),(0,o.createElementVNode)("a",{href:e.Link.product.url,target:"view_window"},(0,o.toDisplayString)(e.$t(`TUISearch.${e.groupTypeDetail.src}`)),9,Km)])):(0,o.createCommentVNode)("",!0)])])])),(0,o.createElementVNode)("footer",ag,[e.isEdit||e.isH5?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,class:"btn-default",onClick:t[7]||(t[7]=(...t)=>e.cancel&&e.cancel(...t))},(0,o.toDisplayString)(e.$t("TUISearch.取消")),1)),(0,o.createElementVNode)("button",{class:"btn-submit",onClick:t[8]||(t[8]=t=>e.submit(e.profile)),disabled:""===e.profile.name&&!e.isEdit},(0,o.toDisplayString)(e.$t("TUISearch.创建")),9,ig)])])],2)}const cg=(0,o.defineComponent)({name:"group",props:{isH5:{type:Boolean,default:()=>!1}},setup(e,t){const n=(0,o.reactive)({profile:{groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:""},editConfig:{title:"",value:"",key:"",type:"",placeholder:""},isEdit:!1,type:[{icon:"https://web.sdk.qcloud.com/im/assets/images/Public.svg",label:"陌生人社交群（Public）",type:cg.TUIServer.TUICore.TIM.TYPES.GRP_PUBLIC,detail:"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Meeting.svg",label:"临时会议群（Meeting）",type:cg.TUIServer.TUICore.TIM.TYPES.GRP_MEETING,detail:"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Work.svg",label:"好友工作群（Work）",type:cg.TUIServer.TUICore.TIM.TYPES.GRP_WORK,detail:"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/AVChatroom.svg",label:"直播群（AVChatroom）",type:cg.TUIServer.TUICore.TIM.TYPES.GRP_AVCHATROOM,detail:"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见",src:"产品文档"}]});n.profile.type=n.type[0].type,n.profile.avatar=n.type[0].icon;const r=(0,o.computed)((()=>n.type.filter((e=>e.type===n.profile.type))[0])),s=e=>{n.profile.type!==e.type&&(n.profile.type=e.type,n.profile.avatar=e.icon)},a=e=>{if(n.isEdit)return n.profile[n.editConfig.key]=n.editConfig.value,n.isEdit=!n.isEdit;const o={name:e.name,type:e.type,groupID:e.groupID,avatar:e.avatar};t.emit("submit",o)},i=()=>{if(n.isEdit)return n.isEdit=!n.isEdit;t.emit("cancel")},l=e=>{switch(n.isEdit=!n.isEdit,n.editConfig.key=e,n.editConfig.value=n.profile[e],e){case"name":n.editConfig.title="设置群名称",n.editConfig.placeholder="请输入群名称",n.editConfig.type="input";break;case"groupID":n.editConfig.title="设置群ID",n.editConfig.placeholder="请输入群ID",n.editConfig.type="input";break;case"type":n.editConfig.title="选择群类型",n.editConfig.type="select";break}},c=e=>{n.editConfig.value!==e.type&&(n.editConfig.value=e.type)};return{...(0,o.toRefs)(n),selected:s,submit:a,cancel:i,Link:ei,edit:l,selectedEdit:c,groupTypeDetail:r}}});var ug=cg;const dg=(0,s.Z)(ug,[["render",lg],["__scopeId","data-v-279f8f91"]]);var pg=dg,hg=pg;const mg=(0,o.defineComponent)({name:"TUISearch",components:{Transfer:Gs,Dialog:Ka,CreateGroup:hg},setup(e){const t=mg?.TUIServer,{t:n}=t.TUICore.config.i18n.useI18n(),r=(0,o.reactive)({open:!1,searchUserID:"",selectedList:[],allUserList:[],searchUserList:[],step:1,group:{groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:"",memberList:[{userID:""}]},showTitle:"",createConversationType:"",env:t.TUICore.TUIEnv,optionalShow:!t.TUICore.TUIEnv.isH5,needSearch:!t.TUICore.isOfficial});t.bind(r);const s=t?.TUICore?.TUIServer?.TUIGroup;hg.TUIServer=t;const a=Kn.oR&&(0,Kn.oR)(),i=(0,o.ref)();(0,uo.i9H)(i,(()=>{r.env.isH5&&(r.optionalShow=!1,r.searchUserList=[...r.allUserList])}));const l=()=>{r.group={groupID:"",name:"",type:"",avatar:"",introduction:"",notification:"",joinOption:"",memberList:[{userID:""}]}},c=()=>{r.open=!r.open,r.open||(r.searchUserID="",r.step=1,l())},u=e=>{if(r.createConversationType===q.typeC2C){const{userID:t}=e[0];p(t,"C2C"),c()}else{if(!hg.TUIServer){const e=n("TUISearch.创建群聊，请注册 TUIGroup 模块");Do(e,r.env)}l(),r.group.memberList=e.map((e=>({userID:e.userID}))),r.step=2}r.searchUserList=[...r.allUserList]},d=async e=>{e.type===t.TUICore.TIM.TYPES.GRP_PUBLIC&&(r.group.joinOption=t.TUICore.TIM.TYPES.JOIN_OPTIONS_NEED_PERMISSION);const o={...r.group,...e};e.type===t.TUICore.TIM.TYPES.GRP_AVCHATROOM&&(delete o.memberList,delete o.joinOption);try{const i=await s.createGroup(o),l=n("TUISearch.创建成功");Uo(l,r.env),window?.TUIKitTUICore?.isOfficial&&a?.commit("handleTask",3),c(),e.type===t.TUICore.TIM.TYPES.GRP_AVCHATROOM&&s.joinGroup({groupID:i.data.group.groupID,applyMessage:"",type:i.data.group.type}),p(i.data.group.groupID,"GROUP")}catch(i){Do(i,r.env)}},p=(e,n)=>{const o=`${n}${e}`;t.getConversationProfile(o).then((e=>{t.TUICore.TUIServer.TUIConversation.handleCurrentConversation(e.data.conversation),Yn.getInstance().reportEvent({name:"conversationType",ext1:"C2C"===n?"TypeC2C-success":"TypeGroup-success"})}))},h=e=>{switch(r.open=!0,Yn.getInstance().reportEvent({name:"conversationType",ext1:"createConversation"}),r.searchUserList=[...r.allUserList],e){case"isC2C":return r.createConversationType=q.typeC2C,r.showTitle=n("TUISearch.发起单聊"),Yn.getInstance().reportEvent({name:"conversationType",ext1:"createConversation-c2c"}),r.showTitle;case"isGroup":return r.createConversationType=q.typeGroup,r.showTitle=n("TUISearch.发起群聊"),Yn.getInstance().reportEvent({name:"conversationType",ext1:"createConversation-group"}),r.showTitle}},m=()=>{r.env.isH5&&(r.optionalShow=!r.optionalShow)},g=async e=>{try{const o=await t.getUserProfile([e]);if(!o.data.length)return Do(n("TUISearch.该用户不存在"),r.env),void(r.searchUserList=[...r.allUserList]);r.searchUserList=o.data;const s=r.allUserList.filter((e=>e.userID===o.data[0].userID));r.allUserList=s.length?r.allUserList:[...r.allUserList,...r.searchUserList]}catch(o){return Do(n("TUISearch.该用户不存在"),r.env),void(r.searchUserList=[...r.allUserList])}};return{...(0,o.toRefs)(r),toggleOpen:c,handleSearch:g,submit:u,create:d,showOpen:h,toggleOptionalShow:m,dialog:i}}});var gg=mg;const fg=(0,s.Z)(gg,[["render",ym],["__scopeId","data-v-3e18d70e"]]);var vg=fg;const yg=e=>{vg.TUIServer=wg.server,e.component(wg.name,vg)},kg=e=>(wg.server=new pm(e),e.component(wg.name,wg),wg),wg={name:"TUISearch",component:vg,server:pm,install:yg,plugin:kg};var Ig=wg;const Eg=[fu,ad,_p,Op,dm,Ig],bg=e=>{Eg.forEach((t=>{t.install(e)}))},Cg=e=>{Eg.forEach((t=>{t.plugin(e)}))},Tg={name:"TUIComponents",version:"1.0.0",TUIChat:fu,TUIConversation:ad,TUIProfile:_p,TUIGroup:Op,TUIContact:dm,TUISearch:Ig,install:bg,plugin:Cg};var Sg=Tg,_g=n(4791),Ng=n.n(_g),Dg=n(5362),Ug=n.n(Dg);class Mg{static init(e){}install(e){}getInstance(){}login(e){return new Promise(((e,t)=>{}))}destroyed(){}component(e,t){}use(e,t){}setAwaitFunc(e,t){}setCommonStore(e){}setComponentStore(e,t,n){}getStore(){}storeCommonListener(e,t){}}class Bg{setCommonStore(e){}setComponentStore(e,t,n){}storeCommonListener(e,t){}}class xg extends Bg{constructor(){super(),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"storeListener",void 0),this.storeListener={keys:[],callback:()=>{}},this.store={};const e={};this.store.common=new Proxy(e,{get:(e,t)=>e[t],set:(e,t,n)=>{const o={};return Object.assign(o,e),e[t]=n,e[t]!==o[t]&&this.storeListener.keys.indexOf(t)>=0&&this.storeListener.callback(e[t],o[t]),e[t]}})}setCommonStore(e){return Object.keys(e).forEach((t=>{if(t in this.store.common)return new Error(`${t} 在公共数据已存在，请重新设置`);this.store.common[t]=e[t]})),this.store}setComponentStore(e,t,n){return e in this.store?new Error(`${e} 该数据模块已存在，请重新设置`):this.store[e]=new Proxy(t,{get:(e,t)=>e[t],set:(e,t,o)=>{const r={};return Object.assign(r,e),e[t]=o,e[t]!==r[t]&&n&&n(e,r),e}})}storeCommonListener(e,t){this.storeListener={keys:e,callback:t}}}Object.prototype.toString;const{isArray:Vg}=Array,Lg=e=>"function"===typeof e;class Rg extends Mg{constructor(e){super(),(0,R.Z)(this,"isOfficial",!1),(0,R.Z)(this,"isIntl",!1),(0,R.Z)(this,"tim",void 0),(0,R.Z)(this,"TIM",void 0),(0,R.Z)(this,"isSDKReady",!1),(0,R.Z)(this,"store",void 0),(0,R.Z)(this,"TUIEnv",void 0),(0,R.Z)(this,"SDKAppID",void 0),(0,R.Z)(this,"installedPlugins",new Set),(0,R.Z)(this,"config",{}),(0,R.Z)(this,"TUIServer",void 0),(0,R.Z)(this,"TUIComponents",new Set),(0,R.Z)(this,"loginResolveRejectCache",void 0),this.loginResolveRejectCache=[],this.SDKAppID=e.SDKAppID,this.TUIServer={},this.store=new xg,this.TIM=K,window.TIM=K,e.tim?window.TUIKit=e.tim:window.TUIKit=K.create({SDKAppID:this.SDKAppID}),this.tim=window.TUIKit,this.tim.registerPlugin({"tim-upload-plugin":Ng()}),this.tim.registerPlugin({"tim-profanity-filter-plugin":Ug()}),this.bindTIMEvent(),this.TUIEnv=(0,A.kK)(),this.isOfficial=1400187352===this.SDKAppID||1400188366===this.SDKAppID}static init(e){const t=Yn.getInstance();Rg.instance||(Rg.instance=new Rg(e));const{isH5:n}=(0,A.kK)();return t.reportEvent({name:"SDKAppID",ext1:n?"IMTUIKitH5External":"IMTUIKitWebExternal",ext2:n?"IMTUIKitH5External":"IMTUIKitWebExternal",ext3:e.SDKAppID}),t.reportEvent({name:"time",ext1:"firstRunTime"}),window.TUIKitTUICore=Rg.instance,Rg.instance.use(A._e),Rg.instance.use(A.aR),Rg.instance}install(e){e.config.globalProperties.$TUIKit=this.getInstance();let t=!0;this.installedPlugins.forEach((n=>{e.use(n),"TUIComponents"===n.name&&(t=!1)})),t&&this.TUIComponents.forEach((t=>{e.component(t.name,t.component)})),(0,A.x7)(e)}getInstance(){return Rg.instance}login(e){return new Promise(((t,n)=>{this.tim.login(e).then((()=>(this.loginResolveRejectCache.push({resolve:t,reject:n}),Rg.isLogin=!0,window._isTIMCallKit=!0,Rg?.instance?.TUIServer?.TUICallKit?.init({SDKAppID:this.SDKAppID,userID:e.userID,userSig:e.userSig}),Rg?.instance?.TUIServer?.TUICallKit&&Yn.getInstance().reportEvent({name:"SDKAppID",ext1:"IMTUIKitWebExternal-call",ext2:"IMTUIKitWebExternal-call",ext3:this.SDKAppID}),null))).catch((e=>{n(e)}))}))}logout(){return new Promise(((e,t)=>{this.tim.logout().then((t=>{this.isSDKReady=!1,Rg.isLogin=!1,e(t)})).catch((e=>{t(e)}))}))}bindTIMEvent(){this.tim.on(K.EVENT.SDK_READY,this.handleSDKReady,this)}unbindTIMEvent(){this.tim.off(K.EVENT.SDK_READY,this.handleSDKReady)}handleSDKReady(){this.isSDKReady=!0,this.handelAwaitFunc(Rg.TUIServerFunMap),this.loginResolveRejectCache.forEach((({resolve:e})=>{e({msg:"登录成功，且SDK Ready"})}))}handelAwaitFunc(e){const t=Object.keys(this.TUIServer);for(let n=0;n<t.length;n++){const o=e?.get(t[n])||[];o.length>0&&o.map((e=>e())),e?.delete(t[n])}return e}destroyed(){this.unbindTIMEvent(),this.isSDKReady=!1}component(e,t){const n=this.getInstance();return this.TUIServer||(this.TUIServer={}),this.TUIServer[e]=t.server,this.TUIComponents.has(t)?console.warn(`${e} component has already been applied to target TUICore.`):this.TUIComponents.add(t),n}use(e,t){const n=this.getInstance();return this.installedPlugins.has(e)?console.warn("Plugin has already been applied to target TUICore."):e&&Lg(e?.plugin)?(this.installedPlugins.add(e),e?.plugin(n,t)):Lg(e)?(this.installedPlugins.add(e),e(n,t)):console.warn('A plugin must either be a function or an object with an "plugin" function.'),n}usePlugin(e){let t={};return this.installedPlugins.forEach((n=>{n.name===e&&(t=n)})),t}setAwaitFunc(e,t){if(this.isSDKReady)t();else{Rg.TUIServerFunMap||(Rg.TUIServerFunMap=new Map);const n=Rg.TUIServerFunMap.get(e)||[];n.push(t),Rg.TUIServerFunMap.set(e,n)}}setCommonStore(e){return this.store.setCommonStore(e)}setComponentStore(e,t,n){return this.store.setComponentStore(e,t,n)}getStore(){return this.store.store}storeCommonListener(e,t){return this.store.storeCommonListener(e,t)}}(0,R.Z)(Rg,"instance",void 0),(0,R.Z)(Rg,"isLogin",!1),(0,R.Z)(Rg,"TUIServerFunMap",void 0);var Ag=n(396);Ag.h;const Pg=Rg.init({SDKAppID:L.OJ});Pg.use(Sg),Pg.login({userID:L.Be,userSig:(0,Ag.h)({SDKAppID:L.OJ,secretKey:L.IY,userID:L.Be}).userSig});var Og=Pg;let Gg={SDKAppID:L.OJ},Hg=Ta().create(Gg);Hg.setLogLevel(1),Hg.registerPlugin({"tim-upload-plugin":Ng()});const jg=(0,o.createApp)(l);jg.config.globalProperties.tim=Hg,jg.provide("app",jg),jg.use(Og).use(V).use(u()).use(D).mount("#app")},396:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var o=n(5290);const r=604800;function s(e){const{SDKAppID:t,secretKey:n,userID:s}=e,a=new o(t,n,r),i=a.genTestUserSig(s);return{SDKAppID:t,userSig:i}}},5290:function(e,t,n){n(3767),n(8585),n(8696),n(7658),n(2087),n(541),function(t,n){e.exports=n()}(0,(function(){"use strict";var e="undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s=!1;function a(){s=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,r=e.length;n<r;++n)t[n]=e[n],o[e.charCodeAt(n)]=n;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}function i(e,n,o){for(var r,s,a=[],i=n;i<o;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(t[(s=r)>>18&63]+t[s>>12&63]+t[s>>6&63]+t[63&s]);return a.join("")}function l(e){var n;s||a();for(var o=e.length,r=o%3,l="",c=[],u=0,d=o-r;u<d;u+=16383)c.push(i(e,u,u+16383>d?d:u+16383));return 1===r?(n=e[o-1],l+=t[n>>2],l+=t[n<<4&63],l+="=="):2===r&&(n=(e[o-2]<<8)+e[o-1],l+=t[n>>10],l+=t[n>>4&63],l+=t[n<<2&63],l+="="),c.push(l),c.join("")}function c(e,t,n,o,r){var s,a,i=8*r-o-1,l=(1<<i)-1,c=l>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=e[t+d];for(d+=p,s=h&(1<<-u)-1,h>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=p,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=p,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,o),s-=c}return(h?-1:1)*a*Math.pow(2,s-o)}function u(e,t,n,o,r,s){var a,i,l,c=8*s-r-1,u=(1<<c)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:s-1,m=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(i=0,a=u):a+d>=1?(i=(t*l-1)*Math.pow(2,r),a+=d):(i=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+h]=255&i,h+=m,i/=256,r-=8);for(a=a<<r|i,c+=r;c>0;e[n+h]=255&a,h+=m,a/=256,c-=8);e[n+h-m]|=128*g}var d={}.toString,p=Array.isArray||function(e){return"[object Array]"==d.call(e)};function h(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(e,t){if(h()<t)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=g.prototype:(null===e&&(e=new g(t)),e.length=t),e}function g(e,t,n){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return y(this,e)}return f(this,e,t,n)}function f(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),g.TYPED_ARRAY_SUPPORT?(e=t).__proto__=g.prototype:e=k(e,t),e}(e,t,n,o):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!g.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|E(t,n),r=(e=m(e,o)).write(t,n);return r!==o&&(e=e.slice(0,r)),e}(e,t,n):function(e,t){if(I(t)){var n=0|w(t.length);return 0===(e=m(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?m(e,0):k(e,t);if("Buffer"===t.type&&p(t.data))return k(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function v(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function y(e,t){if(v(t),e=m(e,t<0?0:0|w(t)),!g.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function k(e,t){var n=t.length<0?0:0|w(t.length);e=m(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function w(e){if(e>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|e}function I(e){return!(null==e||!e._isBuffer)}function E(e,t){if(I(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(o)return W(e).length;t=(""+t).toLowerCase(),o=!0}}function b(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return V(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function C(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function T(e,t,n,o,r){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=g.from(t,o)),I(t))return 0===t.length?-1:S(e,t,n,o,r);if("number"==typeof t)return t&=255,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,o,r);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,o,r){var s,a=1,i=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;a=2,i/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(s=n;s<i;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*a}else-1!==u&&(s-=s-u),u=-1}else for(n+l>i&&(n=i-l),s=n;s>=0;s--){for(var d=!0,p=0;p<l;p++)if(c(e,s+p)!==c(t,p)){d=!1;break}if(d)return s}return-1}function _(e,t,n,o){n=Number(n)||0;var r=e.length-n;o?(o=Number(o))>r&&(o=r):o=r;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");o>s/2&&(o=s/2);for(var a=0;a<o;++a){var i=parseInt(t.substr(2*a,2),16);if(isNaN(i))return a;e[n+a]=i}return a}function N(e,t,n,o){return X(W(t,e.length-n),e,n,o)}function D(e,t,n,o){return X(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function U(e,t,n,o){return D(e,t,n,o)}function M(e,t,n,o){return X(q(t),e,n,o)}function B(e,t,n,o){return X(function(e,t){for(var n,o,r,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),o=n>>8,r=n%256,s.push(r),s.push(o);return s}(t,e.length-n),e,n,o)}function x(e,t,n){return 0===t&&n===e.length?l(e):l(e.slice(t,n))}function V(e,t,n){n=Math.min(e.length,n);for(var o=[],r=t;r<n;){var s,a,i,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[r+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[r+1],a=e[r+2],128==(192&s)&&128==(192&a)&&(l=(15&c)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[r+1],a=e[r+2],i=e[r+3],128==(192&s)&&128==(192&a)&&128==(192&i)&&(l=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&i)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=d}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=L));return n}(o)}g.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,g.poolSize=8192,g._augment=function(e){return e.__proto__=g.prototype,e},g.from=function(e,t,n){return f(null,e,t,n)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array),g.alloc=function(e,t,n){return function(e,t,n,o){return v(t),t<=0?m(e,t):void 0!==n?"string"==typeof o?m(e,t).fill(n,o):m(e,t).fill(n):m(e,t)}(null,e,t,n)},g.allocUnsafe=function(e){return y(null,e)},g.allocUnsafeSlow=function(e){return y(null,e)},g.isBuffer=J,g.compare=function(e,t){if(!I(e)||!I(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,r=0,s=Math.min(n,o);r<s;++r)if(e[r]!==t[r]){n=e[r],o=t[r];break}return n<o?-1:o<n?1:0},g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(e,t){if(!p(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return g.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=g.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!I(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,r),r+=s.length}return o},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},g.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},g.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},g.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?V(this,0,e):b.apply(this,arguments)},g.prototype.equals=function(e){if(!I(e))throw new TypeError("Argument must be a Buffer");return this===e||0===g.compare(this,e)},g.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},g.prototype.compare=function(e,t,n,o,r){if(!I(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),t<0||n>e.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&t>=n)return 0;if(o>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(o>>>=0),a=(n>>>=0)-(t>>>=0),i=Math.min(s,a),l=this.slice(o,r),c=e.slice(t,n),u=0;u<i;++u)if(l[u]!==c[u]){s=l[u],a=c[u];break}return s<a?-1:a<s?1:0},g.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},g.prototype.indexOf=function(e,t,n){return T(this,e,t,n,!0)},g.prototype.lastIndexOf=function(e,t,n){return T(this,e,t,n,!1)},g.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return N(this,e,t,n);case"ascii":return D(this,e,t,n);case"latin1":case"binary":return U(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function R(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(127&e[r]);return o}function A(e,t,n){var o="";n=Math.min(e.length,n);for(var r=t;r<n;++r)o+=String.fromCharCode(e[r]);return o}function P(e,t,n){var o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var r="",s=t;s<n;++s)r+=K(e[s]);return r}function O(e,t,n){for(var o=e.slice(t,n),r="",s=0;s<o.length;s+=2)r+=String.fromCharCode(o[s]+256*o[s+1]);return r}function G(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,o,r,s){if(!I(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function j(e,t,n,o){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(o?r:1-r))>>>8*(o?r:1-r)}function z(e,t,n,o){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>8*(o?r:3-r)&255}function F(e,t,n,o,r,s){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(e,t,n,o,r){return r||F(e,0,n,4),u(e,t,n,o,23,4),n+4}function Z(e,t,n,o,r){return r||F(e,0,n,8),u(e,t,n,o,52,8),n+8}g.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),g.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=g.prototype;else{var r=t-e;n=new g(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},g.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||G(e,t,this.length);for(var o=this[e],r=1,s=0;++s<t&&(r*=256);)o+=this[e+s]*r;return o},g.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||G(e,t,this.length);for(var o=this[e+--t],r=1;t>0&&(r*=256);)o+=this[e+--t]*r;return o},g.prototype.readUInt8=function(e,t){return t||G(e,1,this.length),this[e]},g.prototype.readUInt16LE=function(e,t){return t||G(e,2,this.length),this[e]|this[e+1]<<8},g.prototype.readUInt16BE=function(e,t){return t||G(e,2,this.length),this[e]<<8|this[e+1]},g.prototype.readUInt32LE=function(e,t){return t||G(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},g.prototype.readUInt32BE=function(e,t){return t||G(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},g.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||G(e,t,this.length);for(var o=this[e],r=1,s=0;++s<t&&(r*=256);)o+=this[e+s]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},g.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||G(e,t,this.length);for(var o=t,r=1,s=this[e+--o];o>0&&(r*=256);)s+=this[e+--o]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},g.prototype.readInt8=function(e,t){return t||G(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},g.prototype.readInt16LE=function(e,t){t||G(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},g.prototype.readInt16BE=function(e,t){t||G(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},g.prototype.readInt32LE=function(e,t){return t||G(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},g.prototype.readInt32BE=function(e,t){return t||G(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},g.prototype.readFloatLE=function(e,t){return t||G(e,4,this.length),c(this,e,!0,23,4)},g.prototype.readFloatBE=function(e,t){return t||G(e,4,this.length),c(this,e,!1,23,4)},g.prototype.readDoubleLE=function(e,t){return t||G(e,8,this.length),c(this,e,!0,52,8)},g.prototype.readDoubleBE=function(e,t){return t||G(e,8,this.length),c(this,e,!1,52,8)},g.prototype.writeUIntLE=function(e,t,n,o){e=+e,t|=0,n|=0,o||H(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=e/r&255;return t+n},g.prototype.writeUIntBE=function(e,t,n,o){e=+e,t|=0,n|=0,o||H(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+n},g.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,255,0),g.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},g.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},g.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},g.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},g.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},g.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);H(this,e,t,n,r-1,-r)}var s=0,a=1,i=0;for(this[t]=255&e;++s<n&&(a*=256);)e<0&&0===i&&0!==this[t+s-1]&&(i=1),this[t+s]=(e/a>>0)-i&255;return t+n},g.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var r=Math.pow(2,8*n-1);H(this,e,t,n,r-1,-r)}var s=n-1,a=1,i=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===i&&0!==this[t+s+1]&&(i=1),this[t+s]=(e/a>>0)-i&255;return t+n},g.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,127,-128),g.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},g.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},g.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},g.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},g.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),g.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},g.prototype.writeFloatLE=function(e,t,n){return $(this,e,t,!0,n)},g.prototype.writeFloatBE=function(e,t,n){return $(this,e,t,!1,n)},g.prototype.writeDoubleLE=function(e,t,n){return Z(this,e,t,!0,n)},g.prototype.writeDoubleBE=function(e,t,n){return Z(this,e,t,!1,n)},g.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var r,s=o-n;if(this===e&&n<t&&t<o)for(r=s-1;r>=0;--r)e[r+t]=this[r+n];else if(s<1e3||!g.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},g.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!g.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=I(e)?e:W(new g(e,o).toString()),i=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%i]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var n;t=t||1/0;for(var o=e.length,r=null,s=[],a=0;a<o;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===o){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function q(e){return function(e){var t,n,i,l,c,u;s||a();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");c="="===e[d-2]?2:"="===e[d-1]?1:0,u=new r(3*d/4-c),i=c>0?d-4:d;var p=0;for(t=0,n=0;t<i;t+=4,n+=3)l=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],u[p++]=l>>16&255,u[p++]=l>>8&255,u[p++]=255&l;return 2===c?(l=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,u[p++]=255&l):1===c&&(l=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,u[p++]=l>>8&255,u[p++]=255&l),u}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,n,o){for(var r=0;r<o&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function J(e){return null!=e&&(!!e._isBuffer||Q(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Q(e.slice(0,0))}(e))}function Q(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function te(e,t){return e(t={exports:{}},t.exports),t.exports}var ne,oe,re,se="object",ae=function(e){return e&&e.Math==Math&&e},ie=ae(typeof globalThis==se&&globalThis)||ae(typeof window==se&&window)||ae(typeof self==se&&self)||ae(typeof ee==se&&ee)||Function("return this")(),le=function(e){try{return!!e()}catch(e){return!0}},ce=!le((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),ue={}.propertyIsEnumerable,de=Object.getOwnPropertyDescriptor,pe={f:de&&!ue.call({1:2},1)?function(e){var t=de(this,e);return!!t&&t.enumerable}:ue},he=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},me={}.toString,ge=function(e){return me.call(e).slice(8,-1)},fe="".split,ve=le((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==ge(e)?fe.call(e,""):Object(e)}:Object,ye=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},ke=function(e){return ve(ye(e))},we=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Ie=function(e,t){if(!we(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!we(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!we(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!we(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")},Ee={}.hasOwnProperty,be=function(e,t){return Ee.call(e,t)},Ce=ie.document,Te=we(Ce)&&we(Ce.createElement),Se=function(e){return Te?Ce.createElement(e):{}},_e=!ce&&!le((function(){return 7!=Object.defineProperty(Se("div"),"a",{get:function(){return 7}}).a})),Ne=Object.getOwnPropertyDescriptor,De={f:ce?Ne:function(e,t){if(e=ke(e),t=Ie(t,!0),_e)try{return Ne(e,t)}catch(e){}if(be(e,t))return he(!pe.f.call(e,t),e[t])}},Ue=function(e){if(!we(e))throw TypeError(String(e)+" is not an object");return e},Me=Object.defineProperty,Be={f:ce?Me:function(e,t,n){if(Ue(e),t=Ie(t,!0),Ue(n),_e)try{return Me(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},xe=ce?function(e,t,n){return Be.f(e,t,he(1,n))}:function(e,t,n){return e[t]=n,e},Ve=function(e,t){try{xe(ie,e,t)}catch(o){ie[e]=t}return t},Le=te((function(e){var t=ie["__core-js_shared__"]||Ve("__core-js_shared__",{});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),Re=Le("native-function-to-string",Function.toString),Ae=ie.WeakMap,Pe="function"==typeof Ae&&/native code/.test(Re.call(Ae)),Oe=0,Ge=Math.random(),He=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Oe+Ge).toString(36)},je=Le("keys"),ze=function(e){return je[e]||(je[e]=He(e))},Fe={},$e=ie.WeakMap;if(Pe){var Ze=new $e,Ye=Ze.get,Ke=Ze.has,We=Ze.set;ne=function(e,t){return We.call(Ze,e,t),t},oe=function(e){return Ye.call(Ze,e)||{}},re=function(e){return Ke.call(Ze,e)}}else{var qe=ze("state");Fe[qe]=!0,ne=function(e,t){return xe(e,qe,t),t},oe=function(e){return be(e,qe)?e[qe]:{}},re=function(e){return be(e,qe)}}var Xe={set:ne,get:oe,has:re,enforce:function(e){return re(e)?oe(e):ne(e,{})},getterFor:function(e){return function(t){var n;if(!we(t)||(n=oe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Je=te((function(e){var t=Xe.get,n=Xe.enforce,o=String(Re).split("toString");Le("inspectSource",(function(e){return Re.call(e)})),(e.exports=function(e,t,r,s){var a=!!s&&!!s.unsafe,i=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||be(r,"name")||xe(r,"name",t),n(r).source=o.join("string"==typeof t?t:"")),e!==ie?(a?!l&&e[t]&&(i=!0):delete e[t],i?e[t]=r:xe(e,t,r)):i?e[t]=r:Ve(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Re.call(this)}))})),Qe=ie,et=function(e){return"function"==typeof e?e:void 0},tt=function(e,t){return arguments.length<2?et(Qe[e])||et(ie[e]):Qe[e]&&Qe[e][t]||ie[e]&&ie[e][t]},nt=Math.ceil,ot=Math.floor,rt=function(e){return isNaN(e=+e)?0:(e>0?ot:nt)(e)},st=Math.min,at=function(e){return e>0?st(rt(e),9007199254740991):0},it=Math.max,lt=Math.min,ct=function(e){return function(t,n,o){var r,s=ke(t),a=at(s.length),i=function(e,t){var n=rt(e);return n<0?it(n+t,0):lt(n,t)}(o,a);if(e&&n!=n){for(;a>i;)if((r=s[i++])!=r)return!0}else for(;a>i;i++)if((e||i in s)&&s[i]===n)return e||i||0;return!e&&-1}},ut={includes:ct(!0),indexOf:ct(!1)}.indexOf,dt=function(e,t){var n,o=ke(e),r=0,s=[];for(n in o)!be(Fe,n)&&be(o,n)&&s.push(n);for(;t.length>r;)be(o,n=t[r++])&&(~ut(s,n)||s.push(n));return s},pt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=pt.concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(e){return dt(e,ht)}},gt={f:Object.getOwnPropertySymbols},ft=tt("Reflect","ownKeys")||function(e){var t=mt.f(Ue(e)),n=gt.f;return n?t.concat(n(e)):t},vt=function(e,t){for(var n=ft(t),o=Be.f,r=De.f,s=0;s<n.length;s++){var a=n[s];be(e,a)||o(e,a,r(t,a))}},yt=/#|\.prototype\./,kt=function(e,t){var n=It[wt(e)];return n==bt||n!=Et&&("function"==typeof t?le(t):!!t)},wt=kt.normalize=function(e){return String(e).replace(yt,".").toLowerCase()},It=kt.data={},Et=kt.NATIVE="N",bt=kt.POLYFILL="P",Ct=kt,Tt=De.f,St=function(e,t){var n,o,r,s,a,i=e.target,l=e.global,c=e.stat;if(n=l?ie:c?ie[i]||Ve(i,{}):(ie[i]||{}).prototype)for(o in t){if(s=t[o],r=e.noTargetGet?(a=Tt(n,o))&&a.value:n[o],!Ct(l?o:i+(c?".":"#")+o,e.forced)&&void 0!==r){if(typeof s==typeof r)continue;vt(s,r)}(e.sham||r&&r.sham)&&xe(s,"sham",!0),Je(n,o,s,e)}};St({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var _t=Date.prototype,Nt=_t.toString,Dt=_t.getTime;new Date(NaN)+""!="Invalid Date"&&Je(_t,"toString",(function(){var e=Dt.call(this);return e==e?Nt.call(this):"Invalid Date"}));var Ut=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return Ue(n),function(e){if(!we(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),Mt=function(e,t,n){var o,r;return Ut&&"function"==typeof(o=t.constructor)&&o!==n&&we(r=o.prototype)&&r!==n.prototype&&Ut(e,r),e},Bt=Object.keys||function(e){return dt(e,pt)},xt=ce?Object.defineProperties:function(e,t){Ue(e);for(var n,o=Bt(t),r=o.length,s=0;r>s;)Be.f(e,n=o[s++],t[n]);return e},Vt=tt("document","documentElement"),Lt=ze("IE_PROTO"),Rt=function(){},At=function(){var e,t=Se("iframe"),n=pt.length;for(t.style.display="none",Vt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),At=e.F;n--;)delete At.prototype[pt[n]];return At()},Pt=Object.create||function(e,t){var n;return null!==e?(Rt.prototype=Ue(e),n=new Rt,Rt.prototype=null,n[Lt]=e):n=At(),void 0===t?n:xt(n,t)};Fe[Lt]=!0;var Ot="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Gt=RegExp("^"+Ot+Ot+"*"),Ht=RegExp(Ot+Ot+"*$"),jt=function(e){return function(t){var n=String(ye(t));return 1&e&&(n=n.replace(Gt,"")),2&e&&(n=n.replace(Ht,"")),n}},zt={start:jt(1),end:jt(2),trim:jt(3)},Ft=mt.f,$t=De.f,Zt=Be.f,Yt=zt.trim,Kt=ie.Number,Wt=Kt.prototype,qt="Number"==ge(Pt(Wt)),Xt=function(e){var t,n,o,r,s,a,i,l,c=Ie(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=Yt(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(a=(s=c.slice(2)).length,i=0;i<a;i++)if((l=s.charCodeAt(i))<48||l>r)return NaN;return parseInt(s,o)}return+c};if(Ct("Number",!Kt(" 0o1")||!Kt("0b1")||Kt("+0x1"))){for(var Jt,Qt=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Qt&&(qt?le((function(){Wt.valueOf.call(n)})):"Number"!=ge(n))?Mt(new Kt(Xt(t)),n,Qt):Xt(t)},en=ce?Ft(Kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),tn=0;en.length>tn;tn++)be(Kt,Jt=en[tn])&&!be(Qt,Jt)&&Zt(Qt,Jt,$t(Kt,Jt));Qt.prototype=Wt,Wt.constructor=Qt,Je(ie,"Number",Qt)}var nn=!!Object.getOwnPropertySymbols&&!le((function(){return!String(Symbol())})),on=ie.Symbol,rn=Le("wks"),sn=function(e){return rn[e]||(rn[e]=nn&&on[e]||(nn?on:He)("Symbol."+e))},an=sn("toStringTag"),ln="Arguments"==ge(function(){return arguments}()),cn={};cn[sn("toStringTag")]="z";var un="[object z]"!==String(cn)?function(){return"[object "+function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),an))?n:ln?ge(t):"Object"==(o=ge(t))&&"function"==typeof t.callee?"Arguments":o}(this)+"]"}:cn.toString,dn=Object.prototype;un!==dn.toString&&Je(dn,"toString",un,{unsafe:!0});var pn,hn,mn=function(){var e=Ue(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},gn=RegExp.prototype.exec,fn=String.prototype.replace,vn=gn,yn=(pn=/a/,hn=/b*/g,gn.call(pn,"a"),gn.call(hn,"a"),0!==pn.lastIndex||0!==hn.lastIndex),kn=void 0!==/()??/.exec("")[1];(yn||kn)&&(vn=function(e){var t,n,o,r,s=this;return kn&&(n=new RegExp("^"+s.source+"$(?!\\s)",mn.call(s))),yn&&(t=s.lastIndex),o=gn.call(s,e),yn&&o&&(s.lastIndex=s.global?o.index+o[0].length:t),kn&&o&&o.length>1&&fn.call(o[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)})),o});var wn=vn;St({target:"RegExp",proto:!0,forced:/./.exec!==wn},{exec:wn});var In=RegExp.prototype,En=In.toString,bn=le((function(){return"/a/b"!=En.call({source:"a",flags:"b"})})),Cn="toString"!=En.name;(bn||Cn)&&Je(RegExp.prototype,"toString",(function(){var e=Ue(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in In)?mn.call(e):n)}),{unsafe:!0});var Tn=sn("species"),Sn=!le((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),_n=!le((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Nn=function(e){return Object(ye(e))},Dn=function(e){return function(t,n){var o,r,s=String(ye(t)),a=rt(n),i=s.length;return a<0||a>=i?e?"":void 0:(o=s.charCodeAt(a))<55296||o>56319||a+1===i||(r=s.charCodeAt(a+1))<56320||r>57343?e?s.charAt(a):o:e?s.slice(a,a+2):r-56320+(o-55296<<10)+65536}},Un={codeAt:Dn(!1),charAt:Dn(!0)}.charAt,Mn=function(e,t,n){return t+(n?Un(e,t).length:1)},Bn=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==ge(e))throw TypeError("RegExp#exec called on incompatible receiver");return wn.call(e,t)},xn=Math.max,Vn=Math.min,Ln=Math.floor,Rn=/\$([$&'`]|\d\d?|<[^>]*>)/g,An=/\$([$&'`]|\d\d?)/g;function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}!function(e,t,n,o){var r=sn(e),s=!le((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),a=s&&!le((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Tn]=function(){return n}),n[r](""),!t}));if(!s||!a||"replace"===e&&!Sn||"split"===e&&!_n){var i=/./[r],l=n(r,""[e],(function(e,t,n,o,r){return t.exec===wn?s&&!r?{done:!0,value:i.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}})),c=l[0],u=l[1];Je(String.prototype,e,c),Je(RegExp.prototype,r,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}),o&&xe(RegExp.prototype[r],"sham",!0)}}("replace",2,(function(e,t,n){return[function(n,o){var r=ye(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,r,o):t.call(String(r),n,o)},function(e,r){var s=n(t,e,this,r);if(s.done)return s.value;var a=Ue(e),i=String(this),l="function"==typeof r;l||(r=String(r));var c=a.global;if(c){var u=a.unicode;a.lastIndex=0}for(var d=[];;){var p=Bn(a,i);if(null===p)break;if(d.push(p),!c)break;""===String(p[0])&&(a.lastIndex=Mn(i,at(a.lastIndex),u))}for(var h,m="",g=0,f=0;f<d.length;f++){p=d[f];for(var v=String(p[0]),y=xn(Vn(rt(p.index),i.length),0),k=[],w=1;w<p.length;w++)k.push(void 0===(h=p[w])?h:String(h));var I=p.groups;if(l){var E=[v].concat(k,y,i);void 0!==I&&E.push(I);var b=String(r.apply(void 0,E))}else b=o(v,i,y,k,I,r);y>=g&&(m+=i.slice(g,y)+b,g=y+v.length)}return m+i.slice(g)}];function o(e,n,o,r,s,a){var i=o+e.length,l=r.length,c=An;return void 0!==s&&(s=Nn(s),c=Rn),t.call(a,c,(function(t,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,o);case"'":return n.slice(i);case"<":c=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var d=Ln(u/10);return 0===d?t:d<=l?void 0===r[d-1]?a.charAt(1):r[d-1]+a.charAt(1):t}c=r[u-1]}return void 0===c?"":c}))}}));var Gn=te((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},r=o.lib={},s=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,r=e.sigBytes;if(this.clamp(),o%4)for(var s=0;s<r;s++){var a=n[s>>>2]>>>24-s%4*8&255;t[o+s>>>2]|=a<<24-(o+s)%4*8}else for(s=0;s<r;s+=4)t[o+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,o=[],r=function(t){var n=987654321,o=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var i=r(4294967296*(n||e.random()));n=987654071*i(),o.push(4294967296*i()|0)}return new a.init(o,t)}}),i=o.enc={},l=i.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var s=t[r>>>2]>>>24-r%4*8&255;o.push((s>>>4).toString(16)),o.push((15&s).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(n,t/2)}},c=i.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var s=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(s))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(n,t)}},u=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,r=n.sigBytes,s=this.blockSize,i=4*s,l=r/i,c=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*s,u=e.min(4*c,r);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(o,d);var p=o.splice(0,c);n.sigBytes-=u}return new a.init(p,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(r.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math),n)})),Hn=(te((function(e,t){var n,o,r,s,a,i;e.exports=(r=(o=n=Gn).lib,s=r.Base,a=r.WordArray,(i=o.x64={}).Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],o=0;o<t;o++){var r=e[o];n.push(r.high),n.push(r.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}}),n)})),te((function(e,t){var n;e.exports=(n=Gn,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,o=[],r=0;r<n;r++)o[r>>>2]|=e[r]<<24-r%4*8;t.call(this,o,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.WordArray,o=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r+=2){var s=t[r>>>2]>>>16-r%4*8&65535;o.push(String.fromCharCode(s))}return o.join("")},parse:function(e){for(var n=e.length,o=[],r=0;r<n;r++)o[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(o,2*n)}},o.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],s=0;s<n;s+=2){var a=r(t[s>>>2]>>>16-s%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var n=e.length,o=[],s=0;s<n;s++)o[s>>>1]|=r(e.charCodeAt(s)<<16-s%2*16);return t.create(o,2*n)}}}(),n.enc.Utf16)})),te((function(e,t){var n,o,r;e.exports=(r=(o=n=Gn).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var r=[],s=0;s<n;s+=3)for(var a=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,i=0;i<4&&s+.75*i<n;i++)r.push(o.charAt(a>>>6*(3-i)&63));var l=o.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<n.length;s++)o[n.charCodeAt(s)]=s}var a=n.charAt(64);if(a){var i=e.indexOf(a);-1!==i&&(t=i)}return function(e,t,n){for(var o=[],s=0,a=0;a<t;a++)if(a%4){var i=n[e.charCodeAt(a-1)]<<a%4*2,l=n[e.charCodeAt(a)]>>>6-a%4*2;o[s>>>2]|=(i|l)<<24-s%4*8,s++}return r.create(o,s)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)})),te((function(e,t){var n;e.exports=(n=Gn,function(e){var t=n,o=t.lib,r=o.WordArray,s=o.Hasher,a=t.algo,i=[];!function(){for(var t=0;t<64;t++)i[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=a.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s=this._hash.words,a=e[t+0],l=e[t+1],h=e[t+2],m=e[t+3],g=e[t+4],f=e[t+5],v=e[t+6],y=e[t+7],k=e[t+8],w=e[t+9],I=e[t+10],E=e[t+11],b=e[t+12],C=e[t+13],T=e[t+14],S=e[t+15],_=s[0],N=s[1],D=s[2],U=s[3];_=c(_,N,D,U,a,7,i[0]),U=c(U,_,N,D,l,12,i[1]),D=c(D,U,_,N,h,17,i[2]),N=c(N,D,U,_,m,22,i[3]),_=c(_,N,D,U,g,7,i[4]),U=c(U,_,N,D,f,12,i[5]),D=c(D,U,_,N,v,17,i[6]),N=c(N,D,U,_,y,22,i[7]),_=c(_,N,D,U,k,7,i[8]),U=c(U,_,N,D,w,12,i[9]),D=c(D,U,_,N,I,17,i[10]),N=c(N,D,U,_,E,22,i[11]),_=c(_,N,D,U,b,7,i[12]),U=c(U,_,N,D,C,12,i[13]),D=c(D,U,_,N,T,17,i[14]),_=u(_,N=c(N,D,U,_,S,22,i[15]),D,U,l,5,i[16]),U=u(U,_,N,D,v,9,i[17]),D=u(D,U,_,N,E,14,i[18]),N=u(N,D,U,_,a,20,i[19]),_=u(_,N,D,U,f,5,i[20]),U=u(U,_,N,D,I,9,i[21]),D=u(D,U,_,N,S,14,i[22]),N=u(N,D,U,_,g,20,i[23]),_=u(_,N,D,U,w,5,i[24]),U=u(U,_,N,D,T,9,i[25]),D=u(D,U,_,N,m,14,i[26]),N=u(N,D,U,_,k,20,i[27]),_=u(_,N,D,U,C,5,i[28]),U=u(U,_,N,D,h,9,i[29]),D=u(D,U,_,N,y,14,i[30]),_=d(_,N=u(N,D,U,_,b,20,i[31]),D,U,f,4,i[32]),U=d(U,_,N,D,k,11,i[33]),D=d(D,U,_,N,E,16,i[34]),N=d(N,D,U,_,T,23,i[35]),_=d(_,N,D,U,l,4,i[36]),U=d(U,_,N,D,g,11,i[37]),D=d(D,U,_,N,y,16,i[38]),N=d(N,D,U,_,I,23,i[39]),_=d(_,N,D,U,C,4,i[40]),U=d(U,_,N,D,a,11,i[41]),D=d(D,U,_,N,m,16,i[42]),N=d(N,D,U,_,v,23,i[43]),_=d(_,N,D,U,w,4,i[44]),U=d(U,_,N,D,b,11,i[45]),D=d(D,U,_,N,S,16,i[46]),_=p(_,N=d(N,D,U,_,h,23,i[47]),D,U,a,6,i[48]),U=p(U,_,N,D,y,10,i[49]),D=p(D,U,_,N,T,15,i[50]),N=p(N,D,U,_,f,21,i[51]),_=p(_,N,D,U,b,6,i[52]),U=p(U,_,N,D,m,10,i[53]),D=p(D,U,_,N,I,15,i[54]),N=p(N,D,U,_,l,21,i[55]),_=p(_,N,D,U,k,6,i[56]),U=p(U,_,N,D,S,10,i[57]),D=p(D,U,_,N,v,15,i[58]),N=p(N,D,U,_,C,21,i[59]),_=p(_,N,D,U,g,6,i[60]),U=p(U,_,N,D,E,10,i[61]),D=p(D,U,_,N,h,15,i[62]),N=p(N,D,U,_,w,21,i[63]),s[0]=s[0]+_|0,s[1]=s[1]+N|0,s[2]=s[2]+D|0,s[3]=s[3]+U|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var s=e.floor(o/4294967296),a=o;n[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var i=this._hash,l=i.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return i},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,o,r,s,a){var i=e+(t&n|~t&o)+r+a;return(i<<s|i>>>32-s)+t}function u(e,t,n,o,r,s,a){var i=e+(t&o|n&~o)+r+a;return(i<<s|i>>>32-s)+t}function d(e,t,n,o,r,s,a){var i=e+(t^n^o)+r+a;return(i<<s|i>>>32-s)+t}function p(e,t,n,o,r,s,a){var i=e+(n^(t|~o))+r+a;return(i<<s|i>>>32-s)+t}t.MD5=s._createHelper(l),t.HmacMD5=s._createHmacHelper(l)}(Math),n.MD5)})),te((function(e,t){var n,o,r,s,a,i,l,c;e.exports=(r=(o=n=Gn).lib,s=r.WordArray,a=r.Hasher,i=o.algo,l=[],c=i.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],s=n[2],a=n[3],i=n[4],c=0;c<80;c++){if(c<16)l[c]=0|e[t+c];else{var u=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=u<<1|u>>>31}var d=(o<<5|o>>>27)+i+l[c];d+=c<20?1518500249+(r&s|~r&a):c<40?1859775393+(r^s^a):c<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,i=a,a=s,s=r<<30|r>>>2,r=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+i|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=a._createHelper(c),o.HmacSHA1=a._createHmacHelper(c),n.SHA1)})),te((function(e,t){var n;e.exports=(n=Gn,function(e){var t=n,o=t.lib,r=o.WordArray,s=o.Hasher,a=t.algo,i=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,r=0;r<64;)t(o)&&(r<8&&(i[r]=n(e.pow(o,.5))),l[r]=n(e.pow(o,1/3)),r++),o++}();var c=[],u=a.SHA256=s.extend({_doReset:function(){this._hash=new r.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],s=n[2],a=n[3],i=n[4],u=n[5],d=n[6],p=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var m=c[h-15],g=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,f=c[h-2],v=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;c[h]=g+c[h-7]+v+c[h-16]}var y=o&r^o&s^r&s,k=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=p+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&u^~i&d)+l[h]+c[h];p=d,d=u,u=i,i=a+w|0,a=s,s=r,r=o,o=w+(k+y)|0}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+i|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(o/4294967296),n[15+(r+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),n.SHA256)})),te((function(e,t){var n,o,r,s,a,i;e.exports=(r=(o=n=Gn).lib.WordArray,s=o.algo,a=s.SHA256,i=s.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),o.SHA224=a._createHelper(i),o.HmacSHA224=a._createHmacHelper(i),n.SHA224)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.Hasher,o=e.x64,r=o.Word,s=o.WordArray,a=e.algo;function i(){return r.create.apply(r,arguments)}var l=[i(1116352408,3609767458),i(1899447441,602891725),i(3049323471,3964484399),i(3921009573,2173295548),i(961987163,4081628472),i(1508970993,3053834265),i(2453635748,2937671579),i(2870763221,3664609560),i(3624381080,2734883394),i(310598401,1164996542),i(607225278,1323610764),i(1426881987,3590304994),i(1925078388,4068182383),i(2162078206,991336113),i(2614888103,633803317),i(3248222580,3479774868),i(3835390401,2666613458),i(4022224774,944711139),i(264347078,2341262773),i(604807628,2007800933),i(770255983,1495990901),i(1249150122,1856431235),i(1555081692,3175218132),i(1996064986,2198950837),i(2554220882,3999719339),i(2821834349,766784016),i(2952996808,2566594879),i(3210313671,3203337956),i(3336571891,1034457026),i(3584528711,2466948901),i(113926993,3758326383),i(338241895,168717936),i(666307205,1188179964),i(773529912,1546045734),i(1294757372,1522805485),i(1396182291,2643833823),i(1695183700,2343527390),i(1986661051,1014477480),i(2177026350,1206759142),i(2456956037,344077627),i(2730485921,1290863460),i(2820302411,3158454273),i(3259730800,3505952657),i(3345764771,106217008),i(3516065817,3606008344),i(3600352804,1432725776),i(4094571909,1467031594),i(275423344,851169720),i(430227734,3100823752),i(506948616,1363258195),i(659060556,3750685593),i(883997877,3785050280),i(958139571,3318307427),i(1322822218,3812723403),i(1537002063,2003034995),i(1747873779,3602036899),i(1955562222,1575990012),i(2024104815,1125592928),i(2227730452,2716904306),i(2361852424,442776044),i(2428436474,593698344),i(2756734187,3733110249),i(3204031479,2999351573),i(3329325298,3815920427),i(3391569614,3928383900),i(3515267271,566280711),i(3940187606,3454069534),i(4118630271,4000239992),i(116418474,1914138554),i(174292421,2731055270),i(289380356,3203993006),i(460393269,320620315),i(685471733,587496836),i(852142971,1086792851),i(1017036298,365543100),i(1126000580,2618297676),i(1288033470,3409855158),i(1501505948,4234509866),i(1607167915,987167468),i(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=i()}();var u=a.SHA512=t.extend({_doReset:function(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],s=n[2],a=n[3],i=n[4],u=n[5],d=n[6],p=n[7],h=o.high,m=o.low,g=r.high,f=r.low,v=s.high,y=s.low,k=a.high,w=a.low,I=i.high,E=i.low,b=u.high,C=u.low,T=d.high,S=d.low,_=p.high,N=p.low,D=h,U=m,M=g,B=f,x=v,V=y,L=k,R=w,A=I,P=E,O=b,G=C,H=T,j=S,z=_,F=N,$=0;$<80;$++){var Z=c[$];if($<16)var Y=Z.high=0|e[t+2*$],K=Z.low=0|e[t+2*$+1];else{var W=c[$-15],q=W.high,X=W.low,J=(q>>>1|X<<31)^(q>>>8|X<<24)^q>>>7,Q=(X>>>1|q<<31)^(X>>>8|q<<24)^(X>>>7|q<<25),ee=c[$-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,re=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),se=c[$-7],ae=se.high,ie=se.low,le=c[$-16],ce=le.high,ue=le.low;Y=(Y=(Y=J+ae+((K=Q+ie)>>>0<Q>>>0?1:0))+oe+((K+=re)>>>0<re>>>0?1:0))+ce+((K+=ue)>>>0<ue>>>0?1:0),Z.high=Y,Z.low=K}var de,pe=A&O^~A&H,he=P&G^~P&j,me=D&M^D&x^M&x,ge=U&B^U&V^B&V,fe=(D>>>28|U<<4)^(D<<30|U>>>2)^(D<<25|U>>>7),ve=(U>>>28|D<<4)^(U<<30|D>>>2)^(U<<25|D>>>7),ye=(A>>>14|P<<18)^(A>>>18|P<<14)^(A<<23|P>>>9),ke=(P>>>14|A<<18)^(P>>>18|A<<14)^(P<<23|A>>>9),we=l[$],Ie=we.high,Ee=we.low,be=z+ye+((de=F+ke)>>>0<F>>>0?1:0),Ce=ve+ge;z=H,F=j,H=O,j=G,O=A,G=P,A=L+(be=(be=(be=be+pe+((de+=he)>>>0<he>>>0?1:0))+Ie+((de+=Ee)>>>0<Ee>>>0?1:0))+Y+((de+=K)>>>0<K>>>0?1:0))+((P=R+de|0)>>>0<R>>>0?1:0)|0,L=x,R=V,x=M,V=B,M=D,B=U,D=be+(fe+me+(Ce>>>0<ve>>>0?1:0))+((U=de+Ce|0)>>>0<de>>>0?1:0)|0}m=o.low=m+U,o.high=h+D+(m>>>0<U>>>0?1:0),f=r.low=f+B,r.high=g+M+(f>>>0<B>>>0?1:0),y=s.low=y+V,s.high=v+x+(y>>>0<V>>>0?1:0),w=a.low=w+R,a.high=k+L+(w>>>0<R>>>0?1:0),E=i.low=E+P,i.high=I+A+(E>>>0<P>>>0?1:0),C=u.low=C+G,u.high=b+O+(C>>>0<G>>>0?1:0),S=d.low=S+j,d.high=T+H+(S>>>0<j>>>0?1:0),N=p.low=N+F,p.high=_+z+(N>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)})),te((function(e,t){var n,o,r,s,a,i,l,c;e.exports=(r=(o=n=Gn).x64,s=r.Word,a=r.WordArray,i=o.algo,l=i.SHA512,c=i.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var e=l._doFinalize.call(this);return e.sigBytes-=16,e}}),o.SHA384=l._createHelper(c),o.HmacSHA384=l._createHmacHelper(c),n.SHA384)})),te((function(e,t){var n;e.exports=(n=Gn,function(e){var t=n,o=t.lib,r=o.WordArray,s=o.Hasher,a=t.x64.Word,i=t.algo,l=[],c=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,s=0;s<24;s++){for(var i=0,d=0,p=0;p<7;p++){if(1&r){var h=(1<<p)-1;h<32?d^=1<<h:i^=1<<h-32}128&r?r=r<<1^113:r<<=1}u[s]=a.create(i,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var p=i.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,r=0;r<o;r++){var s=e[t+2*r],a=e[t+2*r+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(N=n[r]).high^=a,N.low^=s}for(var i=0;i<24;i++){for(var p=0;p<5;p++){for(var h=0,m=0,g=0;g<5;g++)h^=(N=n[p+5*g]).high,m^=N.low;var f=d[p];f.high=h,f.low=m}for(p=0;p<5;p++){var v=d[(p+4)%5],y=d[(p+1)%5],k=y.high,w=y.low;for(h=v.high^(k<<1|w>>>31),m=v.low^(w<<1|k>>>31),g=0;g<5;g++)(N=n[p+5*g]).high^=h,N.low^=m}for(var I=1;I<25;I++){var E=(N=n[I]).high,b=N.low,C=l[I];C<32?(h=E<<C|b>>>32-C,m=b<<C|E>>>32-C):(h=b<<C-32|E>>>64-C,m=E<<C-32|b>>>64-C);var T=d[c[I]];T.high=h,T.low=m}var S=d[0],_=n[0];for(S.high=_.high,S.low=_.low,p=0;p<5;p++)for(g=0;g<5;g++){var N=n[I=p+5*g],D=d[I],U=d[(p+1)%5+5*g],M=d[(p+2)%5+5*g];N.high=D.high^~U.high&M.high,N.low=D.low^~U.low&M.low}N=n[0];var B=u[i];N.high^=B.high,N.low^=B.low}},_doFinalize:function(){var t=this._data,n=t.words,o=(this._nDataBytes,8*t.sigBytes),s=32*this.blockSize;n[o>>>5]|=1<<24-o%32,n[(e.ceil((o+1)/s)*s>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,i=this.cfg.outputLength/8,l=i/8,c=[],u=0;u<l;u++){var d=a[u],p=d.high,h=d.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(p)}return new r.init(c,i)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=s._createHelper(p),t.HmacSHA3=s._createHmacHelper(p)}(Math),n.SHA3)})),te((function(e,t){var n;e.exports=(n=Gn,function(e){var t=n,o=t.lib,r=o.WordArray,s=o.Hasher,a=t.algo,i=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),p=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=s.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,a,h,w,I,E,b,C,T,S,_,N=this._hash.words,D=d.words,U=p.words,M=i.words,B=l.words,x=c.words,V=u.words;for(E=s=N[0],b=a=N[1],C=h=N[2],T=w=N[3],S=I=N[4],n=0;n<80;n+=1)_=s+e[t+M[n]]|0,_+=n<16?m(a,h,w)+D[0]:n<32?g(a,h,w)+D[1]:n<48?f(a,h,w)+D[2]:n<64?v(a,h,w)+D[3]:y(a,h,w)+D[4],_=(_=k(_|=0,x[n]))+I|0,s=I,I=w,w=k(h,10),h=a,a=_,_=E+e[t+B[n]]|0,_+=n<16?y(b,C,T)+U[0]:n<32?v(b,C,T)+U[1]:n<48?f(b,C,T)+U[2]:n<64?g(b,C,T)+U[3]:m(b,C,T)+U[4],_=(_=k(_|=0,V[n]))+S|0,E=S,S=T,T=k(C,10),C=b,b=_;_=N[1]+h+T|0,N[1]=N[2]+w+S|0,N[2]=N[3]+I+E|0,N[3]=N[4]+s+b|0,N[4]=N[0]+a+C|0,N[0]=_},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,s=r.words,a=0;a<5;a++){var i=s[a];s[a]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}return r},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function f(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function k(e,t){return e<<t|e>>>32-t}t.RIPEMD160=s._createHelper(h),t.HmacRIPEMD160=s._createHmacHelper(h)}(),n.RIPEMD160)})),te((function(e,t){var n,o,r,s,a,i;e.exports=(o=(n=Gn).lib,r=o.Base,s=n.enc,a=s.Utf8,i=n.algo,void(i.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),s=this._iKey=t.clone(),i=r.words,l=s.words,c=0;c<n;c++)i[c]^=1549556828,l[c]^=909522486;r.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var o=t.finalize(this._oKey.clone().concat(n));return o}})))})),te((function(e,t){var n,o,r,s,a,i,l,c,u;e.exports=(r=(o=n=Gn).lib,s=r.Base,a=r.WordArray,i=o.algo,l=i.SHA1,c=i.HMAC,u=i.PBKDF2=s.extend({cfg:s.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=c.create(n.hasher,e),r=a.create(),s=a.create([1]),i=r.words,l=s.words,u=n.keySize,d=n.iterations;i.length<u;){var p=o.update(t).finalize(s);o.reset();for(var h=p.words,m=h.length,g=p,f=1;f<d;f++){g=o.finalize(g),o.reset();for(var v=g.words,y=0;y<m;y++)h[y]^=v[y]}r.concat(p),l[0]++}return r.sigBytes=4*u,r}}),o.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)},n.PBKDF2)})),te((function(e,t){var n,o,r,s,a,i,l,c;e.exports=(r=(o=n=Gn).lib,s=r.Base,a=r.WordArray,i=o.algo,l=i.MD5,c=i.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=n.hasher.create(),r=a.create(),s=r.words,i=n.keySize,l=n.iterations;s.length<i;){c&&o.update(c);var c=o.update(e).finalize(t);o.reset();for(var u=1;u<l;u++)c=o.finalize(c),o.reset();r.concat(c)}return r.sigBytes=4*i,r}}),o.EvpKDF=function(e,t,n){return c.create(n).compute(e,t)},n.EvpKDF)})),te((function(e,t){var n,o,r,s,a,i,l,c,u,d,p,h,m,g,f,v,y,k,w,I,E,b,C,T;e.exports=void((n=Gn).lib.Cipher||(r=n,s=r.lib,a=s.Base,i=s.WordArray,l=s.BufferedBlockAlgorithm,c=r.enc,c.Utf8,u=c.Base64,d=r.algo,p=d.EvpKDF,h=s.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?T:E}return function(t){return{encrypt:function(n,o,r){return e(o).encrypt(t,n,o,r)},decrypt:function(n,o,r){return e(o).decrypt(t,n,o,r)}}}}()}),s.StreamCipher=h.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),m=r.mode={},g=s.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=m.CBC=function(){var e=g.extend();function t(e,t,n){var r=this._iv;if(r){var s=r;this._iv=o}else s=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=s[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize;t.call(this,e,n,r),o.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize,s=e.slice(n,n+r);o.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=s}}),e}(),v=r.pad={},y=v.Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,r=o<<24|o<<16|o<<8|o,s=[],a=0;a<o;a+=4)s.push(r);var l=i.create(s,o);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:f,padding:y}),reset:function(){h.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=n.createEncryptor;else{o=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(n,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),k=s.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),w=r.format={},I=w.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var o=i.create([1398893684,1701076831]).concat(n).concat(t);else o=t;return o.toString(u)},parse:function(e){var t=u.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var o=i.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return k.create({ciphertext:t,salt:o})}},E=s.SerializableCipher=a.extend({cfg:a.extend({format:I}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var r=e.createEncryptor(n,o),s=r.finalize(t),a=r.cfg;return k.create({ciphertext:s,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var r=e.createDecryptor(n,o).finalize(t.ciphertext);return r},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=r.kdf={},C=b.OpenSSL={execute:function(e,t,n,o){o||(o=i.random(8));var r=p.create({keySize:t+n}).compute(e,o),s=i.create(r.words.slice(t),4*n);return r.sigBytes=4*t,k.create({key:r,iv:s,salt:o})}},T=s.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:C}),encrypt:function(e,t,n,o){var r=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=r.iv;var s=E.encrypt.call(this,e,t,r.key,o);return s.mixIn(r),s},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var r=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);o.iv=r.iv;var s=E.decrypt.call(this,e,t,r.key,o);return s}})))})),te((function(e,t){var n;e.exports=((n=Gn).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,o){var r=this._iv;if(r){var s=r.slice(0);this._iv=void 0}else s=this._prevBlock;o.encryptBlock(s,0);for(var a=0;a<n;a++)e[t+a]^=s[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize;t.call(this,e,n,r,o),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize,s=e.slice(n,n+r);t.call(this,e,n,r,o),this._prevBlock=s}}),e}(),n.mode.CFB)})),te((function(e,t){var n,o,r;e.exports=((n=Gn).mode.CTR=(o=n.lib.BlockCipherMode.extend(),r=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,s=this._counter;r&&(s=this._counter=r.slice(0),this._iv=void 0);var a=s.slice(0);n.encryptBlock(a,0),s[o-1]=s[o-1]+1|0;for(var i=0;i<o;i++)e[t+i]^=a[i]}}),o.Decryptor=r,o),n.mode.CTR)})),te((function(e,t){var n;e.exports=((n=Gn).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}var o=e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,r=o.blockSize,s=this._iv,a=this._counter;s&&(a=this._counter=s.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var i=a.slice(0);o.encryptBlock(i,0);for(var l=0;l<r;l++)e[n+l]^=i[l]}});return e.Decryptor=o,e}(),n.mode.CTRGladman)})),te((function(e,t){var n,o,r;e.exports=((n=Gn).mode.OFB=(o=n.lib.BlockCipherMode.extend(),r=o.Encryptor=o.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,s=this._keystream;r&&(s=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(s,0);for(var a=0;a<o;a++)e[t+a]^=s[a]}}),o.Decryptor=r,o),n.mode.OFB)})),te((function(e,t){var n,o;e.exports=((n=Gn).mode.ECB=((o=n.lib.BlockCipherMode.extend()).Encryptor=o.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),o.Decryptor=o.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),o),n.mode.ECB)})),te((function(e,t){var n;e.exports=((n=Gn).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,r=o-n%o,s=n+r-1;e.clamp(),e.words[s>>>2]|=r<<24-s%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)})),te((function(e,t){var n;e.exports=((n=Gn).pad.Iso10126={pad:function(e,t){var o=4*t,r=o-e.sigBytes%o;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)})),te((function(e,t){var n;e.exports=((n=Gn).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)})),te((function(e,t){var n;e.exports=((n=Gn).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)})),te((function(e,t){var n;e.exports=((n=Gn).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)})),te((function(e,t){var n,o,r,s;e.exports=(r=(o=n=Gn).lib.CipherParams,s=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(s)},parse:function(e){var t=s.parse(e);return r.create({ciphertext:t})}},n.format.Hex)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.BlockCipher,o=e.algo,r=[],s=[],a=[],i=[],l=[],c=[],u=[],d=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,o=0;for(t=0;t<256;t++){var m=o^o<<1^o<<2^o<<3^o<<4;m=m>>>8^255&m^99,r[n]=m,s[m]=n;var g=e[n],f=e[g],v=e[f],y=257*e[m]^16843008*m;a[n]=y<<24|y>>>8,i[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,c[n]=y,y=16843009*v^65537*f^257*g^16843008*n,u[m]=y<<24|y>>>8,d[m]=y<<16|y>>>16,p[m]=y<<8|y>>>24,h[m]=y,n?(n=g^e[e[e[v^g]]],o^=e[e[o]]):n=o=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,o=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],a=0;a<o;a++)if(a<n)s[a]=t[a];else{var i=s[a-1];a%n?n>6&&a%n==4&&(i=r[i>>>24]<<24|r[i>>>16&255]<<16|r[i>>>8&255]<<8|r[255&i]):(i=r[(i=i<<8|i>>>24)>>>24]<<24|r[i>>>16&255]<<16|r[i>>>8&255]<<8|r[255&i],i^=m[a/n|0]<<24),s[a]=s[a-n]^i}for(var l=this._invKeySchedule=[],c=0;c<o;c++)a=o-c,i=c%4?s[a]:s[a-4],l[c]=c<4||a<=4?i:u[r[i>>>24]]^d[r[i>>>16&255]]^p[r[i>>>8&255]]^h[r[255&i]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,i,l,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,h,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,r,s,a,i){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],h=4,m=1;m<l;m++){var g=o[c>>>24]^r[u>>>16&255]^s[d>>>8&255]^a[255&p]^n[h++],f=o[u>>>24]^r[d>>>16&255]^s[p>>>8&255]^a[255&c]^n[h++],v=o[d>>>24]^r[p>>>16&255]^s[c>>>8&255]^a[255&u]^n[h++],y=o[p>>>24]^r[c>>>16&255]^s[u>>>8&255]^a[255&d]^n[h++];c=g,u=f,d=v,p=y}g=(i[c>>>24]<<24|i[u>>>16&255]<<16|i[d>>>8&255]<<8|i[255&p])^n[h++],f=(i[u>>>24]<<24|i[d>>>16&255]<<16|i[p>>>8&255]<<8|i[255&c])^n[h++],v=(i[d>>>24]<<24|i[p>>>16&255]<<16|i[c>>>8&255]<<8|i[255&u])^n[h++],y=(i[p>>>24]<<24|i[c>>>16&255]<<16|i[u>>>8&255]<<8|i[255&d])^n[h++],e[t]=g,e[t+1]=f,e[t+2]=v,e[t+3]=y},keySize:8});e.AES=t._createHelper(g)}(),n.AES)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib,o=t.WordArray,r=t.BlockCipher,s=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],i=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=a[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var r=this._subKeys=[],s=0;s<16;s++){var c=r[s]=[],u=l[s];for(n=0;n<24;n++)c[n/6|0]|=t[(i[n]-1+u)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(i[n+24]-1+u)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),p.call(this,1,1431655765);for(var o=0;o<16;o++){for(var r=n[o],s=this._lBlock,a=this._rBlock,i=0,l=0;l<8;l++)i|=c[l][((a^r[l])&u[l])>>>0];this._lBlock=a,this._rBlock=s^i}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,p.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(d);var m=s.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(o.create(e.slice(0,2))),this._des2=d.createEncryptor(o.create(e.slice(2,4))),this._des3=d.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(m)}(),n.TripleDES)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=o.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],r=0;r<256;r++)o[r]=r;r=0;for(var s=0;r<256;r++){var a=r%n,i=t[a>>>2]>>>24-a%4*8&255;s=(s+o[r]+i)%256;var l=o[r];o[r]=o[s],o[s]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,n=this._j,o=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[n],e[n]=s,o|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,o}e.RC4=t._createHelper(r);var a=o.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});e.RC4Drop=t._createHelper(a)}(),n.RC4)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=[],s=[],a=[],i=o.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)r[n]^=o[n+4&7];if(t){var s=t.words,a=s[0],i=s[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),d=c>>>16|4294901760&u,p=u<<16|65535&c;for(r[0]^=c,r[1]^=d,r[2]^=u,r[3]^=p,r[4]^=c,r[5]^=d,r[6]^=u,r[7]^=p,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,i=o>>>16,l=((r*r>>>17)+r*i>>>15)+i*i,c=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(i)}(),n.Rabbit)})),te((function(e,t){var n;e.exports=(n=Gn,function(){var e=n,t=e.lib.StreamCipher,o=e.algo,r=[],s=[],a=[],i=o.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(t){var s=t.words,a=s[0],i=s[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),d=c>>>16|4294901760&u,p=u<<16|65535&c;for(o[0]^=c,o[1]^=d,o[2]^=u,o[3]^=p,o[4]^=c,o[5]^=d,o[6]^=u,o[7]^=p,r=0;r<4;r++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),e[t+o]^=r[o]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],r=65535&o,i=o>>>16,l=((r*r>>>17)+r*i>>>15)+i*i,c=((4294901760&o)*o|0)+((65535&o)*o|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(i)}(),n.RabbitLegacy)})),te((function(e,t){e.exports=Gn})));function jn(){throw new Error("setTimeout has not been defined")}function zn(){throw new Error("clearTimeout has not been defined")}var Fn=jn,$n=zn;function Zn(e){if(Fn===setTimeout)return setTimeout(e,0);if((Fn===jn||!Fn)&&setTimeout)return Fn=setTimeout,setTimeout(e,0);try{return Fn(e,0)}catch(t){try{return Fn.call(null,e,0)}catch(t){return Fn.call(this,e,0)}}}"function"==typeof e.setTimeout&&(Fn=setTimeout),"function"==typeof e.clearTimeout&&($n=clearTimeout);var Yn,Kn=[],Wn=!1,qn=-1;function Xn(){Wn&&Yn&&(Wn=!1,Yn.length?Kn=Yn.concat(Kn):qn=-1,Kn.length&&Jn())}function Jn(){if(!Wn){var e=Zn(Xn);Wn=!0;for(var t=Kn.length;t;){for(Yn=Kn,Kn=[];++qn<t;)Yn&&Yn[qn].run();qn=-1,t=Kn.length}Yn=null,Wn=!1,function(e){if($n===clearTimeout)return clearTimeout(e);if(($n===zn||!$n)&&clearTimeout)return $n=clearTimeout,clearTimeout(e);try{$n(e)}catch(t){try{return $n.call(null,e)}catch(t){return $n.call(this,e)}}}(e)}}function Qn(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Kn.push(new eo(e,t)),1!==Kn.length||Wn||Zn(Jn)}function eo(e,t){this.fun=e,this.array=t}eo.prototype.run=function(){this.fun.apply(null,this.array)};var to=e.performance||{};function no(){}function oo(){oo.init.call(this)}function ro(e){return void 0===e._maxListeners?oo.defaultMaxListeners:e._maxListeners}function so(e,t,n){if(t)e.call(n);else for(var o=e.length,r=mo(e,o),s=0;s<o;++s)r[s].call(n)}function ao(e,t,n,o){if(t)e.call(n,o);else for(var r=e.length,s=mo(e,r),a=0;a<r;++a)s[a].call(n,o)}function io(e,t,n,o,r){if(t)e.call(n,o,r);else for(var s=e.length,a=mo(e,s),i=0;i<s;++i)a[i].call(n,o,r)}function lo(e,t,n,o,r,s){if(t)e.call(n,o,r,s);else for(var a=e.length,i=mo(e,a),l=0;l<a;++l)i[l].call(n,o,r,s)}function co(e,t,n,o){if(t)e.apply(n,o);else for(var r=e.length,s=mo(e,r),a=0;a<r;++a)s[a].apply(n,o)}function uo(e,t,n,o){var r,s,a,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new no,e._eventsCount=0),a){if("function"==typeof a?a=s[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),!a.warned&&(r=ro(e))&&r>0&&a.length>r){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,i=l,"function"==typeof console.warn?console.warn(i):console.log(i)}}else a=s[t]=n,++e._eventsCount;return e}function po(e,t,n){var o=!1;function r(){e.removeListener(t,r),o||(o=!0,n.apply(e,arguments))}return r.listener=n,r}function ho(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function mo(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}to.now||to.mozNow||to.msNow||to.oNow||to.webkitNow,no.prototype=Object.create(null),oo.EventEmitter=oo,oo.usingDomains=!1,oo.prototype.domain=void 0,oo.prototype._events=void 0,oo.prototype._maxListeners=void 0,oo.defaultMaxListeners=10,oo.init=function(){this.domain=null,oo.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new no,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},oo.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},oo.prototype.getMaxListeners=function(){return ro(this)},oo.prototype.emit=function(e){var t,n,o,r,s,a,i,l="error"===e;if(a=this._events)l=l&&null==a.error;else if(!l)return!1;if(i=this.domain,l){if(t=arguments[1],!i){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=i,t.domainThrown=!1,i.emit("error",t),!1}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(o=arguments.length){case 1:so(n,u,this);break;case 2:ao(n,u,this,arguments[1]);break;case 3:io(n,u,this,arguments[1],arguments[2]);break;case 4:lo(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(o-1),s=1;s<o;s++)r[s-1]=arguments[s];co(n,u,this,r)}return!0},oo.prototype.addListener=function(e,t){return uo(this,e,t,!1)},oo.prototype.on=oo.prototype.addListener,oo.prototype.prependListener=function(e,t){return uo(this,e,t,!0)},oo.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,po(this,e,t)),this},oo.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,po(this,e,t)),this},oo.prototype.removeListener=function(e,t){var n,o,r,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new no:(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=n[s].listener,r=s;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new no,this;delete o[e]}else!function(e,t){for(var n=t,o=n+1,r=e.length;o<r;n+=1,o+=1)e[n]=e[o];e.pop()}(n,r);o.removeListener&&this.emit("removeListener",e,a||t)}return this},oo.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new no,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new no:delete n[e]),this;if(0===arguments.length){for(var o,r=Object.keys(n),s=0;s<r.length;++s)"removeListener"!==(o=r[s])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new no,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},oo.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},oo.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ho.call(e,t)},oo.prototype.listenerCount=ho,oo.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var go="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},fo=/%[sdj%]/g;function vo(e){if(!Do(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Io(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,r=o.length,s=String(e).replace(fo,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}})),a=o[n];n<r;a=o[++n])No(a)||!Bo(a)?s+=" "+a:s+=" "+Io(a);return s}function yo(t,n){if(Uo(e.process))return function(){return yo(t,n).apply(this,arguments)};var o=!1;return function(){return o||(console.error(n),o=!0),t.apply(this,arguments)}}var ko,wo={};function Io(e,t){var n={seen:[],stylize:bo};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_o(t)?n.showHidden=t:t&&function(e,t){if(!t||!Bo(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]]}(n,t),Uo(n.showHidden)&&(n.showHidden=!1),Uo(n.depth)&&(n.depth=2),Uo(n.colors)&&(n.colors=!1),Uo(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Eo),Co(n,e,n.depth)}function Eo(e,t){var n=Io.styles[t];return n?"["+Io.colors[n][0]+"m"+e+"["+Io.colors[n][1]+"m":e}function bo(e,t){return e}function Co(e,t,n){if(e.customInspect&&t&&Lo(t.inspect)&&t.inspect!==Io&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return Do(o)||(o=Co(e,o,n)),o}var r=function(e,t){if(Uo(t))return e.stylize("undefined","undefined");if(Do(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return o=t,"number"==typeof o?e.stylize(""+t,"number"):_o(t)?e.stylize(""+t,"boolean"):No(t)?e.stylize("null","null"):void 0;var o}(e,t);if(r)return r;var s=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),Vo(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return To(t);if(0===s.length){if(Lo(t)){var i=t.name?": "+t.name:"";return e.stylize("[Function"+i+"]","special")}if(Mo(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(xo(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Vo(t))return To(t)}var l,c,u="",d=!1,p=["{","}"];return l=t,Array.isArray(l)&&(d=!0,p=["[","]"]),Lo(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),Mo(t)&&(u=" "+RegExp.prototype.toString.call(t)),xo(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Vo(t)&&(u=" "+To(t)),0!==s.length||d&&0!=t.length?n<0?Mo(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=d?function(e,t,n,o,r){for(var s=[],a=0,i=t.length;a<i;++a)Ao(t,String(a))?s.push(So(e,t,n,o,String(a),!0)):s.push("");return r.forEach((function(r){r.match(/^\d+$/)||s.push(So(e,t,n,o,r,!0))})),s}(e,t,n,a,s):s.map((function(o){return So(e,t,n,a,o,d)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,p)):p[0]+u+p[1]}function To(e){return"["+Error.prototype.toString.call(e)+"]"}function So(e,t,n,o,r,s){var a,i,l;if((l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?i=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(i=e.stylize("[Setter]","special")),Ao(o,r)||(a="["+r+"]"),i||(e.seen.indexOf(l.value)<0?(i=No(n)?Co(e,l.value,null):Co(e,l.value,n-1)).indexOf("\n")>-1&&(i=s?i.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+i.split("\n").map((function(e){return"   "+e})).join("\n")):i=e.stylize("[Circular]","special")),Uo(a)){if(s&&r.match(/^\d+$/))return i;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+i}function _o(e){return"boolean"==typeof e}function No(e){return null===e}function Do(e){return"string"==typeof e}function Uo(e){return void 0===e}function Mo(e){return Bo(e)&&"[object RegExp]"===Ro(e)}function Bo(e){return"object"==typeof e&&null!==e}function xo(e){return Bo(e)&&"[object Date]"===Ro(e)}function Vo(e){return Bo(e)&&("[object Error]"===Ro(e)||e instanceof Error)}function Lo(e){return"function"==typeof e}function Ro(e){return Object.prototype.toString.call(e)}function Ao(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Po(){this.head=null,this.tail=null,this.length=0}Io.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Io.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Po.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},Po.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},Po.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},Po.prototype.clear=function(){this.head=this.tail=null,this.length=0},Po.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},Po.prototype.concat=function(e){if(0===this.length)return g.alloc(0);if(1===this.length)return this.head.data;for(var t=g.allocUnsafe(e>>>0),n=this.head,o=0;n;)n.data.copy(t,o),o+=n.data.length,n=n.next;return t};var Oo=g.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Go(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!Oo(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=jo;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=zo;break;default:return void(this.write=Ho)}this.charBuffer=new g(6),this.charReceived=0,this.charLength=0}function Ho(e){return e.toString(this.encoding)}function jo(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function zo(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Go.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&o<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o,r=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),r=(t+=e.toString(this.encoding,0,r)).length-1,(o=t.charCodeAt(r))>=55296&&o<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,r)}return t},Go.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Go.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,r=this.encoding;t+=o.slice(0,n).toString(r)}return t},Zo.ReadableState=$o;var Fo=function(e){return Uo(ko)&&(ko=""),e=e.toUpperCase(),wo[e]||(new RegExp("\\b"+e+"\\b","i").test(ko)?wo[e]=function(){var t=vo.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:wo[e]=function(){}),wo[e]}("stream");function $o(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof wr&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new Po,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new Go(e.encoding),this.encoding=e.encoding)}function Zo(e){if(!(this instanceof Zo))return new Zo(e);this._readableState=new $o(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),oo.call(this)}function Yo(e,t,n,o,r){var s=function(e,t){var n=null;return J(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(s)e.emit("error",s);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,qo(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var i=new Error("stream.unshift() after end event");e.emit("error",i)}else{var l;!t.decoder||r||o||(n=t.decoder.write(n),l=!t.objectMode&&0===n.length),r||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&qo(e))),function(e,t){t.readingMore||(t.readingMore=!0,Qn(Jo,e,t))}(e,t)}else r||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}go(Zo,oo),Zo.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=g.from(e,t),t=""),Yo(this,n,e,t,!1)},Zo.prototype.unshift=function(e){return Yo(this,this._readableState,e,"",!0)},Zo.prototype.isPaused=function(){return!1===this._readableState.flowing},Zo.prototype.setEncoding=function(e){return this._readableState.decoder=new Go(e),this._readableState.encoding=e,this};var Ko=8388608;function Wo(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=Ko?e=Ko:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function qo(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Fo("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Qn(Xo,e):Xo(e))}function Xo(e){Fo("emit readable"),e.emit("readable"),tr(e)}function Jo(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Fo("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function Qo(e){Fo("readable nexttick read 0"),e.read(0)}function er(e,t){t.reading||(Fo("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),tr(e),t.flowing&&!t.reading&&e.read(0)}function tr(e){var t=e._readableState;for(Fo("flow",t.flowing);t.flowing&&null!==e.read(););}function nr(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var o;return e<t.head.data.length?(o=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):o=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,o=1,r=n.data;for(e-=r.length;n=n.next;){var s=n.data,a=e>s.length?s.length:e;if(a===s.length?r+=s:r+=s.slice(0,e),0===(e-=a)){a===s.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(a));break}++o}return t.length-=o,r}(e,t):function(e,t){var n=g.allocUnsafe(e),o=t.head,r=1;for(o.data.copy(n),e-=o.data.length;o=o.next;){var s=o.data,a=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,a),0===(e-=a)){a===s.length?(++r,o.next?t.head=o.next:t.head=t.tail=null):(t.head=o,o.data=s.slice(a));break}++r}return t.length-=r,n}(e,t),o}(e,t.buffer,t.decoder),n);var n}function or(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Qn(rr,t,e))}function rr(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function sr(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function ar(){}function ir(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function lr(e,t){Object.defineProperty(this,"buffer",{get:yo((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof wr&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,o=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,o,r){--t.pendingcb,n?Qn(r,o):r(o),e._writableState.errorEmitted=!0,e.emit("error",o)}(e,n,o,t,r);else{var s=hr(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||pr(e,n),o?Qn(dr,e,n,s,r):dr(e,n,s,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new fr(this)}function cr(e){if(!(this instanceof cr||this instanceof wr))return new cr(e);this._writableState=new lr(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),oo.call(this)}function ur(e,t,n,o,r,s,a){t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function dr(e,t,n,o){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,o(),gr(e,t)}function pr(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,r=new Array(o),s=t.corkedRequestsFree;s.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;ur(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new fr(t)}else{for(;n;){var i=n.chunk,l=n.encoding,c=n.callback;if(ur(e,t,!1,t.objectMode?1:i.length,i,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function hr(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function mr(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function gr(e,t){var n=hr(t);return n&&(0===t.pendingcb?(mr(e,t),t.finished=!0,e.emit("finish")):mr(e,t)),n}function fr(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var o=t.entry;for(t.entry=null;o;){var r=o.callback;e.pendingcb--,r(n),o=o.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Zo.prototype.read=function(e){Fo("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Fo("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?or(this):qo(this),null;if(0===(e=Wo(e,t))&&t.ended)return 0===t.length&&or(this),null;var o,r=t.needReadable;return Fo("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&Fo("length less than watermark",r=!0),t.ended||t.reading?Fo("reading or ended",r=!1):r&&(Fo("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Wo(n,t))),null===(o=e>0?nr(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&or(this)),null!==o&&this.emit("data",o),o},Zo.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Zo.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,Fo("pipe count=%d opts=%j",o.pipesCount,t);var r=t&&!1===t.end?c:a;function s(e){Fo("onunpipe"),e===n&&c()}function a(){Fo("onend"),e.end()}o.endEmitted?Qn(r):n.once("end",r),e.on("unpipe",s);var i=function(e){return function(){var t=e._readableState;Fo("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,tr(e))}}(n);e.on("drain",i);var l=!1;function c(){Fo("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("drain",i),e.removeListener("error",p),e.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",c),n.removeListener("data",d),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||i()}var u=!1;function d(t){Fo("ondata"),u=!1,!1!==e.write(t)||u||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==sr(o.pipes,e))&&!l&&(Fo("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,u=!0),n.pause())}function p(t){var n;Fo("onerror",t),g(),e.removeListener("error",p),0===(n="error",e.listeners(n).length)&&e.emit("error",t)}function h(){e.removeListener("finish",m),g()}function m(){Fo("onfinish"),e.removeListener("close",h),g()}function g(){Fo("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",m),e.emit("pipe",n),o.flowing||(Fo("pipe resume"),n.resume()),e},Zo.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this);return this}var s=sr(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Zo.prototype.on=function(e,t){var n=oo.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&qo(this):Qn(Qo,this))}return n},Zo.prototype.addListener=Zo.prototype.on,Zo.prototype.resume=function(){var e=this._readableState;return e.flowing||(Fo("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Qn(er,e,t))}(this,e)),this},Zo.prototype.pause=function(){return Fo("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Fo("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Zo.prototype.wrap=function(e){var t=this._readableState,n=!1,o=this;for(var r in e.on("end",(function(){if(Fo("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&o.push(e)}o.push(null)})),e.on("data",(function(r){Fo("wrapped data"),t.decoder&&(r=t.decoder.write(r)),t.objectMode&&null==r||(t.objectMode||r&&r.length)&&(o.push(r)||(n=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));return function(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,o.emit.bind(o,t))})),o._read=function(t){Fo("wrapped _read",t),n&&(n=!1,e.resume())},o},Zo._fromList=nr,cr.WritableState=lr,go(cr,oo),lr.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},cr.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},cr.prototype.write=function(e,t,n){var o=this._writableState,r=!1;return"function"==typeof t&&(n=t,t=null),g.isBuffer(e)?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=ar),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),Qn(t,n)}(this,n):function(e,t,n,o){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):g.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),Qn(o,s),r=!1),r}(this,o,e,n)&&(o.pendingcb++,r=function(e,t,n,o,r){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=g.from(t,n)),t}(t,n,o),g.isBuffer(n)&&(o="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var i=t.lastBufferedRequest;t.lastBufferedRequest=new ir(n,o,r),i?i.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ur(e,t,!1,s,n,o,r);return a}(this,o,e,t,n)),r},cr.prototype.cork=function(){this._writableState.corked++},cr.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||pr(this,e))},cr.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},cr.prototype._write=function(e,t,n){n(new Error("not implemented"))},cr.prototype._writev=null,cr.prototype.end=function(e,t,n){var o=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(e,t,n){t.ending=!0,gr(e,t),n&&(t.finished?Qn(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,o,n)},go(wr,Zo);for(var vr=Object.keys(cr.prototype),yr=0;yr<vr.length;yr++){var kr=vr[yr];wr.prototype[kr]||(wr.prototype[kr]=cr.prototype[kr])}function wr(e){if(!(this instanceof wr))return new wr(e);Zo.call(this,e),cr.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Ir)}function Ir(){this.allowHalfOpen||this._writableState.ended||Qn(Er,this)}function Er(e){e.end()}function br(e){this.afterTransform=function(t,n){return function(e,t,n){var o=e._transformState;o.transforming=!1;var r=o.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,null!=n&&e.push(n),r(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Cr(e){if(!(this instanceof Cr))return new Cr(e);wr.call(this,e),this._transformState=new br(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){Tr(t,e)})):Tr(t)}))}function Tr(e,t){if(t)return e.emit("error",t);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function Sr(e){if(!(this instanceof Sr))return new Sr(e);Cr.call(this,e)}function _r(){oo.call(this)}go(Cr,wr),Cr.prototype.push=function(e,t){return this._transformState.needTransform=!1,wr.prototype.push.call(this,e,t)},Cr.prototype._transform=function(e,t,n){throw new Error("Not implemented")},Cr.prototype._write=function(e,t,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=t,!o.transforming){var r=this._readableState;(o.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},Cr.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},go(Sr,Cr),Sr.prototype._transform=function(e,t,n){n(null,e)},go(_r,oo),_r.Readable=Zo,_r.Writable=cr,_r.Duplex=wr,_r.Transform=Cr,_r.PassThrough=Sr,_r.Stream=_r,_r.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",i));var s=!1;function a(){s||(s=!0,e.end())}function i(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===oo.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",o),e.removeListener("drain",r),n.removeListener("end",a),n.removeListener("close",i),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};var Nr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Dr(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ur(e,t,n,o,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+o),r);else for(var s=0;s<o;s++)e[r+s]=t[n+s]}var Mr=Uint8Array,Br=Uint16Array,xr=Int32Array,Vr=4,Lr=0,Rr=1,Ar=2;function Pr(e){for(var t=e.length;--t>=0;)e[t]=0}var Or=0,Gr=1,Hr=2,jr=29,zr=256,Fr=zr+1+jr,$r=30,Zr=19,Yr=2*Fr+1,Kr=15,Wr=16,qr=7,Xr=256,Jr=16,Qr=17,es=18,ts=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ns=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],os=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rs=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ss=new Array(2*(Fr+2));Pr(ss);var as=new Array(2*$r);Pr(as);var is=new Array(512);Pr(is);var ls=new Array(256);Pr(ls);var cs=new Array(jr);Pr(cs);var us,ds,ps,hs=new Array($r);function ms(e,t,n,o,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=o,this.max_length=r,this.has_stree=e&&e.length}function gs(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function fs(e){return e<256?is[e]:is[256+(e>>>7)]}function vs(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function ys(e,t,n){e.bi_valid>Wr-n?(e.bi_buf|=t<<e.bi_valid&65535,vs(e,e.bi_buf),e.bi_buf=t>>Wr-e.bi_valid,e.bi_valid+=n-Wr):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function ks(e,t,n){ys(e,n[2*t],n[2*t+1])}function ws(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Is(e,t,n){var o,r,s=new Array(Kr+1),a=0;for(o=1;o<=Kr;o++)s[o]=a=a+n[o-1]<<1;for(r=0;r<=t;r++){var i=e[2*r+1];0!==i&&(e[2*r]=ws(s[i]++,i))}}function Es(e){var t;for(t=0;t<Fr;t++)e.dyn_ltree[2*t]=0;for(t=0;t<$r;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Zr;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Xr]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bs(e){e.bi_valid>8?vs(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Cs(e,t,n,o){var r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&o[t]<=o[n]}function Ts(e,t,n){for(var o=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Cs(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Cs(t,o,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=o}function Ss(e,t,n){var o,r,s,a,i=0;if(0!==e.last_lit)do{o=e.pending_buf[e.d_buf+2*i]<<8|e.pending_buf[e.d_buf+2*i+1],r=e.pending_buf[e.l_buf+i],i++,0===o?ks(e,r,t):(ks(e,(s=ls[r])+zr+1,t),0!==(a=ts[s])&&ys(e,r-=cs[s],a),ks(e,s=fs(--o),n),0!==(a=ns[s])&&ys(e,o-=hs[s],a))}while(i<e.last_lit);ks(e,Xr,t)}function _s(e,t){var n,o,r,s=t.dyn_tree,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=Yr,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,i&&(e.static_len-=a[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Ts(e,s,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ts(e,s,1),o=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=o,s[2*r]=s[2*n]+s[2*o],e.depth[r]=(e.depth[n]>=e.depth[o]?e.depth[n]:e.depth[o])+1,s[2*n+1]=s[2*o+1]=r,e.heap[1]=r++,Ts(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,o,r,s,a,i,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(s=0;s<=Kr;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Yr;n++)(s=l[2*l[2*(o=e.heap[n])+1]+1]+1)>m&&(s=m,g++),l[2*o+1]=s,o>c||(e.bl_count[s]++,a=0,o>=h&&(a=p[o-h]),i=l[2*o],e.opt_len+=i*(s+a),d&&(e.static_len+=i*(u[2*o+1]+a)));if(0!==g){do{for(s=m-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[m]--,g-=2}while(g>0);for(s=m;0!==s;s--)for(o=e.bl_count[s];0!==o;)(r=e.heap[--n])>c||(l[2*r+1]!==s&&(e.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),o--)}}(e,t),Is(s,c,e.bl_count)}function Ns(e,t,n){var o,r,s=-1,a=t[1],i=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,o=0;o<=n;o++)r=a,a=t[2*(o+1)+1],++i<l&&r===a||(i<c?e.bl_tree[2*r]+=i:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[2*Jr]++):i<=10?e.bl_tree[2*Qr]++:e.bl_tree[2*es]++,i=0,s=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}function Ds(e,t,n){var o,r,s=-1,a=t[1],i=0,l=7,c=4;for(0===a&&(l=138,c=3),o=0;o<=n;o++)if(r=a,a=t[2*(o+1)+1],!(++i<l&&r===a)){if(i<c)do{ks(e,r,e.bl_tree)}while(0!=--i);else 0!==r?(r!==s&&(ks(e,r,e.bl_tree),i--),ks(e,Jr,e.bl_tree),ys(e,i-3,2)):i<=10?(ks(e,Qr,e.bl_tree),ys(e,i-3,3)):(ks(e,es,e.bl_tree),ys(e,i-11,7));i=0,s=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}Pr(hs);var Us=!1;function Ms(e){Us||(function(){var e,t,n,o,r,s=new Array(Kr+1);for(n=0,o=0;o<jr-1;o++)for(cs[o]=n,e=0;e<1<<ts[o];e++)ls[n++]=o;for(ls[n-1]=o,r=0,o=0;o<16;o++)for(hs[o]=r,e=0;e<1<<ns[o];e++)is[r++]=o;for(r>>=7;o<$r;o++)for(hs[o]=r<<7,e=0;e<1<<ns[o]-7;e++)is[256+r++]=o;for(t=0;t<=Kr;t++)s[t]=0;for(e=0;e<=143;)ss[2*e+1]=8,e++,s[8]++;for(;e<=255;)ss[2*e+1]=9,e++,s[9]++;for(;e<=279;)ss[2*e+1]=7,e++,s[7]++;for(;e<=287;)ss[2*e+1]=8,e++,s[8]++;for(Is(ss,Fr+1,s),e=0;e<$r;e++)as[2*e+1]=5,as[2*e]=ws(e,5);us=new ms(ss,ts,zr+1,Fr,Kr),ds=new ms(as,ns,0,$r,Kr),ps=new ms(new Array(0),os,0,Zr,qr)}(),Us=!0),e.l_desc=new gs(e.dyn_ltree,us),e.d_desc=new gs(e.dyn_dtree,ds),e.bl_desc=new gs(e.bl_tree,ps),e.bi_buf=0,e.bi_valid=0,Es(e)}function Bs(e,t,n,o){ys(e,(Or<<1)+(o?1:0),3),function(e,t,n,o){bs(e),o&&(vs(e,n),vs(e,~n)),Ur(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}function xs(e){ys(e,Gr<<1,3),ks(e,Xr,ss),function(e){16===e.bi_valid?(vs(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function Vs(e,t,n,o){var r,s,a=0;e.level>0?(e.strm.data_type===Ar&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Lr;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Rr;for(t=32;t<zr;t++)if(0!==e.dyn_ltree[2*t])return Rr;return Lr}(e)),_s(e,e.l_desc),_s(e,e.d_desc),a=function(e){var t;for(Ns(e,e.dyn_ltree,e.l_desc.max_code),Ns(e,e.dyn_dtree,e.d_desc.max_code),_s(e,e.bl_desc),t=Zr-1;t>=3&&0===e.bl_tree[2*rs[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?Bs(e,t,n,o):e.strategy===Vr||s===r?(ys(e,(Gr<<1)+(o?1:0),3),Ss(e,ss,as)):(ys(e,(Hr<<1)+(o?1:0),3),function(e,t,n,o){var r;for(ys(e,t-257,5),ys(e,n-1,5),ys(e,o-4,4),r=0;r<o;r++)ys(e,e.bl_tree[2*rs[r]+1],3);Ds(e,e.dyn_ltree,t-1),Ds(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Ss(e,e.dyn_ltree,e.dyn_dtree)),Es(e),o&&bs(e)}function Ls(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ls[n]+zr+1)]++,e.dyn_dtree[2*fs(t)]++),e.last_lit===e.lit_bufsize-1}function Rs(e,t,n,o){for(var r=65535&e|0,s=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(r=r+t[o++]|0)|0}while(--a);r%=65521,s%=65521}return r|s<<16|0}var As=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function Ps(e,t,n,o){var r=As,s=o+n;e^=-1;for(var a=o;a<s;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}var Os,Gs=0,Hs=1,js=3,zs=4,Fs=5,$s=0,Zs=1,Ys=-2,Ks=-3,Ws=-5,qs=-1,Xs=1,Js=2,Qs=3,ea=4,ta=2,na=8,oa=9,ra=286,sa=30,aa=19,ia=2*ra+1,la=15,ca=3,ua=258,da=ua+ca+1,pa=32,ha=42,ma=69,ga=73,fa=91,va=103,ya=113,ka=666,wa=1,Ia=2,Ea=3,ba=4,Ca=3;function Ta(e,t){return e.msg=Nr[t],t}function Sa(e){return(e<<1)-(e>4?9:0)}function _a(e){for(var t=e.length;--t>=0;)e[t]=0}function Na(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Ur(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function Da(e,t){Vs(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Na(e.strm)}function Ua(e,t){e.pending_buf[e.pending++]=t}function Ma(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Ba(e,t){var n,o,r=e.max_chain_length,s=e.strstart,a=e.prev_length,i=e.nice_match,l=e.strstart>e.w_size-da?e.strstart-(e.w_size-da):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+ua,h=c[s+a-1],m=c[s+a];e.prev_length>=e.good_match&&(r>>=2),i>e.lookahead&&(i=e.lookahead);do{if(c[(n=t)+a]===m&&c[n+a-1]===h&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<p);if(o=ua-(p-s),s=p-ua,o>a){if(e.match_start=t,a=o,o>=i)break;h=c[s+a-1],m=c[s+a]}}}while((t=d[t&u])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead}function xa(e){var t,n,o,r,s,a,i,l,c,u,d=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-da)){Ur(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{o=e.head[--t],e.head[t]=o>=d?o-d:0}while(--n);t=n=d;do{o=e.prev[--t],e.prev[t]=o>=d?o-d:0}while(--n);r+=d}if(0===e.strm.avail_in)break;if(a=e.strm,i=e.window,l=e.strstart+e.lookahead,c=r,u=void 0,(u=a.avail_in)>c&&(u=c),n=0===u?0:(a.avail_in-=u,Ur(i,a.input,a.next_in,u,l),1===a.state.wrap?a.adler=Rs(a.adler,i,u,l):2===a.state.wrap&&(a.adler=Ps(a.adler,i,u,l)),a.next_in+=u,a.total_in+=u,u),e.lookahead+=n,e.lookahead+e.insert>=ca)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+ca-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<ca)););}while(e.lookahead<da&&0!==e.strm.avail_in)}function Va(e,t){for(var n,o;;){if(e.lookahead<da){if(xa(e),e.lookahead<da&&t===Gs)return wa;if(0===e.lookahead)break}if(n=0,e.lookahead>=ca&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ca-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-da&&(e.match_length=Ba(e,n)),e.match_length>=ca)if(o=Ls(e,e.strstart-e.match_start,e.match_length-ca),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ca){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ca-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=Ls(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Da(e,!1),0===e.strm.avail_out))return wa}return e.insert=e.strstart<ca-1?e.strstart:ca-1,t===zs?(Da(e,!0),0===e.strm.avail_out?Ea:ba):e.last_lit&&(Da(e,!1),0===e.strm.avail_out)?wa:Ia}function La(e,t){for(var n,o,r;;){if(e.lookahead<da){if(xa(e),e.lookahead<da&&t===Gs)return wa;if(0===e.lookahead)break}if(n=0,e.lookahead>=ca&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ca-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ca-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-da&&(e.match_length=Ba(e,n),e.match_length<=5&&(e.strategy===Xs||e.match_length===ca&&e.strstart-e.match_start>4096)&&(e.match_length=ca-1)),e.prev_length>=ca&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-ca,o=Ls(e,e.strstart-1-e.prev_match,e.prev_length-ca),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ca-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ca-1,e.strstart++,o&&(Da(e,!1),0===e.strm.avail_out))return wa}else if(e.match_available){if((o=Ls(e,0,e.window[e.strstart-1]))&&Da(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return wa}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=Ls(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ca-1?e.strstart:ca-1,t===zs?(Da(e,!0),0===e.strm.avail_out?Ea:ba):e.last_lit&&(Da(e,!1),0===e.strm.avail_out)?wa:Ia}function Ra(e,t,n,o,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=o,this.func=r}function Aa(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=na,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Br(2*ia),this.dyn_dtree=new Br(2*(2*sa+1)),this.bl_tree=new Br(2*(2*aa+1)),_a(this.dyn_ltree),_a(this.dyn_dtree),_a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Br(la+1),this.heap=new Br(2*ra+1),_a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Br(2*ra+1),_a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Pa(e){var t,n=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=ta,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ha:ya,e.adler=2===t.wrap?0:1,t.last_flush=Gs,Ms(t),$s):Ta(e,Ys)}(e);return n===$s&&((t=e.state).window_size=2*t.w_size,_a(t.head),t.max_lazy_match=Os[t.level].max_lazy,t.good_match=Os[t.level].good_length,t.nice_match=Os[t.level].nice_length,t.max_chain_length=Os[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ca-1,t.match_available=0,t.ins_h=0),n}function Oa(e,t){var n,o,r,s;if(!e||!e.state||t>Fs||t<0)return e?Ta(e,Ys):Ys;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===ka&&t!==zs)return Ta(e,0===e.avail_out?Ws:Ys);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===ha)if(2===o.wrap)e.adler=0,Ua(o,31),Ua(o,139),Ua(o,8),o.gzhead?(Ua(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Ua(o,255&o.gzhead.time),Ua(o,o.gzhead.time>>8&255),Ua(o,o.gzhead.time>>16&255),Ua(o,o.gzhead.time>>24&255),Ua(o,9===o.level?2:o.strategy>=Js||o.level<2?4:0),Ua(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Ua(o,255&o.gzhead.extra.length),Ua(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=Ps(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ma):(Ua(o,0),Ua(o,0),Ua(o,0),Ua(o,0),Ua(o,0),Ua(o,9===o.level?2:o.strategy>=Js||o.level<2?4:0),Ua(o,Ca),o.status=ya);else{var a=na+(o.w_bits-8<<4)<<8;a|=(o.strategy>=Js||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(a|=pa),a+=31-a%31,o.status=ya,Ma(o,a),0!==o.strstart&&(Ma(o,e.adler>>>16),Ma(o,65535&e.adler)),e.adler=1}if(o.status===ma)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),Na(e),r=o.pending,o.pending!==o.pending_buf_size));)Ua(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ga)}else o.status=ga;if(o.status===ga)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),Na(e),r=o.pending,o.pending===o.pending_buf_size)){s=1;break}s=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Ua(o,s)}while(0!==s);o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),0===s&&(o.gzindex=0,o.status=fa)}else o.status=fa;if(o.status===fa)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),Na(e),r=o.pending,o.pending===o.pending_buf_size)){s=1;break}s=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Ua(o,s)}while(0!==s);o.gzhead.hcrc&&o.pending>r&&(e.adler=Ps(e.adler,o.pending_buf,o.pending-r,r)),0===s&&(o.status=va)}else o.status=va;if(o.status===va&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Na(e),o.pending+2<=o.pending_buf_size&&(Ua(o,255&e.adler),Ua(o,e.adler>>8&255),e.adler=0,o.status=ya)):o.status=ya),0!==o.pending){if(Na(e),0===e.avail_out)return o.last_flush=-1,$s}else if(0===e.avail_in&&Sa(t)<=Sa(n)&&t!==zs)return Ta(e,Ws);if(o.status===ka&&0!==e.avail_in)return Ta(e,Ws);if(0!==e.avail_in||0!==o.lookahead||t!==Gs&&o.status!==ka){var i=o.strategy===Js?function(e,t){for(var n;;){if(0===e.lookahead&&(xa(e),0===e.lookahead)){if(t===Gs)return wa;break}if(e.match_length=0,n=Ls(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Da(e,!1),0===e.strm.avail_out))return wa}return e.insert=0,t===zs?(Da(e,!0),0===e.strm.avail_out?Ea:ba):e.last_lit&&(Da(e,!1),0===e.strm.avail_out)?wa:Ia}(o,t):o.strategy===Qs?function(e,t){for(var n,o,r,s,a=e.window;;){if(e.lookahead<=ua){if(xa(e),e.lookahead<=ua&&t===Gs)return wa;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ca&&e.strstart>0&&(o=a[r=e.strstart-1])===a[++r]&&o===a[++r]&&o===a[++r]){s=e.strstart+ua;do{}while(o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&o===a[++r]&&r<s);e.match_length=ua-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ca?(n=Ls(e,1,e.match_length-ca),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ls(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Da(e,!1),0===e.strm.avail_out))return wa}return e.insert=0,t===zs?(Da(e,!0),0===e.strm.avail_out?Ea:ba):e.last_lit&&(Da(e,!1),0===e.strm.avail_out)?wa:Ia}(o,t):Os[o.level].func(o,t);if(i!==Ea&&i!==ba||(o.status=ka),i===wa||i===Ea)return 0===e.avail_out&&(o.last_flush=-1),$s;if(i===Ia&&(t===Hs?xs(o):t!==Fs&&(Bs(o,0,0,!1),t===js&&(_a(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Na(e),0===e.avail_out))return o.last_flush=-1,$s}return t!==zs?$s:o.wrap<=0?Zs:(2===o.wrap?(Ua(o,255&e.adler),Ua(o,e.adler>>8&255),Ua(o,e.adler>>16&255),Ua(o,e.adler>>24&255),Ua(o,255&e.total_in),Ua(o,e.total_in>>8&255),Ua(o,e.total_in>>16&255),Ua(o,e.total_in>>24&255)):(Ma(o,e.adler>>>16),Ma(o,65535&e.adler)),Na(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?$s:Zs)}Os=[new Ra(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(xa(e),0===e.lookahead&&t===Gs)return wa;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+n;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,Da(e,!1),0===e.strm.avail_out))return wa;if(e.strstart-e.block_start>=e.w_size-da&&(Da(e,!1),0===e.strm.avail_out))return wa}return e.insert=0,t===zs?(Da(e,!0),0===e.strm.avail_out?Ea:ba):(e.strstart>e.block_start&&(Da(e,!1),e.strm.avail_out),wa)})),new Ra(4,4,8,4,Va),new Ra(4,5,16,8,Va),new Ra(4,6,32,32,Va),new Ra(4,4,16,16,La),new Ra(8,16,32,32,La),new Ra(8,16,128,128,La),new Ra(8,32,128,256,La),new Ra(32,128,258,1024,La),new Ra(32,258,258,4096,La)];var Ga=30,Ha=12;function ja(e,t){var n,o,r,s,a,i,l,c,u,d,p,h,m,g,f,v,y,k,w,I,E,b,C,T,S;n=e.state,o=e.next_in,T=e.input,r=o+(e.avail_in-5),s=e.next_out,S=e.output,a=s-(t-e.avail_out),i=s+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,p=n.window,h=n.hold,m=n.bits,g=n.lencode,f=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{m<15&&(h+=T[o++]<<m,m+=8,h+=T[o++]<<m,m+=8),k=g[h&v];t:for(;;){if(h>>>=w=k>>>24,m-=w,0===(w=k>>>16&255))S[s++]=65535&k;else{if(!(16&w)){if(0==(64&w)){k=g[(65535&k)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=Ha;break e}e.msg="invalid literal/length code",n.mode=Ga;break e}I=65535&k,(w&=15)&&(m<w&&(h+=T[o++]<<m,m+=8),I+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=T[o++]<<m,m+=8,h+=T[o++]<<m,m+=8),k=f[h&y];n:for(;;){if(h>>>=w=k>>>24,m-=w,!(16&(w=k>>>16&255))){if(0==(64&w)){k=f[(65535&k)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=Ga;break e}if(E=65535&k,m<(w&=15)&&(h+=T[o++]<<m,(m+=8)<w&&(h+=T[o++]<<m,m+=8)),(E+=h&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=Ga;break e}if(h>>>=w,m-=w,E>(w=s-a)){if((w=E-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=Ga;break e}if(b=0,C=p,0===d){if(b+=c-w,w<I){I-=w;do{S[s++]=p[b++]}while(--w);b=s-E,C=S}}else if(d<w){if(b+=c+d-w,(w-=d)<I){I-=w;do{S[s++]=p[b++]}while(--w);if(b=0,d<I){I-=w=d;do{S[s++]=p[b++]}while(--w);b=s-E,C=S}}}else if(b+=d-w,w<I){I-=w;do{S[s++]=p[b++]}while(--w);b=s-E,C=S}for(;I>2;)S[s++]=C[b++],S[s++]=C[b++],S[s++]=C[b++],I-=3;I&&(S[s++]=C[b++],I>1&&(S[s++]=C[b++]))}else{b=s-E;do{S[s++]=S[b++],S[s++]=S[b++],S[s++]=S[b++],I-=3}while(I>2);I&&(S[s++]=S[b++],I>1&&(S[s++]=S[b++]))}break}}break}}while(o<r&&s<i);o-=I=m>>3,h&=(1<<(m-=I<<3))-1,e.next_in=o,e.next_out=s,e.avail_in=o<r?r-o+5:5-(o-r),e.avail_out=s<i?i-s+257:257-(s-i),n.hold=h,n.bits=m}var za=15,Fa=852,$a=592,Za=0,Ya=1,Ka=2,Wa=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],qa=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Xa=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ja=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Qa(e,t,n,o,r,s,a,i){var l,c,u,d,p,h,m,g,f,v=i.bits,y=0,k=0,w=0,I=0,E=0,b=0,C=0,T=0,S=0,_=0,N=null,D=0,U=new Br(za+1),M=new Br(za+1),B=null,x=0;for(y=0;y<=za;y++)U[y]=0;for(k=0;k<o;k++)U[t[n+k]]++;for(E=v,I=za;I>=1&&0===U[I];I--);if(E>I&&(E=I),0===I)return r[s++]=20971520,r[s++]=20971520,i.bits=1,0;for(w=1;w<I&&0===U[w];w++);for(E<w&&(E=w),T=1,y=1;y<=za;y++)if(T<<=1,(T-=U[y])<0)return-1;if(T>0&&(e===Za||1!==I))return-1;for(M[1]=0,y=1;y<za;y++)M[y+1]=M[y]+U[y];for(k=0;k<o;k++)0!==t[n+k]&&(a[M[t[n+k]]++]=k);if(e===Za?(N=B=a,h=19):e===Ya?(N=Wa,D-=257,B=qa,x-=257,h=256):(N=Xa,B=Ja,h=-1),_=0,k=0,y=w,p=s,b=E,C=0,u=-1,d=(S=1<<E)-1,e===Ya&&S>Fa||e===Ka&&S>$a)return 1;for(;;){m=y-C,a[k]<h?(g=0,f=a[k]):a[k]>h?(g=B[x+a[k]],f=N[D+a[k]]):(g=96,f=0),l=1<<y-C,w=c=1<<b;do{r[p+(_>>C)+(c-=l)]=m<<24|g<<16|f|0}while(0!==c);for(l=1<<y-1;_&l;)l>>=1;if(0!==l?(_&=l-1,_+=l):_=0,k++,0==--U[y]){if(y===I)break;y=t[n+a[k]]}if(y>E&&(_&d)!==u){for(0===C&&(C=E),p+=w,T=1<<(b=y-C);b+C<I&&!((T-=U[b+C])<=0);)b++,T<<=1;if(S+=1<<b,e===Ya&&S>Fa||e===Ka&&S>$a)return 1;r[u=_&d]=E<<24|b<<16|p-s|0}}return 0!==_&&(r[p+_]=y-C<<24|64<<16|0),i.bits=E,0}var ei=0,ti=1,ni=2,oi=4,ri=5,si=6,ai=0,ii=1,li=2,ci=-2,ui=-3,di=-4,pi=-5,hi=8,mi=1,gi=2,fi=3,vi=4,yi=5,ki=6,wi=7,Ii=8,Ei=9,bi=10,Ci=11,Ti=12,Si=13,_i=14,Ni=15,Di=16,Ui=17,Mi=18,Bi=19,xi=20,Vi=21,Li=22,Ri=23,Ai=24,Pi=25,Oi=26,Gi=27,Hi=28,ji=29,zi=30,Fi=31,$i=32,Zi=852,Yi=592;function Ki(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Wi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Br(320),this.work=new Br(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function qi(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=mi,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new xr(Zi),t.distcode=t.distdyn=new xr(Yi),t.sane=1,t.back=-1,ai):ci}(e)):ci}function Xi(e,t){var n,o;return e?(o=new Wi,e.state=o,o.window=null,(n=function(e,t){var n,o;return e&&e.state?(o=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ci:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,qi(e))):ci}(e,t))!==ai&&(e.state=null),n):ci}var Ji,Qi,el=!0;function tl(e){if(el){var t;for(Ji=new xr(512),Qi=new xr(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Qa(ti,e.lens,0,288,Ji,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Qa(ni,e.lens,0,32,Qi,0,e.work,{bits:5}),el=!1}e.lencode=Ji,e.lenbits=9,e.distcode=Qi,e.distbits=5}function nl(e,t){var n,o,r,s,a,i,l,c,u,d,p,h,m,g,f,v,y,k,w,I,E,b,C,T,S=0,_=new Mr(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ci;(n=e.state).mode===Ti&&(n.mode=Si),a=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,o=e.input,i=e.avail_in,c=n.hold,u=n.bits,d=i,p=l,b=ai;e:for(;;)switch(n.mode){case mi:if(0===n.wrap){n.mode=Si;break}for(;u<16;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,_[0]=255&c,_[1]=c>>>8&255,n.check=Ps(n.check,_,2,0),c=0,u=0,n.mode=gi;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=zi;break}if((15&c)!==hi){e.msg="unknown compression method",n.mode=zi;break}if(u-=4,E=8+(15&(c>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=zi;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=512&c?bi:Ti,c=0,u=0;break;case gi:for(;u<16;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==hi){e.msg="unknown compression method",n.mode=zi;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=zi;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(_[0]=255&c,_[1]=c>>>8&255,n.check=Ps(n.check,_,2,0)),c=0,u=0,n.mode=fi;case fi:for(;u<32;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(_[0]=255&c,_[1]=c>>>8&255,_[2]=c>>>16&255,_[3]=c>>>24&255,n.check=Ps(n.check,_,4,0)),c=0,u=0,n.mode=vi;case vi:for(;u<16;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(_[0]=255&c,_[1]=c>>>8&255,n.check=Ps(n.check,_,2,0)),c=0,u=0,n.mode=yi;case yi:if(1024&n.flags){for(;u<16;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(_[0]=255&c,_[1]=c>>>8&255,n.check=Ps(n.check,_,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=ki;case ki:if(1024&n.flags&&((h=n.length)>i&&(h=i),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ur(n.head.extra,o,s,h,E)),512&n.flags&&(n.check=Ps(n.check,o,h,s)),i-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=wi;case wi:if(2048&n.flags){if(0===i)break e;h=0;do{E=o[s+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&h<i);if(512&n.flags&&(n.check=Ps(n.check,o,h,s)),i-=h,s+=h,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ii;case Ii:if(4096&n.flags){if(0===i)break e;h=0;do{E=o[s+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&h<i);if(512&n.flags&&(n.check=Ps(n.check,o,h,s)),i-=h,s+=h,E)break e}else n.head&&(n.head.comment=null);n.mode=Ei;case Ei:if(512&n.flags){for(;u<16;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=zi;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ti;break;case bi:for(;u<32;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}e.adler=n.check=Ki(c),c=0,u=0,n.mode=Ci;case Ci:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=i,n.hold=c,n.bits=u,li;e.adler=n.check=1,n.mode=Ti;case Ti:if(t===ri||t===si)break e;case Si:if(n.last){c>>>=7&u,u-=7&u,n.mode=Gi;break}for(;u<3;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=_i;break;case 1:if(tl(n),n.mode=xi,t===si){c>>>=2,u-=2;break e}break;case 2:n.mode=Ui;break;case 3:e.msg="invalid block type",n.mode=zi}c>>>=2,u-=2;break;case _i:for(c>>>=7&u,u-=7&u;u<32;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=zi;break}if(n.length=65535&c,c=0,u=0,n.mode=Ni,t===si)break e;case Ni:n.mode=Di;case Di:if(h=n.length){if(h>i&&(h=i),h>l&&(h=l),0===h)break e;Ur(r,o,s,h,a),i-=h,s+=h,l-=h,a+=h,n.length-=h;break}n.mode=Ti;break;case Ui:for(;u<14;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=zi;break}n.have=0,n.mode=Mi;case Mi:for(;n.have<n.ncode;){for(;u<3;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.lens[N[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},b=Qa(ei,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,b){e.msg="invalid code lengths set",n.mode=zi;break}n.have=0,n.mode=Bi;case Bi:for(;n.have<n.nlen+n.ndist;){for(;v=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((f=S>>>24)<=u);){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(y<16)c>>>=f,u-=f,n.lens[n.have++]=y;else{if(16===y){for(T=f+2;u<T;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(c>>>=f,u-=f,0===n.have){e.msg="invalid bit length repeat",n.mode=zi;break}E=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===y){for(T=f+3;u<T;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}u-=f,E=0,h=3+(7&(c>>>=f)),c>>>=3,u-=3}else{for(T=f+7;u<T;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}u-=f,E=0,h=11+(127&(c>>>=f)),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=zi;break}for(;h--;)n.lens[n.have++]=E}}if(n.mode===zi)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=zi;break}if(n.lenbits=9,C={bits:n.lenbits},b=Qa(ti,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,b){e.msg="invalid literal/lengths set",n.mode=zi;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},b=Qa(ni,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,b){e.msg="invalid distances set",n.mode=zi;break}if(n.mode=xi,t===si)break e;case xi:n.mode=Vi;case Vi:if(i>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=i,n.hold=c,n.bits=u,ja(e,p),a=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,o=e.input,i=e.avail_in,c=n.hold,u=n.bits,n.mode===Ti&&(n.back=-1);break}for(n.back=0;v=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((f=S>>>24)<=u);){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(v&&0==(240&v)){for(k=f,w=v,I=y;v=(S=n.lencode[I+((c&(1<<k+w)-1)>>k)])>>>16&255,y=65535&S,!(k+(f=S>>>24)<=u);){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}c>>>=k,u-=k,n.back+=k}if(c>>>=f,u-=f,n.back+=f,n.length=y,0===v){n.mode=Oi;break}if(32&v){n.back=-1,n.mode=Ti;break}if(64&v){e.msg="invalid literal/length code",n.mode=zi;break}n.extra=15&v,n.mode=Li;case Li:if(n.extra){for(T=n.extra;u<T;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ri;case Ri:for(;v=(S=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&S,!((f=S>>>24)<=u);){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(0==(240&v)){for(k=f,w=v,I=y;v=(S=n.distcode[I+((c&(1<<k+w)-1)>>k)])>>>16&255,y=65535&S,!(k+(f=S>>>24)<=u);){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}c>>>=k,u-=k,n.back+=k}if(c>>>=f,u-=f,n.back+=f,64&v){e.msg="invalid distance code",n.mode=zi;break}n.offset=y,n.extra=15&v,n.mode=Ai;case Ai:if(n.extra){for(T=n.extra;u<T;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=zi;break}n.mode=Pi;case Pi:if(0===l)break e;if(h=p-l,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=zi;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=r,m=a-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{r[a++]=g[m++]}while(--h);0===n.length&&(n.mode=Vi);break;case Oi:if(0===l)break e;r[a++]=n.length,l--,n.mode=Vi;break;case Gi:if(n.wrap){for(;u<32;){if(0===i)break e;i--,c|=o[s++]<<u,u+=8}if(p-=l,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?Ps(n.check,r,p,a-p):Rs(n.check,r,p,a-p)),p=l,(n.flags?c:Ki(c))!==n.check){e.msg="incorrect data check",n.mode=zi;break}c=0,u=0}n.mode=Hi;case Hi:if(n.wrap&&n.flags){for(;u<32;){if(0===i)break e;i--,c+=o[s++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=zi;break}c=0,u=0}n.mode=ji;case ji:b=ii;break e;case zi:b=ui;break e;case Fi:return di;case $i:default:return ci}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=i,n.hold=c,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<zi&&(n.mode<Gi||t!==oi))&&function(e,t,n,o){var r,s=e.state;null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Mr(s.wsize)),o>=s.wsize?(Ur(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>o&&(r=o),Ur(s.window,t,n-o,r,s.wnext),(o-=r)?(Ur(s.window,t,n-o,o,0),s.wnext=o,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r)))}(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?Ps(n.check,r,p,e.next_out-p):Rs(n.check,r,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ti?128:0)+(n.mode===xi||n.mode===Ni?256:0),(0===d&&0===p||t===oi)&&b===ai&&(b=pi),b}var ol,rl=1,sl=7;function al(e){if(e<rl||e>sl)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function il(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}al.prototype.init=function(e,t,n,o,r){var s;switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=o,3!==this.mode&&4!==this.mode||(this.windowBits+=16),this.mode===sl&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new Dr,this.mode){case rl:case 3:case 5:s=function(e,t,n,o,r,s){if(!e)return Ys;var a=1;if(t===qs&&(t=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),r<1||r>oa||n!==na||o<8||o>15||t<0||t>9||s<0||s>ea)return Ta(e,Ys);8===o&&(o=9);var i=new Aa;return e.state=i,i.strm=e,i.wrap=a,i.gzhead=null,i.w_bits=o,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=r+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ca-1)/ca),i.window=new Mr(2*i.w_size),i.head=new Br(i.hash_size),i.prev=new Br(i.w_size),i.lit_bufsize=1<<r+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new Mr(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=t,i.strategy=s,i.method=n,Pa(e)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case sl:s=Xi(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===s?(this.write_in_progress=!1,this.init_done=!0):this._error(s)},al.prototype.params=function(){throw new Error("deflateParams Not supported")},al.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},al.prototype.write=function(e,t,n,o,r,s,a){this._writeCheck(),this.write_in_progress=!0;var i=this;return Qn((function(){i.write_in_progress=!1;var l=i._write(e,t,n,o,r,s,a);i.callback(l[0],l[1]),i.pending_close&&i.close()})),this},al.prototype.writeSync=function(e,t,n,o,r,s,a){return this._writeCheck(),this._write(e,t,n,o,r,s,a)},al.prototype._write=function(e,t,n,o,r,s,a){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new g(0),o=0,n=0),r._set?r.set=r._set:r.set=il;var i,l=this.strm;switch(l.avail_in=o,l.input=t,l.next_in=n,l.avail_out=a,l.output=r,l.next_out=s,this.mode){case rl:case 3:case 5:i=Oa(l,e);break;case sl:case 2:case 4:case 6:i=nl(l,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==i&&0!==i&&this._error(i),this.write_in_progress=!1,[l.avail_in,l.avail_out]},al.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===rl||3===this.mode||5===this.mode?function(e){var t;e&&e.state&&((t=e.state.status)!==ha&&t!==ma&&t!==ga&&t!==fa&&t!==va&&t!==ya&&t!==ka?Ta(e,Ys):(e.state=null,t===ya&&Ta(e,Ks)))}(this.strm):function(e){if(!e||!e.state)return ci;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},al.prototype.reset=function(){switch(this.mode){case rl:case 5:ol=Pa(this.strm);break;case 2:case 6:ol=qi(this.strm)}0!==ol&&this._error(ol)},al.prototype._error=function(e){this.onerror(Nr[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var ll=Object.freeze({NONE:0,DEFLATE:rl,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:sl,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:al}),cl={};Object.keys(ll).forEach((function(e){cl[e]=ll[e]})),cl.Z_MIN_WINDOWBITS=8,cl.Z_MAX_WINDOWBITS=15,cl.Z_DEFAULT_WINDOWBITS=15,cl.Z_MIN_CHUNK=64,cl.Z_MAX_CHUNK=1/0,cl.Z_DEFAULT_CHUNK=16384,cl.Z_MIN_MEMLEVEL=1,cl.Z_MAX_MEMLEVEL=9,cl.Z_DEFAULT_MEMLEVEL=8,cl.Z_MIN_LEVEL=-1,cl.Z_MAX_LEVEL=9,cl.Z_DEFAULT_LEVEL=cl.Z_DEFAULT_COMPRESSION;var ul={Z_OK:cl.Z_OK,Z_STREAM_END:cl.Z_STREAM_END,Z_NEED_DICT:cl.Z_NEED_DICT,Z_ERRNO:cl.Z_ERRNO,Z_STREAM_ERROR:cl.Z_STREAM_ERROR,Z_DATA_ERROR:cl.Z_DATA_ERROR,Z_MEM_ERROR:cl.Z_MEM_ERROR,Z_BUF_ERROR:cl.Z_BUF_ERROR,Z_VERSION_ERROR:cl.Z_VERSION_ERROR};function dl(e,t,n){var o=[],r=0;function s(){for(var t;null!==(t=e.read());)o.push(t),r+=t.length;e.once("readable",s)}function a(){var t=g.concat(o,r);o=[],n(null,t),e.close()}e.on("error",(function(t){e.removeListener("end",a),e.removeListener("readable",s),n(t)})),e.on("end",a),e.end(t),s()}function pl(e,t){if("string"==typeof t&&(t=new g(t)),!J(t))throw new TypeError("Not a string or buffer");var n=cl.Z_FINISH;return e._processChunk(t,n)}function hl(e){if(!(this instanceof hl))return new hl(e);wl.call(this,e,cl.DEFLATE)}function ml(e){if(!(this instanceof ml))return new ml(e);wl.call(this,e,cl.INFLATE)}function gl(e){if(!(this instanceof gl))return new gl(e);wl.call(this,e,cl.GZIP)}function fl(e){if(!(this instanceof fl))return new fl(e);wl.call(this,e,cl.GUNZIP)}function vl(e){if(!(this instanceof vl))return new vl(e);wl.call(this,e,cl.DEFLATERAW)}function yl(e){if(!(this instanceof yl))return new yl(e);wl.call(this,e,cl.INFLATERAW)}function kl(e){if(!(this instanceof kl))return new kl(e);wl.call(this,e,cl.UNZIP)}function wl(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||cl.Z_DEFAULT_CHUNK,Cr.call(this,e),e.flush&&e.flush!==cl.Z_NO_FLUSH&&e.flush!==cl.Z_PARTIAL_FLUSH&&e.flush!==cl.Z_SYNC_FLUSH&&e.flush!==cl.Z_FULL_FLUSH&&e.flush!==cl.Z_FINISH&&e.flush!==cl.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||cl.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<cl.Z_MIN_CHUNK||e.chunkSize>cl.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<cl.Z_MIN_WINDOWBITS||e.windowBits>cl.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<cl.Z_MIN_LEVEL||e.level>cl.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<cl.Z_MIN_MEMLEVEL||e.memLevel>cl.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=cl.Z_FILTERED&&e.strategy!=cl.Z_HUFFMAN_ONLY&&e.strategy!=cl.Z_RLE&&e.strategy!=cl.Z_FIXED&&e.strategy!=cl.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!J(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new cl.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(e,t){n._binding=null,n._hadError=!0;var o=new Error(e);o.errno=t,o.code=cl.codes[t],n.emit("error",o)};var o=cl.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var r=cl.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._binding.init(e.windowBits||cl.Z_DEFAULT_WINDOWBITS,o,e.memLevel||cl.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new g(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=r,this.once("end",this.close)}Object.keys(ul).forEach((function(e){ul[ul[e]]=e})),go(wl,Cr),wl.prototype.params=function(e,t,n){if(e<cl.Z_MIN_LEVEL||e>cl.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=cl.Z_FILTERED&&t!=cl.Z_HUFFMAN_ONLY&&t!=cl.Z_RLE&&t!=cl.Z_FIXED&&t!=cl.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var o=this;this.flush(cl.Z_SYNC_FLUSH,(function(){o._binding.params(e,t),o._hadError||(o._level=e,o._strategy=t,n&&n())}))}else Qn(n)},wl.prototype.reset=function(){return this._binding.reset()},wl.prototype._flush=function(e){this._transform(new g(0),"",e)},wl.prototype.flush=function(e,t){var n=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=cl.Z_FULL_FLUSH),n.ended)t&&Qn(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var o=this;this.once("drain",(function(){o.flush(t)}))}else this._flushFlag=e,this.write(new g(0),"",t)},wl.prototype.close=function(e){if(e&&Qn(e),!this._closed){this._closed=!0,this._binding.close();var t=this;Qn((function(){t.emit("close")}))}},wl.prototype._transform=function(e,t,n){var o,r=this._writableState,s=(r.ending||r.ended)&&(!e||r.length===e.length);if(null===!e&&!J(e))return n(new Error("invalid input"));s?o=cl.Z_FINISH:(o=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||cl.Z_NO_FLUSH)),this._processChunk(e,o,n)},wl.prototype._processChunk=function(e,t,n){var o=e&&e.length,r=this._chunkSize-this._offset,s=0,a=this,i="function"==typeof n;if(!i){var l,c=[],u=0;this.on("error",(function(e){l=e}));do{var d=this._binding.writeSync(t,e,s,o,this._buffer,this._offset,r)}while(!this._hadError&&m(d[0],d[1]));if(this._hadError)throw l;var p=g.concat(c,u);return this.close(),p}var h=this._binding.write(t,e,s,o,this._buffer,this._offset,r);function m(l,d){if(!a._hadError){var p=r-d;if(function(e,t){if(!e)throw new Error(t)}(p>=0,"have should not go down"),p>0){var h=a._buffer.slice(a._offset,a._offset+p);a._offset+=p,i?a.push(h):(c.push(h),u+=h.length)}if((0===d||a._offset>=a._chunkSize)&&(r=a._chunkSize,a._offset=0,a._buffer=new g(a._chunkSize)),0===d){if(s+=o-l,o=l,!i)return!0;var f=a._binding.write(t,e,s,o,a._buffer,a._offset,a._chunkSize);return f.callback=m,void(f.buffer=e)}if(!i)return!1;n()}}h.buffer=e,h.callback=m},go(hl,wl),go(ml,wl),go(gl,wl),go(fl,wl),go(vl,wl),go(yl,wl),go(kl,wl);var Il={codes:ul,createDeflate:function(e){return new hl(e)},createInflate:function(e){return new ml(e)},createDeflateRaw:function(e){return new vl(e)},createInflateRaw:function(e){return new yl(e)},createGzip:function(e){return new gl(e)},createGunzip:function(e){return new fl(e)},createUnzip:function(e){return new kl(e)},deflate:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new hl(t),e,n)},deflateSync:function(e,t){return pl(new hl(t),e)},gzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new gl(t),e,n)},gzipSync:function(e,t){return pl(new gl(t),e)},deflateRaw:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new vl(t),e,n)},deflateRawSync:function(e,t){return pl(new vl(t),e)},unzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new kl(t),e,n)},unzipSync:function(e,t){return pl(new kl(t),e)},inflate:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new ml(t),e,n)},inflateSync:function(e,t){return pl(new ml(t),e)},gunzip:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new fl(t),e,n)},gunzipSync:function(e,t){return pl(new fl(t),e)},inflateRaw:function(e,t,n){return"function"==typeof t&&(n=t,t={}),dl(new yl(t),e,n)},inflateRawSync:function(e,t){return pl(new yl(t),e)},Deflate:hl,Inflate:ml,Gzip:gl,Gunzip:fl,DeflateRaw:vl,InflateRaw:yl,Unzip:kl,Zlib:wl};return function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SDKAPPID=t,this.EXPIRETIME=o,this.PRIVATEKEY=n}var t,n,o;return t=e,(n=[{key:"genTestUserSig",value:function(e){return this._isNumber(this.SDKAPPID)?this._isString(this.PRIVATEKEY)?this._isString(e)?this._isNumber(this.EXPIRETIME)?(console.log("sdkAppID="+this.SDKAPPID+" key="+this.PRIVATEKEY+" userID="+e+" expire="+this.EXPIRETIME),this.genSigWithUserbuf(e,this.EXPIRETIME,null)):(console.error("expireTime must be a number"),""):(console.error("userID must be a string"),""):(console.error("privateKey must be a string"),""):(console.error("sdkAppID must be a number"),"")}},{key:"newBuffer",value:function(e,t){return g.from?g.from(e,t):new g(e,t)}},{key:"unescape",value:function(e){return e.replace(/_/g,"=").replace(/\-/g,"/").replace(/\*/g,"+")}},{key:"escape",value:function(e){return e.replace(/\+/g,"*").replace(/\//g,"-").replace(/=/g,"_")}},{key:"encode",value:function(e){return this.escape(this.newBuffer(e).toString("base64"))}},{key:"decode",value:function(e){return this.newBuffer(this.unescape(e),"base64")}},{key:"base64encode",value:function(e){return this.newBuffer(e).toString("base64")}},{key:"base64decode",value:function(e){return this.newBuffer(e,"base64").toString()}},{key:"_hmacsha256",value:function(e,t,n,o){var r="TLS.identifier:"+e+"\n";r+="TLS.sdkappid:"+this.SDKAPPID+"\n",r+="TLS.time:"+t+"\n",r+="TLS.expire:"+n+"\n",null!=o&&(r+="TLS.userbuf:"+o+"\n");var s=Hn.HmacSHA256(r,this.PRIVATEKEY);return Hn.enc.Base64.stringify(s)}},{key:"_utc",value:function(){return Math.round(Date.now()/1e3)}},{key:"_isNumber",value:function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===Pn(e)&&e.constructor===Number)}},{key:"_isString",value:function(e){return"string"==typeof e}},{key:"genSigWithUserbuf",value:function(e,t,n){var o=this._utc(),r={"TLS.ver":"2.0","TLS.identifier":e,"TLS.sdkappid":this.SDKAPPID,"TLS.time":o,"TLS.expire":t},s="";if(null!=n){var a=this.base64encode(n);r["TLS.userbuf"]=a,s=this._hmacsha256(e,o,t,a)}else s=this._hmacsha256(e,o,t,null);r["TLS.sig"]=s;var i=JSON.stringify(r),l=Il.deflateSync(this.newBuffer(i)).toString("base64"),c=this.escape(l);return console.log("ret="+c),c}},{key:"validate",value:function(e){var t=this.decode(e),n=Il.inflateSync(t);console.log("validate ret="+n)}}])&&On(t.prototype,n),o&&On(t,o),e}()}))},5652:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var o=n(311),r=n(5781);const s={class:"header"},a={class:"header-content"},i={class:"header-content_left"},l={class:"el-dropdown-link"},c={class:"header-content_right"},u={class:"el-dropdown-link"};var d=(0,o.defineComponent)({__name:"index",setup(e){const t=(0,o.reactive)({areaDatas:[{name:"全球",id:1},{name:"中国大陆",id:2},{name:"中国香港",id:3},{name:"中国澳门",id:4},{name:"中国台湾",id:5}],areaDatas2:[{name:"已买到的宝贝",id:1},{name:"我的足迹",id:2}]}),{areaDatas:n,areaDatas2:d}=(0,o.toRefs)(t);return(e,t)=>{const p=(0,o.resolveComponent)("el-icon"),h=(0,o.resolveComponent)("el-dropdown-item"),m=(0,o.resolveComponent)("el-dropdown-menu"),g=(0,o.resolveComponent)("el-dropdown"),f=(0,o.resolveComponent)("router-link");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",a,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(g,null,{dropdown:(0,o.withCtx)((()=>[(0,o.createVNode)(m,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n),(e=>((0,o.openBlock)(),(0,o.createBlock)(h,{key:e.id},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.name),1)])),_:2},1024)))),128))])),_:1})])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",l,[(0,o.createTextVNode)(" 中国大陆 "),(0,o.createVNode)(p,{class:"el-icon--right"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(r.K5e))])),_:1})])])),_:1}),(0,o.createVNode)(f,{class:"login-link",to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("亲,请登录")])),_:1}),(0,o.createVNode)(f,{to:"/register"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("免费注册")])),_:1}),(0,o.createVNode)(f,{to:"/mb"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("手机逛商场")])),_:1}),(0,o.createVNode)(f,{to:"/wza"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("网页无障碍")])),_:1})]),(0,o.createElementVNode)("div",c,[(0,o.createVNode)(g,null,{dropdown:(0,o.withCtx)((()=>[(0,o.createVNode)(m,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(d),(e=>((0,o.openBlock)(),(0,o.createBlock)(h,{key:e.id},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.name),1)])),_:2},1024)))),128))])),_:1})])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",u,[(0,o.createTextVNode)(" 我的淘宝 "),(0,o.createVNode)(p,{class:"el-icon--right"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(r.K5e))])),_:1})])])),_:1}),(0,o.createVNode)(f,{to:"/shop-cart"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("购物车")])),_:1}),(0,o.createVNode)(f,{to:"/login"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("收藏夹")])),_:1}),(0,o.createVNode)(f,{to:"/shop-cart"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("购物车")])),_:1}),(0,o.createVNode)(f,{to:"/chat"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("联系客服")])),_:1})])])])}}}),p=n(3744);const h=(0,p.Z)(d,[["__scopeId","data-v-285f345c"]]);var m=h},9459:function(e,t,n){"use strict";e.exports=n.p+"img/b1.89b2e459.jpg"},4402:function(e,t,n){"use strict";e.exports=n.p+"img/b3.9d44ccfa.jpg"},7352:function(e,t,n){"use strict";e.exports=n.p+"img/b4.045d3aee.jpg"},1158:function(e){"use strict";e.exports=ElementPlus},311:function(e){"use strict";e.exports=Vue},8243:function(e){"use strict";e.exports=VueRouter},4398:function(e){"use strict";e.exports=JSON.parse('{"撤回":"Recall message","删除":"Delete message","复制":"Copy","重新发送":"Resend","转发":"Forward","引用":"Reference","回复":"Reply","回复详情":"Replies","条回复":"replies","打开":"Open","已读":"Read","全部已读":"All read","人已读":" read","人未读":" unread","人关闭阅读状态":" read status closed","消息详情":"Message Detail","关闭阅读状态":"Read status closed","该消息不存在":"The message does not exist","无法定位到原消息":"Unable to navigate to the original message","未读":"Unread","您":"You","撤回了一条消息":"recalled a message","重新编辑":"Re-edit","我":"I","查看更多":"View more","转发给":"Forward to","请输入消息":"Enter a message","描述":"Description","经度":"Longitude","纬度":"Latitude","自定义消息":"Custom message","图片":"[photo]","语音":"[audio]","视频":"[video]","表情":"[face]","文件":"[file]","自定义":"[custom message]","管理员开启全员禁言":"The admin enables Mute All","您已被管理员禁言":"You have been muted by the admin","按Enter发送，Ctrl+Enter换行":"Press Enter to send a message and Ctrl+Enter to start a new line","单击下载":"Click download","确认重发该消息？":"Confirm to resend the message?","取消":"Cancel","确定":"Submit","对方正在输入":"Typing...","回到最新位置":"Back to the latest location","条新消息":" new messages","安全提示":"【Security Tips】This APP is only used to experience the functions of Tencent Cloud Instant Messaging products, and cannot be used for business negotiation and expansion. Don\'t trust money-related information such as remittances and lottery wins, don\'t make unfamiliar phone calls easily, and beware of being deceived.","点此投诉":"Complain","语音通话":"Voice Call","视频通话":"Video Call","发起群语音":"Make group voice call","发起群视频":"Make group video call","已接听":"Answered","拒绝通话":"Decline Call","无应答":"No Answer","取消通话":"Cancel Call","发起通话":"Start Call","结束群聊":"Edit Group Call","通话时长":"Duration","欢迎使用TUICallKit":"Welcome to TUICallKit","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"It is detected that you have not integrated TUI CallKit yet, so you cannot experience the audio and video call. ","请点击":"Please click","集成TUICallKit":" Integrate TUICallKit ","开通腾讯实时音视频服务":"Integration Tencent Real-Time Communication","进行体验":"to experience.","您当前购买使用的套餐包暂未开通此功能":"The package you purchased does not support this ability.","manage":{"群公告":"Group notice","群成员":"Group member","群管理":"Manage group","好友工作群":"Work","陌生人社交群":"Public","临时会议群":"Meeting","直播群":"AVChatRom","自由加入":"Join freely","需要验证":"Require approval","禁止加群":"Disallow group joining","人":"","群ID":"Group ID","群头像":"Group profile photo","群类型":"Group type","加群方式":"Group joining mode","转让群组":"Transfer ownership","解散群聊":"Disband group","退出群组":"Quit group","群管理员":"Group admin","全员禁言":"Mute All","全员禁言开启后，只允许群主和管理员发言。":"If Mute All is enabled, only the group owner and admin can speak.","单独禁言人员":"Mute a member","删除成员":"Remove member","确定从群聊中删除该成员？":"Are you sure you want to remove this member from the group chat?","确定从群聊中删除所选成员？":"Are you sure you want to remove selected member(s) from the group chat?","暂无公告":"No notice","发布":"Post","编辑":"Edit","群名称":"Group name","查看更多":"View more","管理员":"Admin","群主":"Group owner","我":"me","添加成员":"Add member","新增管理员":"Add admin","移除管理员":"Revoke admin","新增禁言用户":"Add muted member","移除禁言用户":"Remove muted member","修改群聊名称":"Edit group name","修改群聊名称后，将在群内通知其他成员":"After modifying the group chat name, other members will be notified in the group","仅限中文、字母、数字和下划线，2-20个字":"Chinese, letters, numbers and underscores only, 2-20 words","请先注册 TUIGroup 模块":"Please register the TUIGroup module first","该用户不存在":"The user does not exist","该用户不在群组内":"The user is not in the group"}}')},3601:function(e){"use strict";e.exports=JSON.parse('{"群聊通知":"Group Chat Notifications","系统通知":"System Notifications","我的群聊":"My Group Chats","输入群ID，按回车搜索":"Enter a group ID","群名称":"Group name","群ID":"Group ID","加入群聊":"Join group chat","解散群聊":"Disband group chat","退出群聊":"Quit group chat","进入群聊":"Enter group chat","群类型":"Group type","请填写验证信息":"Enter the verification info","申请加入":"Request to join","已申请":"Requested","接受":"Accept","拒绝":"Refuse","已处理":"Handled","添加群聊":"add group chat","已加入":"joined","该群组不存在":"The group does not exist","加群":"join","我的好友":"Friend","发送消息":"Send Message","个性签名":"Signature"}')},5632:function(e){"use strict";e.exports=JSON.parse('{"发起单聊":"New one-to-one chat","发起群聊":"New group chat","请输入userID":"Enter a user ID","删除会话":"Delete conversation","系统通知":"System notification","置顶会话":"Top conversation","取消置顶":"cancel top conversation","消息免打扰":"Message not disturb","取消免打扰":"cancel not disturb","有人@我":"Someone {\'@\'} me","@所有人":"{\'@\'}Everyone","条":"strip","我":"me","网络异常，请您检查网络设置":"Network exception, please check the network settings"}')},7348:function(e){"use strict";e.exports=JSON.parse('{"输入groupID搜索":"Enter groupId search","群名称":"Group name","群ID":"Group ID","加入群聊":"Join","解散群聊":"Dissolution","退出群聊":"Quit","群类型":"Group type","请填写验证信息":"Please fill in the verification information","申请加入":"Apply Join","已申请":"Applied"}')},1928:function(e){"use strict";e.exports=JSON.parse('{"资料设置":"Edit profile","头像":"Profile photo","昵称":"Name","账号":"Account","个性签名":"Status","性别":"Gender","男":"Male","女":"Female","不显示":"Rather not say","出生年月":"Birthday","取消":"Cancel","保存":"Save","请选择出生日期":"Select the date of birthday","选择头像":"Select Avatar","设置昵称":"Setting Name","仅限中文、字母、数字和下划线，2-20个字":"Chinese, letters, numbers and underscores only, 2-20 words","请输入昵称":"Enter Name","性别选择":"Select gender","请输入内容":"Enter content","用户ID":"userID","暂未设置":"Not set yet"}')},7899:function(e){"use strict";e.exports=JSON.parse('{"发起会话":"Start chat","发起单聊":"New one-to-one chat","发起群聊":"New group chat","该用户不存在":"The user does not exist","创建群聊，请注册 TUIGroup 模块":"To create a group chat, please register the TUIGroup module","创建成功":"Creation successful","发起多人会话（群聊）":"New group chat","群头像":"Group profile photo","群名称":"Group name","群ID":"Group ID","群类型":"Group type","选填":"Optional","取消":"Cancel","创建":"Create","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"Similar to a WeChat group. Users can join the group only via invitation by existing members. The invitation does not need to be agreed by the invitee or approved by the group owner. See the documentation for details.","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"Similar to a QQ group. After a public group is created, the group owner can designate group admins. To join the group, a user needs to search the group ID and send a request, which needs to be approved by the group owner or an admin before the user can join the group. See the documentation for details. ","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"After the group is created, a user can join and quit the group freely and can view the messages sent before joining the group. It is suitable for scenarios that integrate Tencent Real-Time Communication (TRTC), such as audio and video conferences and online education. See the documentation for details.","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"After a group is created, a user can join and quit the group freely. The group can have an unlimited number of members, but it does not store message history. It can be combined with Live Video Broadcasting (LVB) to support on-screen comment scenarios. See the documentation for details. ","产品文档":"product documentation","设置群名称":"Group name","请输入群名称":"Enter the group name","设置群ID":"Group ID","请输入群ID":"Enter the group ID","选择群类型":"Group type"}')},8014:function(e){"use strict";e.exports=JSON.parse('{"取消":"Cancel","完成":"Done","已选中":"Selected","人":"","保存":"Save","请输入userID":"Enter a user ID","确定":"submit","全选":"All","已在群聊中":"exists"}')},8206:function(e){"use strict";e.exports=JSON.parse('{"请对本次服务进行评价":"Please rate this service","提交评价":"Feedback","服务评价工具":"Service rate tool","使用":"Build with","自定义消息":"Custom message","搭建":"","星":"Star"}')},2723:function(e){"use strict";e.exports=JSON.parse('{"tip":{"群成员":"group members","加入群组":"joined the group","退出群组":"left the group","被":"by","踢出群组":"was kicked out of the group","成为管理员":"was set as an admin","被撤销管理员":"was revoked","被禁言":" was unmuted","被取消禁言":"cancel the prohibition","群提示消息":"group prompt message","管理员":"The admin","开启全员禁言":"enabled Mute All","取消全员禁言":"disabled Mute All","成为新的群主":"became the new group owner","修改群名为":"changed the group name to","发布新公告":"posted a new notice","申请加入群组":"requested to join the group","成功加入群组":"Successfully joined the group","被拒绝":"The request to join the group was refused","你被管理员":"You","群":"group","解散":"disbanded","创建群":"created the group","邀请你加群":"invite you to join the group","你退出群组":"You left the group","你被":"You were","设置为群":"set as group","的管理员":"as an admin","撤销群":"revoked","的管理员身份":"admin role of the group","同意加群":"agreed to join the group","拒接加群":"refused to join the group","自定义群系统通知":"Custom group system notification"},"custom":{"自定义消息":"Custom message","通话时长":"Call duration","结束群聊":"End","切换语音通话":"Switch voice call","切换视频通话":"Switch video call","发起通话":"Start a call","取消通话":"Cancel","已接听":"Answered","拒绝通话":"Decline","无应答":"No answer","对本次服务评价":"Rate this service","查看详情>>":"View details >>"}}')},4819:function(e){"use strict";e.exports=JSON.parse('{"周":"week(s) ","天":"day(s)","小时":"hour(s) ","分钟":"minute(s)","刚刚":"Just now","前":" ago"}')},8608:function(e){"use strict";e.exports=JSON.parse('{"请对本次服务进行评价":"Please rate this service","提交评价":"Feedback","常用语-快捷回复工具":"Common Expressions - Quick Reply Tool","使用":"Build with","自定义消息":"Custom message","搭建":"","在吗？在吗？在吗？重要的话说三遍。":"Are you there? ","好久没聊天了，快来和我说说话～":"It’s been a long time. How about you?","好的，就这么说定了。":"Okay. It\'s a deal.","感恩的心，感谢有你。":"So grateful! ","糟糕！是心动的感觉！":"Oh, no. Flipped.","心疼地抱抱自己，我太难了！":"Give myself a warm hug. ","没关系，别在意，事情过去就过去了。":"Take it easy.","早上好，今天也是让人期待的一天呢！":"Good morning. Have a wonderful day.","熬夜有什么用，又没人陪你聊天，早点休息吧。":"It\'s better to go to bed early."}')},9768:function(e){"use strict";e.exports=JSON.parse('{"撤回":"撤回","删除":"删除","复制":"复制","重新发送":"重新发送","转发":"转发","引用":"引用","回复":"回复","回复详情":"回复详情","条回复":"条回复","打开":"打开","已读":"已读","未读":"未读","人已读":"人已读","人未读":"人未读","人关闭阅读状态":"人关闭阅读状态","全部已读":"全部已读","消息详情":"消息详情","关闭阅读状态":"关闭","您":"您","撤回了一条消息":"撤回了一条消息","重新编辑":"重新编辑","我":"我","自定义消息":"自定义消息","查看更多":"查看更多","确认重发该消息？":"确认重发该消息？","取消":"取消","确定":"确定","转发给":"转发给","请输入消息":"请输入消息","描述":"描述","经度":"经度","纬度":"纬度","图片":"[图片]","语音":"[语音]","视频":"[视频]","表情":"[表情]","文件":"[文件]","自定义":"[自定义消息]","管理员开启全员禁言":"管理员开启全员禁言","您已被管理员禁言":"您已被管理员禁言","按Enter发送，Ctrl+Enter换行":"按Enter发送，Ctrl+Enter换行","单击下载":"单击下载","该消息不存在":"该消息不存在","无法定位到原消息":"无法定位到原消息","对方正在输入":"对方正在输入...","回到最新位置":"回到最新位置","条新消息":"条新消息","安全提示":"【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。","点此投诉":"点此投诉","语音通话":"语音通话","视频通话":"视频通话","发起群语音":"发起群语音","发起群视频":"发起群视频","已接听":"已接听","拒绝通话":"拒绝通话","无应答":"无应答","取消通话":"取消通话","发起通话":"发起通话","结束群聊":"结束群聊","通话时长":"通话时长","欢迎使用TUICallKit":"欢迎使用腾讯云音视频通话组件TUICallKit ","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"检测到您暂未集成TUICallKit，无法体验音视频通话功能。","请点击":"请点击","集成TUICallKit":"集成 TUICallKit ","开通腾讯实时音视频服务":"开通腾讯实时音视频服务","进行体验":"进行体验。","您当前购买使用的套餐包暂未开通群消息已读回执功能":"您当前购买使用的套餐包暂未开通【群消息已读回执】功能，请升级至旗舰版进行体验","您当前购买使用的套餐包暂未开通在线用户列表功能":"您当前购买使用的套餐包暂未开通【在线用户列表】功能，请升级至旗舰版进行体验","您当前购买使用的套餐包暂未开通此功能":"您当前购买使用的套餐包暂未开通此功能。","manage":{"群公告":"群公告","群成员":"群成员","群管理":"群管理","好友工作群":"好友工作群","陌生人社交群":"陌生人社交群","临时会议群":"临时会议群","直播群":"直播群","自由加入":"自由加入","需要验证":"需要验证","禁止加群":"禁止加群","人":"人","群ID":"群ID","群头像":"群头像","群类型":"群类型","加群方式":"加群方式","转让群组":"转让群组","解散群聊":"解散群聊","退出群组":"退出群组","群管理员":"群管理员","全员禁言":"全员禁言","全员禁言开启后，只允许群主和管理员发言。":"全员禁言开启后，只允许群主和管理员发言。","单独禁言人员":"单独禁言人员","删除成员":"删除成员","确定从群聊中删除该成员？":"确定从群聊中删除该成员？","确定从群聊中删除所选成员？":"确定从群聊中删除所选成员？","暂无公告":"暂无公告","发布":"发布","编辑":"编辑","群名称":"群名称","查看更多":"查看更多","管理员":"管理员","群主":"群主","我":"我","添加成员":"添加成员","新增管理员":"新增管理员","移除管理员":"移除管理员","新增禁言用户":"新增禁言用户","移除禁言用户":"移除禁言用户","修改群聊名称":"修改群聊名称","修改群聊名称后，将在群内通知其他成员":"修改群聊名称后，将在群内通知其他成员","仅限中文、字母、数字和下划线，2-20个字":"仅限中文、字母、数字和下划线，2-20个字","请先注册 TUIGroup 模块":"请先注册 TUIGroup 模块","该用户不存在":"该用户不存在","该用户不在群组内":"该用户不在群组内"}}')},9473:function(e){"use strict";e.exports=JSON.parse('{"群聊通知":"群聊通知","系统通知":"系统通知","我的群聊":"我的群聊","输入群ID，按回车搜索":"输入群ID，按回车搜索","群名称":"群名称","群ID":"群ID","加入群聊":"加入群聊","解散群聊":"解散群聊","退出群聊":"退出群聊","进入群聊":"进入群聊","群类型":"群类型","请填写验证信息":"请填写验证信息","申请加入":"申请加入","已申请":"已申请","接受":"接受","拒绝":"拒绝","已处理":"已处理","添加群聊":"添加群聊","已加入":"已加入","该群组不存在":"该群组不存在","加群":"加群","我的好友":"我的好友","发送消息":"发送消息","个性签名":"个性签名"}')},4950:function(e){"use strict";e.exports=JSON.parse('{"发起单聊":"发起单聊","发起群聊":"发起群聊","请输入userID":"请输入userID","删除会话":"删除会话","置顶会话":"置顶会话","取消置顶":"取消置顶","消息免打扰":"消息免打扰","取消免打扰":"取消免打扰","系统通知":"系统通知","有人@我":"有人{\'@\'}我","@所有人":"{\'@\'}所有人","条":"条","我":"我","网络异常，请您检查网络设置":"网络异常，请您检查网络设置"}')},9810:function(e){"use strict";e.exports=JSON.parse('{"输入groupID搜索":"输入groupID搜索","群名称":"群名称","群ID":"群ID","加入群聊":"加入群聊","解散群聊":"解散群聊","退出群聊":"退出群聊","群类型":"群类型","请填写验证信息":"请填写验证信息","申请加入":"申请加入","已申请":"已申请"}')},8690:function(e){"use strict";e.exports=JSON.parse('{"资料设置":"资料设置","头像":"头像","昵称":"昵称","账号":"账号","个性签名":"个性签名","性别":"性别","男":"男","女":"女","不显示":"不显示","出生年月":"出生年月","取消":"取消","保存":"保存","请选择出生日期":"请选择出生日期","选择头像":"选择头像","设置昵称":"设置昵称","仅限中文、字母、数字和下划线，2-20个字":"仅限中文、字母、数字和下划线，2-20个字","请输入昵称":"请输入昵称","性别选择":"性别选择","请输入内容":"请输入内容","用户ID":"用户ID","暂未设置":"暂未设置"}')},5058:function(e){"use strict";e.exports=JSON.parse('{"发起会话":"发起会话","发起单聊":"发起单聊","发起群聊":"发起群聊","该用户不存在":"该用户不存在","创建群聊，请注册 TUIGroup 模块":"创建群聊，请注册 TUIGroup 模块","创建成功":"创建成功","发起多人会话（群聊）":"发起多人会话（群聊）","群头像":"群头像","群名称":"群名称","群ID":"群ID","群类型":"群类型","选填":"选填","取消":"取消","创建":"创建","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见","产品文档":"产品文档","设置群名称":"设置群名称","请输入群名称":"请输入群名称","设置群ID":"设置群ID","请输入群ID":"请输入群ID","选择群类型":"选择群类型"}')},8775:function(e){"use strict";e.exports=JSON.parse('{"取消":"取消","完成":"完成","已选中":"已选中","人":"人","保存":"保存","请输入userID":"请输入userID","确定":"确定","全选":"全选","已在群聊中":"已在群聊中"}')},5524:function(e){"use strict";e.exports=JSON.parse('{"请对本次服务进行评价":"请对本次服务进行评价","提交评价":"提交评价","服务评价工具":"服务评价工具","使用":"使用","自定义消息":"自定义消息","搭建":"搭建","星":"星"}')},9224:function(e){"use strict";e.exports=JSON.parse('{"tip":{"群成员":"群成员","加入群组":"加入群组","退出群组":"退出群组","被":"被","踢出群组":"踢出群组","成为管理员":"成为管理员","被撤销管理员":"被撤销管理员","被禁言":"被禁言","被取消禁言":"被取消禁言","群提示消息":"群提示消息","管理员":"管理员","开启全员禁言":"开启全员禁言","取消全员禁言":"取消全员禁言","成为新的群主":"成为新的群主","修改群名为":"修改群名为","发布新公告":"发布新公告","申请加入群组":"申请加入群组","成功加入群组":"成功加入群组","被拒绝":"被拒绝","你被管理员":"你被管理员","群":"群","解散":"解散","创建群":"创建群","邀请你加群":"邀请你加群","你退出群组":"你退出群组","你被":"你被","设置为群":"设置为群","的管理员":"的管理员","撤销群":"撤销群","的管理员身份":"的管理员身份","同意加群":"同意加群","拒接加群":"拒接加群","自定义群系统通知":"自定义群系统通知"},"custom":{"自定义消息":"自定义消息","通话时长":"通话时长","结束群聊":"结束群聊","切换语音通话":"切换语音通话","切换视频通话":"切换视频通话","发起通话":"发起通话","取消通话":"取消通话","已接听":"已接听","拒绝通话":"拒绝通话","无应答":"无应答","对本次服务评价":"对本次服务评价","查看详情>>":"查看详情>>"}}')},7339:function(e){"use strict";e.exports=JSON.parse('{"周":"周","天":"天","小时":"小时","分钟":"分钟","刚刚":"刚刚","前":"前"}')},2543:function(e){"use strict";e.exports=JSON.parse('{"常用语-快捷回复工具":"常用语-快捷回复工具","在吗？在吗？在吗？重要的话说三遍。":"在吗？在吗？在吗？重要的话说三遍。","好久没聊天了，快来和我说说话～":"好久没聊天了，快来和我说说话～","好的，就这么说定了。":"好的，就这么说定了。","感恩的心，感谢有你。":"感恩的心，感谢有你。","糟糕！是心动的感觉！":"糟糕！是心动的感觉！","心疼地抱抱自己，我太难了！":"心疼地抱抱自己，我太难了！","没关系，别在意，事情过去就过去了。":"没关系，别在意，事情过去就过去了。","早上好，今天也是让人期待的一天呢！":"早上好，今天也是让人期待的一天呢！","熬夜有什么用，又没人陪你聊天，早点休息吧。":"熬夜有什么用，又没人陪你聊天，早点休息吧。"}')}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,s){if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],s=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[o,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{377:"c0e42497",658:"231d76ed",937:"0fe03cf4"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{377:"94a809f2",658:"abebb61d",937:"327c78ac"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="chat-example:";n.l=function(o,r,s,a){if(e[o])e[o].push(r);else{var i,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+s){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+s),i.src=o),e[o]=[r];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(h);var r=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,r){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var a=function(n){if(s.onerror=s.onload=null,"load"===n.type)o();else{var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=i,s.parentNode&&s.parentNode.removeChild(s),r(l)}};return s.onerror=s.onload=a,s.href=t,n?n.parentNode.insertBefore(s,n.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],s=r.getAttribute("data-href");if(s===e||s===t)return r}},o=function(o){return new Promise((function(r,s){var a=n.miniCssF(o),i=n.p+a;if(t(a,i))return r();e(o,i,null,r,s)}))},r={143:0};n.f.miniCss=function(e,t){var n={377:1,658:1,937:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var s=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=s);var a=n.p+n.u(t),i=new Error,l=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,r[1](i)}};n.l(a,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,a=o[0],i=o[1],l=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var u=l(n)}for(t&&t(o);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},o=self["webpackChunkchat_example"]=self["webpackChunkchat_example"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[405,877,319,710,329,206,460,662,579,332,301,203,392,876,679,903,234,693,651,944,986,744,860,973,968,711],(function(){return n(449)}));o=n.O(o)})();